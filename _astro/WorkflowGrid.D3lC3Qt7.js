import{T as W,a as F}from"./runtime-dom.esm-bundler.CPOpO5Up.js";import{V as B,W as j,F as R}from"./ViewToggle.DPAiU2WM.js";import{b as Q,s as A,d as H,a as I,e as b,v as C,u as O}from"./workflowStore.D3gPXKZ_.js";import{W as q}from"./WorkflowCard.nKHlfkyf.js";/* empty css                       */import{_ as P}from"./_plugin-vue_export-helper.DN2-K7-W.js";import{u as Y}from"./index.b1xRxfqL.js";import{d as J,c as l,a as s,e as w,w as p,j as K,g as a,h as X,b as v,i as g,o as r,t as m,F as D,r as M,f as V,k as G}from"./runtime-core.esm-bundler.B5MlYfp8.js";import"./index.zRLGxC8m.js";import"./createLucideIcon.BEmEF-7Z.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};i.SENTRY_RELEASE={id:"894175cf251fa1b76a3954c9b593372d09b9a5ff"};var e=new i.Error().stack;e&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[e]="cb94eda0-fad8-4f97-8594-b948107157e2",i._sentryDebugIdIdentifier="sentry-dbid-cb94eda0-fad8-4f97-8594-b948107157e2")}catch{}})();const Z=J({__name:"WorkflowGrid",props:{workflows:{}},setup(i,{expose:e}){e();const y=i;Q.set(y.workflows);const t=Y(C),d=v([]),f=v(""),n=v(!1),u=g(()=>f.value.trim().length>0),k=g(()=>y.workflows.slice().sort((o,c)=>new Date(c.updated).getTime()-new Date(o.updated).getTime())),x={keys:[{name:"name",weight:.5},{name:"annotation",weight:.4},{name:"tags",weight:.2},{name:"collections",weight:.1}],threshold:.4,ignoreLocation:!0,minMatchCharLength:2},_=g(()=>new R(k.value,x)),N=g(()=>{const o=c=>!d.value.length||d.value.every(S=>c.collections.includes(S));return f.value?_.value.search(f.value.trim()).map(z=>z.item).filter(o):k.value.filter(o)}),E=g(()=>u.value||d.value.length>0),L=g(()=>d.value.length>0?d.value[0]:null);let h;const U=o=>{const c=o.target.value;f.value=c,b.set(c),clearTimeout(h),h=setTimeout(()=>{O(c)},300)};X(()=>{A(),H(),d.value=I.get(),f.value=b.get(),n.value=!0;const o=localStorage.getItem("iwc-view-mode");(o==="list"||o==="grid")&&C.set(o)}),I.subscribe(o=>{n.value&&(d.value=o)}),b.subscribe(o=>{n.value&&(f.value=o)});const T={props:y,mode:t,localFilters:d,localSearchQuery:f,isHydrated:n,isSearching:u,sortedWorkflows:k,fuseOptions:x,fuse:_,filteredWorkflows:N,_hasActiveFilters:E,selectedCategory:L,get urlUpdateTimeout(){return h},set urlUpdateTimeout(o){h=o},handleSearchInput:U,WorkflowCard:q,WorkflowListItem:j,ViewToggle:B};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),$={class:"w-full"},ee={class:"mb-4"},te=["value"],oe={class:"flex justify-between items-center mb-4"},se={key:"search-category",class:"text-chicago-600 text-sm"},re={class:"font-semibold"},le={class:"font-bold text-ebony-clay-900"},ae={key:"search",class:"text-chicago-600 text-sm"},ne={class:"font-semibold"},ie={key:"category",class:"text-chicago-600 text-sm"},de={class:"font-semibold"},fe={class:"font-bold text-ebony-clay-900"},ce={key:"total",class:"text-chicago-500 text-sm"},ue={class:"font-semibold"},ge={id:"workflows",key:"list",class:"flex flex-col border border-ebony-clay-100 rounded-xl overflow-hidden shadow-sm"},me={id:"workflows",key:"grid",class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ye={class:"mt-8 py-5 px-6 rounded-lg border border-chicago-200 bg-chicago-50 text-center text-sm text-chicago-600"},we={key:0,class:"text-xl text-chicago-500 mb-3"},he={key:1},pe={key:2};function ke(i,e,y,t,d,f){return r(),l("div",$,[s("div",ee,[s("input",{type:"text",value:t.localSearchQuery,placeholder:"Search workflows...",class:"w-full p-3 border border-chicago-200 bg-white rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-hokey-pokey-500 focus:border-transparent transition-shadow",onInput:t.handleSearchInput},null,40,te)]),s("div",oe,[w(W,{name:"fade",mode:"out-in"},{default:p(()=>[t.isSearching&&t.selectedCategory?(r(),l("p",se,[e[0]||(e[0]=a(" Found ",-1)),s("span",re,m(t.filteredWorkflows.length),1),e[1]||(e[1]=a(" ",-1)),s("span",le,m(t.selectedCategory),1),e[2]||(e[2]=a(" workflows matching your query ",-1))])):t.isSearching?(r(),l("p",ae,[e[3]||(e[3]=a(" Found ",-1)),s("span",ne,m(t.filteredWorkflows.length),1),e[4]||(e[4]=a(" workflows ",-1))])):t.selectedCategory?(r(),l("p",ie,[s("span",de,m(t.filteredWorkflows.length),1),e[5]||(e[5]=a(" ",-1)),s("span",fe,m(t.selectedCategory),1),e[6]||(e[6]=a(" workflows ",-1))])):(r(),l("p",ce,[s("span",ue,m(t.sortedWorkflows.length),1),e[7]||(e[7]=a()),e[8]||(e[8]=s("span",null,"workflows",-1))]))]),_:1}),w(t.ViewToggle)]),w(W,{name:"view-fade",mode:"out-in"},{default:p(()=>[t.mode==="list"?(r(),l("div",ge,[w(F,{name:"list-stagger",appear:""},{default:p(()=>[(r(!0),l(D,null,M(t.filteredWorkflows,(n,u)=>(r(),V(t.WorkflowListItem,{key:n.uuid,workflow:n,style:G({"--stagger-delay":`${Math.min(u*20,300)}ms`})},null,8,["workflow","style"]))),128))]),_:1})])):(r(),l("div",me,[w(F,{name:"grid-stagger",appear:""},{default:p(()=>[(r(!0),l(D,null,M(t.filteredWorkflows,(n,u)=>(r(),V(t.WorkflowCard,{key:n.uuid,workflow:n,style:G({"--stagger-delay":`${Math.min(u*30,400)}ms`}),compact:""},null,8,["workflow","style"]))),128))]),_:1})]))]),_:1}),s("div",ye,[t.filteredWorkflows.length===0?(r(),l("p",we," No workflows found matching your criteria. ")):K("",!0),t.filteredWorkflows.length===0?(r(),l("span",he,"Try searching for Galaxy workflows on ")):(r(),l("span",pe,"Find more Galaxy workflows on ")),e[9]||(e[9]=s("a",{href:"https://dockstore.org/search?descriptorType=Galaxy&descriptorType=gxformat2&entryType=workflows&searchMode=files",target:"_blank",rel:"noopener noreferrer",class:"text-hokey-pokey-700 underline hover:text-hokey-pokey-900"},"Dockstore",-1)),e[10]||(e[10]=a(", ",-1)),e[11]||(e[11]=s("a",{href:"https://workflowhub.eu/workflows?filter%5Bworkflow_type%5D=galaxy",target:"_blank",rel:"noopener noreferrer",class:"text-hokey-pokey-700 underline hover:text-hokey-pokey-900"},"WorkflowHub",-1)),e[12]||(e[12]=a(", and the ",-1)),e[13]||(e[13]=s("a",{href:"https://training.galaxyproject.org/training-material/workflows/list",target:"_blank",rel:"noopener noreferrer",class:"text-hokey-pokey-700 underline hover:text-hokey-pokey-900"},"Galaxy Training Network",-1)),e[14]||(e[14]=a(". ",-1))])])}const De=P(Z,[["render",ke],["__scopeId","data-v-6e9610fc"]]);export{De as default};
