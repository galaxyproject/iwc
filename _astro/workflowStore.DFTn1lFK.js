let u=[],a=0;const c=4;let g=0,v=e=>{let i=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=i.push(n),()=>{for(let s=a+c;s<u.length;)u[s]===n?u.splice(s,c):s+=c;let l=i.indexOf(n);~l&&(i.splice(l,1),--t.lc||t.off())}},notify(n,l){g++;let s=!u.length;for(let r of i)u.push(r,t.value,n,l);if(s){for(a=0;a<u.length;a+=c)u[a](u[a+1],u[a+2],u[a+3]);u.length=0}},off(){},set(n){let l=t.value;l!==n&&(t.value=n,t.notify(l))},subscribe(n){let l=t.listen(n);return n(t.value),l},value:e};return t};const M=5,d=6,p=10;let O=(e,i,t,n)=>(e.events=e.events||{},e.events[t+p]||(e.events[t+p]=n(l=>{e.events[t].reduceRight((s,r)=>(r(s),s),{shared:{},...l})})),e.events[t]=e.events[t]||[],e.events[t].push(i),()=>{let l=e.events[t],s=l.indexOf(i);l.splice(s,1),l.length||(delete e.events[t],e.events[t+p](),delete e.events[t+p])}),S=1e3,L=(e,i)=>O(e,n=>{let l=i(n);l&&e.events[d].push(l)},M,n=>{let l=e.listen;e.listen=(...r)=>(!e.lc&&!e.active&&(e.active=!0,n()),l(...r));let s=e.off;return e.events[d]=[],e.off=()=>{s(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let r of e.events[d])r();e.events[d]=[]}},S)},()=>{e.listen=l,e.off=s}}),N=(e,i,t)=>{Array.isArray(e)||(e=[e]);let n,l,s=()=>{if(l===g)return;l=g;let o=e.map(f=>f.get());if(!n||o.some((f,m)=>f!==n[m])){n=o;let f=i(...o);f&&f.then&&f.t?f.then(m=>{n===o&&r.set(m)}):(r.set(f),l=g)}},r=v(void 0),T=r.get;r.get=()=>(s(),T());let U=s;return L(r,()=>{let o=e.map(f=>f.listen(U));return s(),()=>{for(let f of o)f()}}),r},w=(e,i)=>N(e,i);const E=v([]),h=v([]),x=v(""),R=w(E,e=>e.flatMap(i=>i.workflows));w(R,e=>Array.from(new Set(e.flatMap(i=>i.collections))).sort());function A(e){E.set(e)}function _(e){h.get().includes(e)?h.set([]):h.set([e])}function k(){if(typeof window<"u"){const i=new URLSearchParams(window.location.search).get("filter");i&&h.set([i])}}function F(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}export{k as a,x as b,F as c,R as d,A as e,h as s,_ as t};
