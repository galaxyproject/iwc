let o=[],f=0;const d=4;let w=0,c=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(i){return n.lc=t.push(i),()=>{for(let s=f+d;s<o.length;)o[s]===i?o.splice(s,d):s+=d;let l=t.indexOf(i);~l&&(t.splice(l,1),--n.lc||n.off())}},notify(i,l){w++;let s=!o.length;for(let r of t)o.push(r,n.value,i,l);if(s){for(f=0;f<o.length;f+=d)o[f](o[f+1],o[f+2],o[f+3]);o.length=0}},off(){},set(i){let l=n.value;l!==i&&(n.value=i,n.notify(l))},subscribe(i){let l=n.listen(i);return i(n.value),l},value:e};return n};const M=5,p=6,h=10;let L=(e,t,n,i)=>(e.events=e.events||{},e.events[n+h]||(e.events[n+h]=i(l=>{e.events[n].reduceRight((s,r)=>(r(s),s),{shared:{},...l})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let l=e.events[n],s=l.indexOf(t);l.splice(s,1),l.length||(delete e.events[n],e.events[n+h](),delete e.events[n+h])}),R=1e3,O=(e,t)=>L(e,i=>{let l=t(i);l&&e.events[p].push(l)},M,i=>{let l=e.listen;e.listen=(...r)=>(!e.lc&&!e.active&&(e.active=!0,i()),l(...r));let s=e.off;return e.events[p]=[],e.off=()=>{s(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let r of e.events[p])r();e.events[p]=[]}},R)},()=>{e.listen=l,e.off=s}}),x=(e,t,n)=>{Array.isArray(e)||(e=[e]);let i,l,s=()=>{if(l===w)return;l=w;let u=e.map(a=>a.get());if(!i||u.some((a,v)=>a!==i[v])){i=u;let a=t(...u);a&&a.then&&a.t?a.then(v=>{i===u&&r.set(v)}):(r.set(a),l=w)}},r=c(void 0),E=r.get;r.get=()=>(s(),E());let T=s;return O(r,()=>{let u=e.map(a=>a.listen(T));return s(),()=>{for(let a of u)a()}}),r},m=(e,t)=>x(e,t);const S=c([]),A=c([]),g=c([]),_=c(""),F=c("list"),U=c("");m(U,e=>e.trim().length>0);const N=m(S,e=>e.flatMap(t=>t.workflows));m(N,e=>Array.from(new Set(e.flatMap(t=>t.collections))).sort());function I(e){S.set(e)}function Q(e){g.get().includes(e)?g.set([]):g.set([e])}function k(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("filter");t&&g.set([t])}}function q(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("q");t&&U.set(t)}}function y(e){if(typeof window<"u"){const t=new URLSearchParams(window.location.search);e.trim()?t.set("q",e.trim()):t.delete("q");const n=t.toString()?`?${t.toString()}`:window.location.pathname;window.history.replaceState({},"",n)}}function P(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}m(A,e=>Array.from(new Set(e.flatMap(t=>t.collections))).sort());export{g as a,_ as b,P as c,N as d,I as e,A as f,q as g,U as h,k as s,Q as t,y as u,F as v};
