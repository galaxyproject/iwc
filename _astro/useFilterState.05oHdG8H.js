import{s as p,a as u,t as g,c as F}from"./workflowStore.CYZ9I8yu.js";import{u as y}from"./index.CzOpfASk.js";import{g as C,h as f,i as r}from"./runtime-core.esm-bundler.KxR6gTR-.js";function k(d){const{workflows:l,closeOnSelect:w}=d,m=y(u),s=f([]),a=f(!1),i=r(()=>{const o=new Set;for(const t of l)for(const e of t.collections)o.add(e);return Array.from(o).sort()}),c=r(()=>{const o={};for(const t of l)for(const e of t.collections)o[e]=(o[e]||0)+1;return o}),S=r(()=>[...i.value].sort((o,t)=>(c.value[t]||0)-(c.value[o]||0)));C(()=>{p(),s.value=[...m.value],a.value=!0}),u.subscribe(o=>{a.value&&(s.value=[...o])});function h(o){if(window.location.pathname==="/"){const e=s.value.includes(o);g(o);const n=new URLSearchParams(window.location.search);e?n.delete("filter"):n.set("filter",o);const v=n.toString()?`?${n.toString()}`:"/";window.history.pushState({},"",v)}else window.location.href=`/collection/${F(o)}`;w?.()}return{selected:s,collections:i,collectionCounts:c,sortedCollections:S,handleFilterClick:h}}export{k as u};
