import{T as k,a as T}from"./runtime-dom.esm-bundler.B27qsgct.js";import{V as G,W as Q,F as O}from"./ViewToggle.BTn9dfBb.js";import{b as R,s as q,d as A,a as C,e as v,v as I,u as E}from"./workflowStore.CYZ9I8yu.js";import{W as H}from"./WorkflowCard.B1aBhwNz.js";/* empty css                       */import{_ as P}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as J}from"./index.QVsgzSMo.js";import{d as K,c as a,a as r,e as f,w,h as X,b as _,i as m,o as s,g as c,t as g,F as M,r as V,f as U,j as z,k as Y}from"./runtime-core.esm-bundler.C1AOJpOJ.js";import"./index.MdjGU124.js";import"./createLucideIcon.GJINzpv7.js";const Z=K({__name:"WorkflowGrid",props:{workflows:{}},setup(x,{expose:e}){e();const h=x;R.set(h.workflows);const t=J(I),n=_([]),i=_(""),l=_(!1),u=m(()=>i.value.trim().length>0),y=m(()=>h.workflows.slice().sort((o,d)=>new Date(d.updated).getTime()-new Date(o.updated).getTime())),b={keys:[{name:"name",weight:.5},{name:"annotation",weight:.4},{name:"tags",weight:.2},{name:"collections",weight:.1}],threshold:.4,ignoreLocation:!0,minMatchCharLength:2},S=m(()=>new O(y.value,b)),L=m(()=>{const o=d=>!n.value.length||n.value.every(F=>d.collections.includes(F));return i.value?S.value.search(i.value.trim()).map(D=>D.item).filter(o):y.value.filter(o)}),N=m(()=>u.value||n.value.length>0),B=m(()=>n.value.length>0?n.value[0]:null);let p;const j=o=>{const d=o.target.value;i.value=d,v.set(d),clearTimeout(p),p=setTimeout(()=>{E(d)},300)};X(()=>{q(),A(),n.value=C.get(),i.value=v.get(),l.value=!0;const o=localStorage.getItem("iwc-view-mode");(o==="list"||o==="grid")&&I.set(o)}),C.subscribe(o=>{l.value&&(n.value=o)}),v.subscribe(o=>{l.value&&(i.value=o)});const W={props:h,mode:t,localFilters:n,localSearchQuery:i,isHydrated:l,isSearching:u,sortedWorkflows:y,fuseOptions:b,fuse:S,filteredWorkflows:L,_hasActiveFilters:N,selectedCategory:B,get urlUpdateTimeout(){return p},set urlUpdateTimeout(o){p=o},handleSearchInput:j,WorkflowCard:H,WorkflowListItem:Q,ViewToggle:G};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),$={class:"w-full"},ee={class:"mb-4"},te=["value"],oe={class:"flex justify-between items-center mb-4"},se={key:"search-category",class:"text-chicago-600 text-sm"},re={class:"font-semibold"},le={class:"font-bold text-ebony-clay-900"},ae={key:"search",class:"text-chicago-600 text-sm"},ne={class:"font-semibold"},ie={key:"category",class:"text-chicago-600 text-sm"},de={class:"font-semibold"},ce={class:"font-bold text-ebony-clay-900"},ue={key:"total",class:"text-chicago-500 text-sm"},fe={class:"font-semibold"},me={id:"workflows",key:"list",class:"flex flex-col border border-ebony-clay-100 rounded-xl overflow-hidden shadow-sm"},ge={id:"workflows",key:"grid",class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},we={key:0,class:"text-center py-12 text-chicago-500"};function he(x,e,h,t,n,i){return s(),a("div",$,[r("div",ee,[r("input",{type:"text",value:t.localSearchQuery,placeholder:"Search workflows...",class:"w-full p-3 border border-chicago-200 bg-white rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-hokey-pokey-500 focus:border-transparent transition-shadow",onInput:t.handleSearchInput},null,40,te)]),r("div",oe,[f(k,{name:"fade",mode:"out-in"},{default:w(()=>[t.isSearching&&t.selectedCategory?(s(),a("p",se,[e[0]||(e[0]=c(" Found ",-1)),r("span",re,g(t.filteredWorkflows.length),1),e[1]||(e[1]=c(" ",-1)),r("span",le,g(t.selectedCategory),1),e[2]||(e[2]=c(" workflows matching your query ",-1))])):t.isSearching?(s(),a("p",ae,[e[3]||(e[3]=c(" Found ",-1)),r("span",ne,g(t.filteredWorkflows.length),1),e[4]||(e[4]=c(" workflows ",-1))])):t.selectedCategory?(s(),a("p",ie,[r("span",de,g(t.filteredWorkflows.length),1),e[5]||(e[5]=c(" ",-1)),r("span",ce,g(t.selectedCategory),1),e[6]||(e[6]=c(" workflows ",-1))])):(s(),a("p",ue,[r("span",fe,g(t.sortedWorkflows.length),1),e[7]||(e[7]=c()),e[8]||(e[8]=r("span",null,"workflows",-1))]))]),_:1}),f(t.ViewToggle)]),f(k,{name:"view-fade",mode:"out-in"},{default:w(()=>[t.mode==="list"?(s(),a("div",me,[f(T,{name:"list-stagger",appear:""},{default:w(()=>[(s(!0),a(M,null,V(t.filteredWorkflows,(l,u)=>(s(),U(t.WorkflowListItem,{key:l.uuid,workflow:l,style:z({"--stagger-delay":`${Math.min(u*20,300)}ms`})},null,8,["workflow","style"]))),128))]),_:1})])):(s(),a("div",ge,[f(T,{name:"grid-stagger",appear:""},{default:w(()=>[(s(!0),a(M,null,V(t.filteredWorkflows,(l,u)=>(s(),U(t.WorkflowCard,{key:l.uuid,workflow:l,style:z({"--stagger-delay":`${Math.min(u*30,400)}ms`}),compact:""},null,8,["workflow","style"]))),128))]),_:1})]))]),_:1}),f(k,{name:"fade"},{default:w(()=>[t.filteredWorkflows.length===0?(s(),a("div",we,[...e[9]||(e[9]=[r("p",{class:"text-xl"},"No workflows found matching your criteria.",-1)])])):Y("",!0)]),_:1})])}const Te=P(Z,[["render",he],["__scopeId","data-v-a40550f0"]]);export{Te as default};
