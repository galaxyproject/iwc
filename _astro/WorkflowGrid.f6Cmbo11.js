import{T as b,b as B}from"./runtime-dom.esm-bundler.1f3YXgJn.js";import{F as q}from"./fuse.Dw8P0qyA.js";import{v as k,f as E,s as H,g as J,a as j,h as C,u as K}from"./workflowStore.DqeQMR3k.js";import{B as X,C as Y,T as Z,W as $}from"./WorkflowCard.LUVusEuN.js";import{c as U,n as ee,f as te}from"./createLucideIcon.JrejYhTP.js";import{_ as z}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as L,c as n,o as r,a as o,j as T,t as c,h as p,F as W,r as G,w as y,i as u,e as f,n as _,f as h,b as S,g as oe,W as D}from"./runtime-core.esm-bundler.jabZ_zBL.js";import{u as A}from"./index.DmI9zalj.js";/* empty css                       *//**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=U("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=U("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),re=L({__name:"WorkflowListItem",props:{workflow:{}},setup(w,{expose:t}){t();const s={get formatDate(){return te},get navigateToCollection(){return ee},Badge:X,get Tag(){return Z},get Clock(){return Y}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),le=["id"],ne={class:"flex items-start gap-6"},ie={class:"flex-1 min-w-0"},de=["href"],ce={class:"text-lg font-bold text-ebony-clay-900 group-hover/link:text-hokey-pokey-600 transition-colors duration-200 mb-1.5"},ue={class:"text-sm text-chicago-600 mb-3 line-clamp-2 leading-relaxed"},fe={key:0,class:"flex flex-wrap gap-2"},ge={class:"flex flex-col gap-2.5 text-sm min-w-[140px] pt-0.5"},me={class:"flex items-center gap-2 text-chicago-500"},he={class:"font-medium text-ebony-clay-700"},ye={class:"flex items-center gap-2 text-chicago-500"};function we(w,t,s,e,i,d){return r(),n("div",{id:`workflow-${s.workflow.uuid}`,class:"group relative px-5 py-4 border-b border-ebony-clay-100 transition-all duration-200 odd:bg-bay-of-many-50/30 hover:bg-bay-of-many-50"},[t[0]||(t[0]=o("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-hokey-pokey-500 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-200"},null,-1)),o("div",ne,[o("div",ie,[o("a",{href:`/workflow/${encodeURIComponent(s.workflow.iwcID)}/`,class:"group/link"},[o("h3",ce,c(s.workflow.name),1)],8,de),o("p",ue,c(s.workflow.annotation),1),s.workflow.collections&&s.workflow.collections.length>0?(r(),n("div",fe,[(r(!0),n(W,null,G(s.workflow.collections.slice(0,4),a=>(r(),p(e.Badge,{key:a,variant:"secondary",class:"text-xs cursor-pointer hover:bg-hokey-pokey-500 hover:text-ebony-clay-950 hover:border-hokey-pokey-500 transition-colors duration-200",onClick:m=>e.navigateToCollection(a)},{default:y(()=>[u(c(a),1)]),_:2},1032,["onClick"]))),128)),s.workflow.collections.length>4?(r(),p(e.Badge,{key:0,variant:"secondary",class:"text-xs"},{default:y(()=>[u(" +"+c(s.workflow.collections.length-4),1)]),_:1})):T("",!0)])):T("",!0)]),o("div",ge,[o("div",me,[f(e.Tag,{size:14,class:"text-bay-of-many-500"}),o("span",he,c(s.workflow.release),1)]),o("div",ye,[f(e.Clock,{size:14,class:"text-bay-of-many-400"}),o("span",null,c(e.formatDate(s.workflow.updated)),1)])])])],8,le)}const _e=z(re,[["render",we]]),xe=L({__name:"ViewToggle",setup(w,{expose:t}){t();const s=A(k),e=a=>{k.set(a),localStorage.setItem("iwc-view-mode",a)},i=h(()=>s.value==="grid"),d={mode:s,handleValueChange:e,isGrid:i,get List(){return ae},get LayoutGrid(){return se}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),ke={class:"flex items-center"},pe={class:"relative inline-flex rounded-full bg-ebony-clay-100 p-1"},ve=["aria-pressed"],be=["aria-pressed"];function Ce(w,t,s,e,i,d){return r(),n("div",ke,[o("div",pe,[o("div",{class:_(["absolute top-1 bottom-1 w-[calc(50%-2px)] rounded-full bg-hokey-pokey-500 shadow-md transition-all duration-300 ease-out",e.isGrid?"left-[calc(50%+1px)]":"left-1"])},null,2),o("button",{"aria-pressed":!e.isGrid,"aria-label":"List view",class:_(["relative z-10 inline-flex items-center gap-1.5 rounded-full px-3.5 py-1.5 text-sm font-medium transition-colors duration-300",e.isGrid?"text-chicago-600 hover:text-chicago-800":"text-ebony-clay-950"]),onClick:t[0]||(t[0]=a=>e.handleValueChange("list"))},[f(e.List,{size:16,class:_(["transition-transform duration-300",e.isGrid?"scale-100":"scale-110"])},null,8,["class"]),t[2]||(t[2]=o("span",null,"List",-1))],10,ve),o("button",{"aria-pressed":e.isGrid,"aria-label":"Grid view",class:_(["relative z-10 inline-flex items-center gap-1.5 rounded-full px-3.5 py-1.5 text-sm font-medium transition-colors duration-300",e.isGrid?"text-ebony-clay-950":"text-chicago-600 hover:text-chicago-800"]),onClick:t[1]||(t[1]=a=>e.handleValueChange("grid"))},[f(e.LayoutGrid,{size:16,class:_(["transition-transform duration-300",e.isGrid?"scale-110":"scale-100"])},null,8,["class"]),t[3]||(t[3]=o("span",null,"Grid",-1))],10,be)])])}const Se=z(xe,[["render",Ce]]),Te=L({__name:"WorkflowGrid",props:{workflows:{}},setup(w,{expose:t}){t();const s=w;E.set(s.workflows);const e=A(k),i=S([]),d=S(""),a=S(!1),m=h(()=>d.value.trim().length>0),v=h(()=>s.workflows.slice().sort((l,g)=>new Date(g.updated).getTime()-new Date(l.updated).getTime())),M={keys:[{name:"name",weight:.5},{name:"annotation",weight:.4},{name:"tags",weight:.2},{name:"collections",weight:.1}],threshold:.4,ignoreLocation:!0,minMatchCharLength:2},F=h(()=>new q(v.value,M)),N=h(()=>{const l=g=>!i.value.length||i.value.every(V=>g.collections.includes(V));return d.value?F.value.search(d.value.trim()).map(R=>R.item).filter(l):v.value.filter(l)}),O=h(()=>m.value||i.value.length>0),P=h(()=>i.value.length>0?i.value[0]:null);let x;const Q=l=>{const g=l.target.value;d.value=g,C.set(g),clearTimeout(x),x=setTimeout(()=>{K(g)},300)};oe(()=>{H(),J(),i.value=j.get(),d.value=C.get(),a.value=!0;const l=localStorage.getItem("iwc-view-mode");(l==="list"||l==="grid")&&k.set(l)}),j.subscribe(l=>{a.value&&(i.value=l)}),C.subscribe(l=>{a.value&&(d.value=l)});const I={props:s,mode:e,localFilters:i,localSearchQuery:d,isHydrated:a,isSearching:m,sortedWorkflows:v,fuseOptions:M,fuse:F,filteredWorkflows:N,_hasActiveFilters:O,selectedCategory:P,get urlUpdateTimeout(){return x},set urlUpdateTimeout(l){x=l},handleSearchInput:Q,WorkflowCard:$,WorkflowListItem:_e,ViewToggle:Se};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),We={class:"w-full"},Ge={class:"mb-4"},ze=["value"],Le={class:"flex justify-between items-center mb-4"},Me={key:"search-category",class:"text-chicago-600 text-sm"},Fe={class:"font-semibold"},Ie={class:"font-bold text-ebony-clay-900"},Ve={key:"search",class:"text-chicago-600 text-sm"},Be={class:"font-semibold"},je={key:"category",class:"text-chicago-600 text-sm"},De={class:"font-semibold"},Ue={class:"font-bold text-ebony-clay-900"},Ae={key:"total",class:"text-chicago-500 text-sm"},Ne={class:"font-semibold"},Oe={id:"workflows",key:"list",class:"flex flex-col border border-ebony-clay-100 rounded-xl overflow-hidden shadow-sm"},Pe={id:"workflows",key:"grid",class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Qe={key:0,class:"text-center py-12 text-chicago-500"};function Re(w,t,s,e,i,d){return r(),n("div",We,[o("div",Ge,[o("input",{type:"text",value:e.localSearchQuery,placeholder:"Search workflows...",class:"w-full p-3 border border-chicago-200 bg-white rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-hokey-pokey-500 focus:border-transparent transition-shadow",onInput:e.handleSearchInput},null,40,ze)]),o("div",Le,[f(b,{name:"fade",mode:"out-in"},{default:y(()=>[e.isSearching&&e.selectedCategory?(r(),n("p",Me,[t[0]||(t[0]=u(" Found ",-1)),o("span",Fe,c(e.filteredWorkflows.length),1),t[1]||(t[1]=u(" ",-1)),o("span",Ie,c(e.selectedCategory),1),t[2]||(t[2]=u(" workflows matching your query ",-1))])):e.isSearching?(r(),n("p",Ve,[t[3]||(t[3]=u(" Found ",-1)),o("span",Be,c(e.filteredWorkflows.length),1),t[4]||(t[4]=u(" workflows ",-1))])):e.selectedCategory?(r(),n("p",je,[o("span",De,c(e.filteredWorkflows.length),1),t[5]||(t[5]=u(" ",-1)),o("span",Ue,c(e.selectedCategory),1),t[6]||(t[6]=u(" workflows ",-1))])):(r(),n("p",Ae,[o("span",Ne,c(e.sortedWorkflows.length),1),t[7]||(t[7]=u()),t[8]||(t[8]=o("span",null,"workflows",-1))]))]),_:1}),f(e.ViewToggle)]),f(b,{name:"view-fade",mode:"out-in"},{default:y(()=>[e.mode==="list"?(r(),n("div",Oe,[f(B,{name:"list-stagger",appear:""},{default:y(()=>[(r(!0),n(W,null,G(e.filteredWorkflows,(a,m)=>(r(),p(e.WorkflowListItem,{key:a.uuid,workflow:a,style:D({"--stagger-delay":`${Math.min(m*20,300)}ms`})},null,8,["workflow","style"]))),128))]),_:1})])):(r(),n("div",Pe,[f(B,{name:"grid-stagger",appear:""},{default:y(()=>[(r(!0),n(W,null,G(e.filteredWorkflows,(a,m)=>(r(),p(e.WorkflowCard,{key:a.uuid,workflow:a,style:D({"--stagger-delay":`${Math.min(m*30,400)}ms`}),compact:""},null,8,["workflow","style"]))),128))]),_:1})]))]),_:1}),f(b,{name:"fade"},{default:y(()=>[e.filteredWorkflows.length===0?(r(),n("div",Qe,[...t[9]||(t[9]=[o("p",{class:"text-xl"},"No workflows found matching your criteria.",-1)])])):T("",!0)]),_:1})])}const et=z(Te,[["render",Re],["__scopeId","data-v-a40550f0"]]);export{et as default};
