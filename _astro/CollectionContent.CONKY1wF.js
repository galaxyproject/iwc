import{F as W}from"./fuse.Dw8P0qyA.js";import{b as h,d as N}from"./workflowStore.DFTn1lFK.js";import{W as D}from"./WorkflowCard.DblpE2wn.js";import{M as L}from"./MarkdownRenderer.0kB0BTvW.js";import{_ as B}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{u as v}from"./index.pcb7STfD.js";import{d as S,c as i,a,t as y,f as x,F,r as M,b as C,e as f,h as R,i as j,o as t}from"./runtime-core.esm-bundler.BI33FiHc.js";import"./index.BJ4moKYX.js";const E=S({__name:"CollectionContent",props:{collectionName:{}},setup(m,{expose:n}){n();const r=m,e=v(N),d=v(h),c=C(null),l=C(!1);async function p(s){l.value=!0;try{const o=await fetch(`/category-descriptions/${s.toLowerCase().replace(/ /g,"-")}.md`);o.ok?c.value=await o.text():c.value=null}catch(o){c.value=null,console.error(`Error fetching description for ${s}:`,o)}finally{l.value=!1}}const w=f(()=>e.value.filter(s=>s.collections.some(o=>o.toLowerCase()===r.collectionName.toLowerCase()))),u=f(()=>w.value.slice().sort((s,o)=>new Date(o.updated).getTime()-new Date(s.updated).getTime())),_={keys:[{name:"definition.name",weight:.7},{name:"definition.annotation",weight:.3},{name:"definition.tags",weight:.1}],threshold:.3},k=f(()=>new W(u.value,_)),b=f(()=>d.value?k.value.search(d.value.trim()).map(o=>o.item):u.value);R(()=>{p(r.collectionName)}),j(()=>{h.set("")});const g={props:r,workflows:e,searchQuery:d,collectionDescription:c,isLoading:l,loadCollectionDescription:p,collectionWorkflows:w,sortedWorkflows:u,fuseOptions:_,fuse:k,filteredWorkflows:b,WorkflowCard:D,MarkdownRenderer:L};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),O={class:"w-full my-4 p-4 bg-white rounded-lg shadow-md"},Q={class:"text-xl font-semibold mb-4"},T={class:"prose !max-w-none"},A={key:0,class:"min-h-[50px] flex items-center justify-center"},P={key:2,class:"text-gray-500"},U={key:0,class:"text-center py-8"},V={class:"text-gray-500 text-lg"},q={key:1,id:"workflows",class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"};function z(m,n,r,e,d,c){return t(),i("div",null,[a("div",O,[a("h2",Q,"About "+y(r.collectionName),1),a("div",T,[e.isLoading?(t(),i("div",A,[...n[0]||(n[0]=[a("span",{class:"text-gray-500"},"Loading description...",-1)])])):e.collectionDescription?(t(),x(e.MarkdownRenderer,{key:1,markdownContent:e.collectionDescription},null,8,["markdownContent"])):(t(),i("div",P,"No description available for this collection."))])]),e.filteredWorkflows.length===0?(t(),i("div",U,[a("p",V,'No workflows found for "'+y(r.collectionName)+'"',1),n[1]||(n[1]=a("a",{href:"/",class:"text-blue-600 hover:text-blue-800 underline mt-2 inline-block"}," Browse all workflows ",-1))])):(t(),i("div",q,[(t(!0),i(F,null,M(e.filteredWorkflows,l=>(t(),x(e.WorkflowCard,{key:l.definition.uuid,workflow:l},null,8,["workflow"]))),128))]))])}const $=B(E,[["render",z]]);export{$ as default};
