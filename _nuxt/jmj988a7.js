import{_ as M,F as P}from"./DRLTf0Dv.js";import{aE as D,aF as V,aG as E}from"./g-hIVuqn.js";import{g as R,i as d,c as n,o as s,b as l,F as y,v as k,q as h,s as $,j as T,B as L,t as W,k as q,L as A,_ as B,l as K,m as w,M as Q,N as S,n as H,w as C,d as F,T as J,x as X,y as Y}from"./DjtYipKF.js";import{u as Z}from"./MlNsDIGd.js";const ee={class:"w-full max-w-6xl mx-auto"},te={class:"grid grid-cols-3 gap-4 mx-auto px-4"},se=R({__name:"PopularWorkflows",props:{workflowTrsIds:{}},setup(x){const m=x,p=D(),a=d(()=>{var i;return(i=m.workflowTrsIds)==null?void 0:i.map(r=>p.getWorkflowByTrsId(r))});return(i,r)=>{const c=M;return s(),n("div",ee,[r[0]||(r[0]=l("h2",{class:"text-xl my-6 text-white text-center font-semibold"}," Get started with one of our most popular workflows, or browse the full library below. ",-1)),l("div",te,[(s(!0),n(y,null,k($(a),o=>(s(),h(c,{key:o.definition.uuid,workflow:o,compact:""},null,8,["workflow"]))),128))])])}}}),oe={id:"filters",class:"w-full"},le={class:"flex flex-wrap justify-center items-center mb-2"},ne=["onClick"],ae={key:0,class:"divider text-gray-200 mx-1"},ie={class:"flex flex-wrap justify-center items-center"},re=["onClick"],ce={key:0,class:"divider text-gray-200 mx-1"},ue=R({__name:"Filters",setup(x){const m=D(),p=d(()=>m.allFilters),a=d(()=>{const c=Math.ceil(p.value.length/2);return p.value.slice(0,c)}),i=d(()=>{const c=Math.ceil(p.value.length/2);return p.value.slice(c)}),r=c=>{q().path==="/"?m.toggleFilter(c):A(`/collection/${m.collectionToSlug(c)}`)};return(c,o)=>(s(),n("div",oe,[l("div",le,[(s(!0),n(y,null,k(a.value,(u,_)=>(s(),n("div",{key:u,class:"filter-wrapper flex items-center"},[l("span",{class:L(["filter-item py-1 px-2",{active:$(m).selectedFilters.includes(u)}]),onClick:f=>r(u)},W(u),11,ne),_<a.value.length-1?(s(),n("span",ae,"|")):T("",!0)]))),128))]),l("div",ie,[(s(!0),n(y,null,k(i.value,(u,_)=>(s(),n("div",{key:u,class:"filter-wrapper flex items-center"},[l("span",{class:L(["filter-item py-1 px-2",{active:$(m).selectedFilters.includes(u)}]),onClick:f=>r(u)},W(u),11,re),_<i.value.length-1?(s(),n("span",ce,"|")):T("",!0)]))),128))])]))}}),de=B(ue,[["__scopeId","data-v-fc367292"]]),pe={class:"flex bg-ebony-clay p-4 items-center",style:{"flex-direction":"column"}},me={class:"max-w-6xl w-full mt-12 p-4"},fe={key:0,class:"w-full my-4 p-4 bg-white rounded-lg shadow-md"},we={class:"text-xl font-semibold mb-4"},_e={class:"prose !max-w-none"},ge={key:"loading",class:"min-h-[50px] flex items-center justify-center"},ve={key:"empty",class:"text-gray-500"},he=R({__name:"index",setup(x){const p=K().public.appUrl||window.location.origin;Z({title:"Intergalactic Workflow Commission",description:"Ready-to-use, open-source pipelines with sample data and training materials to make progress quickly and reliably",ogTitle:"Intergalactic Workflow Commission",ogDescription:"Discover and run vetted analysis pipelines on Galaxy",ogImage:`${p}/iwc_logo.png`,ogType:"website",twitterCard:"summary",twitterTitle:"Intergalactic Workflow Commission",twitterDescription:"Discover and run vetted analysis pipelines on Galaxy",twitterImage:`${p}/iwc_logo.png`});const a=w(null),i=w(null),r=w(!1),c=q();Q();const o=D();async function u(e){r.value=!0;try{const t=await fetch(`/category-descriptions/${e.toLowerCase().replace(/ /g,"-")}.md`);t.ok?a.value=await t.text():(a.value=null,console.error(`Failed to fetch description for ${e}`))}catch(t){a.value=null,console.error(`Error fetching description for ${e}:`,t)}finally{r.value=!1}}S(()=>c.query.filter,e=>{e&&typeof e=="string"?o.allFilters.includes(e)&&!o.selectedFilters.includes(e)&&(o.selectedFilters=[e]):o.selectedFilters=[]},{immediate:!0}),S(()=>o.selectedFilters,e=>{e.length===1?(i.value=e[0],a.value=null,u(e[0])):(i.value=null,a.value=null)},{immediate:!0}),H(()=>{o.setFilterFromUrl()});const _=["#workflow/github.com/iwc-workflows/rnaseq-pe/main","#workflow/github.com/iwc-workflows/chipseq-pe/main","#workflow/github.com/iwc-workflows/atacseq/main"],f=w("");w(null);const N=w(null),z=d(()=>o.allWorkflows);d(()=>o.allCategories),d(()=>o.allTags);const I=d(()=>z.value.sort((e,t)=>new Date(t.updated).getTime()-new Date(e.updated).getTime())),G={keys:[{name:"definition.name",weight:.7},{name:"definition.annotation",weight:.3},{name:"definition.tags",weight:.1}],threshold:.3},U=d(()=>new P(I.value,G)),j=d(()=>{const e=t=>!o.selectedFilters.length||o.selectedFilters.every(g=>t.collections.includes(g));return f.value?U.value.search(f.value.trim()).map(b=>b.item).filter(e):I.value.filter(e)});return(e,t)=>{const g=se,b=M,O=V;return s(),h(O,null,{hero:C(()=>[l("div",pe,[t[1]||(t[1]=l("h1",{class:"text-5xl my-8 text-white text-center font-bold"}," Discover and run vetted analysis pipelines on Galaxy ",-1)),t[2]||(t[2]=l("h2",{class:"text-xl text-white text-center font-semibold mb-16"}," Ready-to-use, open-source pipelines with sample data and training materials to make progress quickly and reliably. ",-1)),F(g,{"workflow-trs-ids":_}),l("div",me,[X(l("input",{"onUpdate:modelValue":t[0]||(t[0]=v=>f.value=v),type:"text",placeholder:"Search workflows",class:"w-full p-2 mb-2 border rounded-lg"},null,512),[[Y,f.value]])]),F(de)])]),content:C(()=>[i.value?(s(),n("div",fe,[l("h2",we,W(i.value),1),l("div",_e,[F(J,{name:"fade",mode:"out-in"},{default:C(()=>[r.value?(s(),n("div",ge,t[3]||(t[3]=[l("span",{class:"text-gray-500"},"Loading description...",-1)]))):a.value?(s(),h(E,{key:"content",markdownContent:a.value},null,8,["markdownContent"])):(s(),n("div",ve,"No description available for this category."))]),_:1})])])):T("",!0),l("div",{id:"workflows",ref_key:"gridDiv",ref:N,class:"grid grid-cols-3 gap-4"},[(s(!0),n(y,null,k(j.value,v=>(s(),h(b,{key:v.definition.uuid,workflow:v},null,8,["workflow"]))),128))],512)]),_:1})}}}),Ce=B(he,[["__scopeId","data-v-aa9da4b3"]]);export{Ce as default};
