import{g as N,k as B,l as E,m as g,i as a,n as I,p as R,q as _,w as i,o as n,b as s,c as r,t as c,s as m,d as h,T as F,f as M,e as b,F as S,v as U,x as V,y as G,_ as j}from"./DjtYipKF.js";import{F as q,_ as A}from"./DRLTf0Dv.js";import{aE as O,aF as Q,aG as z}from"./g-hIVuqn.js";import{u as H}from"./MlNsDIGd.js";const J={class:"flex bg-ebony-clay p-4 items-center",style:{"flex-direction":"column"}},K={class:"text-4xl my-8 text-white text-center font-bold"},P={class:"text-lg text-white text-center font-semibold mb-8"},X={class:"max-w-6xl w-full mt-4 p-4"},Y=["placeholder"],Z={class:"mt-4"},ee={class:"w-full my-4 p-4 bg-white rounded-lg shadow-md"},te={class:"text-xl font-semibold mb-4"},oe={class:"prose !max-w-none"},se={key:"loading",class:"min-h-[50px] flex items-center justify-center"},ne={key:"empty",class:"text-gray-500"},le={key:0,class:"text-center py-8"},ae={class:"text-gray-500 text-lg"},ie={key:1,id:"workflows",class:"grid grid-cols-3 gap-4"},re=N({__name:"[slug]",setup(ce){const t=B().params.slug.replace(/-/g," ").replace(/\b\w/g,o=>o.toUpperCase()),v=E().public.appUrl||window.location.origin;H({title:`${t} - Intergalactic Workflow Commission`,description:`Discover ${t} workflows - Ready-to-use, open-source pipelines with sample data and training materials`,ogTitle:`${t} - Intergalactic Workflow Commission`,ogDescription:`Discover ${t} workflows on Galaxy`,ogImage:`${v}/iwc_logo.png`,ogType:"website",twitterCard:"summary",twitterTitle:`${t} - Intergalactic Workflow Commission`,twitterDescription:`Discover ${t} workflows on Galaxy`,twitterImage:`${v}/iwc_logo.png`});const l=g(null),p=g(!1),u=g(""),C=O();async function $(o){p.value=!0;try{const e=await fetch(`/category-descriptions/${o.toLowerCase().replace(/ /g,"-")}.md`);e.ok?l.value=await e.text():l.value=null}catch(e){l.value=null,console.error(`Error fetching description for ${o}:`,e)}finally{p.value=!1}}const x=a(()=>C.allWorkflows),d=a(()=>x.value.filter(o=>o.collections.some(e=>e.toLowerCase()===t.toLowerCase()))),k=a(()=>d.value.sort((o,e)=>new Date(e.updated).getTime()-new Date(o.updated).getTime())),D={keys:[{name:"definition.name",weight:.7},{name:"definition.annotation",weight:.3},{name:"definition.tags",weight:.1}],threshold:.3},W=a(()=>new q(k.value,D)),y=a(()=>u.value?W.value.search(u.value.trim()).map(e=>e.item):k.value);if(I(()=>{$(t)}),d.value.length===0&&!x.value.some(e=>e.collections.some(f=>f.toLowerCase()===t.toLowerCase())))throw R({statusCode:404,statusMessage:`Collection "${t}" not found`});return(o,e)=>{const f=M,L=A,T=Q;return n(),_(T,null,{hero:i(()=>[s("div",J,[s("h1",K,c(m(t))+" Workflows",1),s("h2",P," Discover "+c(d.value.length)+" workflow"+c(d.value.length!==1?"s":"")+" in this collection ",1),s("div",X,[V(s("input",{"onUpdate:modelValue":e[0]||(e[0]=w=>u.value=w),type:"text",placeholder:`Search ${m(t)} workflows`,class:"w-full p-2 mb-2 border rounded-lg"},null,8,Y),[[G,u.value]])]),s("div",Z,[h(f,{to:"/",class:"text-white hover:text-gray-300 underline"},{default:i(()=>e[1]||(e[1]=[b(" ← Back to all workflows ")])),_:1})])])]),content:i(()=>[s("div",ee,[s("h2",te,"About "+c(m(t)),1),s("div",oe,[h(F,{name:"fade",mode:"out-in"},{default:i(()=>[p.value?(n(),r("div",se,e[2]||(e[2]=[s("span",{class:"text-gray-500"},"Loading description...",-1)]))):l.value?(n(),_(z,{key:"content",markdownContent:l.value},null,8,["markdownContent"])):(n(),r("div",ne," No description available for this collection. "))]),_:1})])]),y.value.length===0?(n(),r("div",le,[s("p",ae,'No workflows found for "'+c(m(t))+'"',1),h(f,{to:"/",class:"text-blue-600 hover:text-blue-800 underline mt-2 inline-block"},{default:i(()=>e[3]||(e[3]=[b(" Browse all workflows ")])),_:1})])):(n(),r("div",ie,[(n(!0),r(S,null,U(y.value,w=>(n(),_(L,{key:w.definition.uuid,workflow:w},null,8,["workflow"]))),128))]))]),_:1})}}}),_e=j(re,[["__scopeId","data-v-2e1f9a81"]]);export{_e as default};
