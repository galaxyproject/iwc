import{_ as q,F as j}from"./CpVueCWc.js";import{aF as W,aG as E}from"./BN_rRvl8.js";import{d as I,c as u,q as n,r as s,t as l,J as y,K as k,I as h,g as $,C as T,Q as L,v as D,a as G,$ as K,k as N,D as Q,E as A,F as w,b as J,a0 as M,G as H,n as X,x as C,w as F,T as Y,M as Z,N as ee}from"#entry";import{_ as te}from"./YpJpz0K8.js";const se={class:"w-full max-w-6xl mx-auto"},oe={class:"grid grid-cols-3 gap-4 mx-auto px-4"},le=I({__name:"PopularWorkflows",props:{workflowTrsIds:{}},setup(x){const p=x,d=W(),a=u(()=>p.workflowTrsIds?.map(c=>d.getWorkflowByTrsId(c)));return(c,f)=>{const i=q;return s(),n("div",se,[f[0]||(f[0]=l("h2",{class:"text-xl my-6 text-white text-center font-semibold"}," Get started with one of our most popular workflows, or browse the full library below. ",-1)),l("div",oe,[(s(!0),n(y,null,k($(a),o=>(s(),h(i,{key:o.definition.uuid,workflow:o,compact:""},null,8,["workflow"]))),128))])])}}}),ne={id:"filters",class:"w-full"},ae={class:"flex flex-wrap justify-center items-center mb-2"},ie=["onClick"],re={key:0,class:"divider text-gray-200 mx-1"},ce={class:"flex flex-wrap justify-center items-center"},ue=["onClick"],de={key:0,class:"divider text-gray-200 mx-1"},fe=I({__name:"Filters",setup(x){const p=W(),d=u(()=>p.allFilters),a=u(()=>{const i=Math.ceil(d.value.length/2);return d.value.slice(0,i)}),c=u(()=>{const i=Math.ceil(d.value.length/2);return d.value.slice(i)}),f=i=>{G().path==="/"?p.toggleFilter(i):K(`/collection/${p.collectionToSlug(i)}`)};return(i,o)=>(s(),n("div",ne,[l("div",ae,[(s(!0),n(y,null,k(a.value,(r,_)=>(s(),n("div",{key:r,class:"filter-wrapper flex items-center"},[l("span",{class:L(["filter-item py-1 px-2",{active:$(p).selectedFilters.includes(r)}]),onClick:m=>f(r)},D(r),11,ie),_<a.value.length-1?(s(),n("span",re,"|")):T("",!0)]))),128))]),l("div",ce,[(s(!0),n(y,null,k(c.value,(r,_)=>(s(),n("div",{key:r,class:"filter-wrapper flex items-center"},[l("span",{class:L(["filter-item py-1 px-2",{active:$(p).selectedFilters.includes(r)}]),onClick:m=>f(r)},D(r),11,ue),_<c.value.length-1?(s(),n("span",de,"|")):T("",!0)]))),128))])]))}}),pe=N(fe,[["__scopeId","data-v-fc367292"]]),me={class:"flex bg-ebony-clay p-4 items-center",style:{"flex-direction":"column"}},we={class:"max-w-6xl w-full mt-12 p-4"},_e={key:0,class:"w-full my-4 p-4 bg-white rounded-lg shadow-md"},ge={class:"text-xl font-semibold mb-4"},ve={class:"prose !max-w-none"},he={key:"loading",class:"min-h-[50px] flex items-center justify-center"},ye={key:"empty",class:"text-gray-500"},ke=I({__name:"index",setup(x){const d=Q().public.appUrl||window.location.origin;A({title:"Intergalactic Workflow Commission",description:"Ready-to-use, open-source pipelines with sample data and training materials to make progress quickly and reliably",ogTitle:"Intergalactic Workflow Commission",ogDescription:"Discover and run vetted analysis pipelines on Galaxy",ogImage:`${d}/iwc_logo.png`,ogType:"website",twitterCard:"summary",twitterTitle:"Intergalactic Workflow Commission",twitterDescription:"Discover and run vetted analysis pipelines on Galaxy",twitterImage:`${d}/iwc_logo.png`});const a=w(null),c=w(null),f=w(!1),i=G();J();const o=W();async function r(e){f.value=!0;try{const t=await fetch(`/category-descriptions/${e.toLowerCase().replace(/ /g,"-")}.md`);t.ok?a.value=await t.text():(a.value=null,console.error(`Failed to fetch description for ${e}`))}catch(t){a.value=null,console.error(`Error fetching description for ${e}:`,t)}finally{f.value=!1}}M(()=>i.query.filter,e=>{e&&typeof e=="string"?o.allFilters.includes(e)&&!o.selectedFilters.includes(e)&&(o.selectedFilters=[e]):o.selectedFilters=[]},{immediate:!0}),M(()=>o.selectedFilters,e=>{e.length===1?(c.value=e[0],a.value=null,r(e[0])):(c.value=null,a.value=null)},{immediate:!0}),H(()=>{o.setFilterFromUrl(),i.query.filter&&X(()=>{O()})});const _=["#workflow/github.com/iwc-workflows/rnaseq-pe/main","#workflow/github.com/iwc-workflows/chipseq-pe/main","#workflow/github.com/iwc-workflows/atacseq/main"],m=w("");w(null);const R=w(null),z=u(()=>o.allWorkflows);u(()=>o.allCategories),u(()=>o.allTags);const S=u(()=>z.value.sort((e,t)=>new Date(t.updated).getTime()-new Date(e.updated).getTime())),B={keys:[{name:"definition.name",weight:.7},{name:"definition.annotation",weight:.3},{name:"definition.tags",weight:.1}],threshold:.3},U=u(()=>new j(S.value,B)),V=u(()=>{const e=t=>!o.selectedFilters.length||o.selectedFilters.every(g=>t.collections.includes(g));return m.value?U.value.search(m.value.trim()).map(b=>b.item).filter(e):S.value.filter(e)});function O(){R.value?.scrollIntoView({behavior:"smooth"})}return(e,t)=>{const g=le,b=q,P=te;return s(),h(P,null,{hero:C(()=>[l("div",me,[t[1]||(t[1]=l("h1",{class:"text-5xl my-8 text-white text-center font-bold"}," Discover and run vetted analysis pipelines on Galaxy ",-1)),t[2]||(t[2]=l("h2",{class:"text-xl text-white text-center font-semibold mb-16"}," Ready-to-use, open-source pipelines with sample data and training materials to make progress quickly and reliably. ",-1)),F(g,{"workflow-trs-ids":_}),l("div",we,[Z(l("input",{"onUpdate:modelValue":t[0]||(t[0]=v=>m.value=v),type:"text",placeholder:"Search workflows",class:"w-full p-2 mb-2 border rounded-lg"},null,512),[[ee,m.value]])]),F(pe)])]),content:C(()=>[c.value?(s(),n("div",_e,[l("h2",ge,D(c.value),1),l("div",ve,[F(Y,{name:"fade",mode:"out-in"},{default:C(()=>[f.value?(s(),n("div",he,[...t[3]||(t[3]=[l("span",{class:"text-gray-500"},"Loading description...",-1)])])):a.value?(s(),h(E,{key:"content",markdownContent:a.value},null,8,["markdownContent"])):(s(),n("div",ye,"No description available for this category."))]),_:1})])])):T("",!0),l("div",{id:"workflows",ref_key:"gridDiv",ref:R,class:"grid grid-cols-3 gap-4"},[(s(!0),n(y,null,k(V.value,v=>(s(),h(b,{key:v.definition.uuid,workflow:v},null,8,["workflow"]))),128))],512)]),_:1})}}}),$e=N(ke,[["__scopeId","data-v-da504e9a"]]);export{$e as default};
