{
    "name": "consensus-peaks-atac-cutandrun",
    "subclass": "Galaxy",
    "publish": true,
    "primaryDescriptorPath": "/consensus-peaks-atac-cutandrun.ga",
    "testParameterFiles": [
        "/consensus-peaks-atac-cutandrun-tests.yml"
    ],
    "authors": [
        {
            "name": "Lucille Delisle",
            "orcid": "0000-0002-1964-4960"
        }
    ],
    "definition": {
        "a_galaxy_workflow": "true",
        "annotation": "Identifies high-confidence consensus peaks from ATAC-seq or CUT&RUN replicate experiments. The workflow calls peaks on individual replicates and identifies their intersection. To control for sequencing depth differences, it subsamples all replicates to the smallest library size, performs peak calling on the combined normalized data, and retains only peaks whose summits overlap with intersections from a user-defined minimum number of replicates.",
        "comments": [
            {
                "child_steps": [
                    5,
                    8,
                    11,
                    12,
                    15,
                    16,
                    17,
                    18,
                    19,
                    20
                ],
                "color": "blue",
                "data": {
                    "title": "Downsample input BAM to get the same number of reads"
                },
                "id": 2,
                "position": [
                    228,
                    878.7
                ],
                "size": [
                    1917.8,
                    397.4
                ],
                "type": "frame"
            },
            {
                "child_steps": [
                    6,
                    9,
                    13
                ],
                "color": "blue",
                "data": {
                    "title": "Get a BED with intersection of at least x rep"
                },
                "id": 0,
                "position": [
                    776.6,
                    0
                ],
                "size": [
                    508.7,
                    363
                ],
                "type": "frame"
            },
            {
                "child_steps": [
                    10,
                    14
                ],
                "color": "green",
                "data": {
                    "title": "Get the average coverage"
                },
                "id": 1,
                "position": [
                    647.1,
                    523.9
                ],
                "size": [
                    504.5,
                    324
                ],
                "type": "frame"
            }
        ],
        "creator": [
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-1964-4960",
                "name": "Lucille Delisle"
            }
        ],
        "format-version": "0.1",
        "license": "MIT",
        "release": "1.3",
        "name": "Consensus Peak Calling for ATAC-seq and CUT&RUN Replicates",
        "steps": {
            "0": {
                "annotation": "A collection with n replicates. BAM should not have duplicates.",
                "content_id": null,
                "errors": null,
                "id": 0,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "A collection with n replicates. BAM should not have duplicates.",
                        "name": "n rmDup BAM"
                    }
                ],
                "label": "n rmDup BAM",
                "name": "Input dataset collection",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 194.74998779296874
                },
                "tool_id": null,
                "tool_state": "{\"optional\": false, \"format\": [\"bam\"], \"tag\": \"\", \"collection_type\": \"list\"}",
                "tool_version": null,
                "type": "data_collection_input",
                "uuid": "fc7f3d9f-c1a6-4e00-a65a-ff31ab9e6bca",
                "when": null,
                "workflow_outputs": []
            },
            "1": {
                "annotation": "Minimum number of replicates into which the summit should be present.",
                "content_id": null,
                "errors": null,
                "id": 1,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Minimum number of replicates into which the summit should be present.",
                        "name": "Minimum number of overlap"
                    }
                ],
                "label": "Minimum number of overlap",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 25,
                    "top": 273.2
                },
                "tool_id": null,
                "tool_state": "{\"parameter_type\": \"integer\", \"optional\": false}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "025fcb5d-6842-4ed0-9bac-b393942b9d29",
                "when": null,
                "workflow_outputs": []
            },
            "2": {
                "annotation": "Used by MACS2: H. sapiens: 2700000000, M. musculus: 1870000000, D. melanogaster: 120000000, C. elegans: 90000000",
                "content_id": null,
                "errors": null,
                "id": 2,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Used by MACS2: H. sapiens: 2700000000, M. musculus: 1870000000, D. melanogaster: 120000000, C. elegans: 90000000",
                        "name": "effective_genome_size"
                    }
                ],
                "label": "effective_genome_size",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 39,
                    "top": 367.74791480468576
                },
                "tool_id": null,
                "tool_state": "{\"parameter_type\": \"integer\", \"optional\": false}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "dac93661-a2aa-4163-a3ec-f64c4075c881",
                "when": null,
                "workflow_outputs": []
            },
            "3": {
                "annotation": "Bin size for average of normalized coverage",
                "content_id": null,
                "errors": null,
                "id": 3,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Bin size for average of normalized coverage",
                        "name": "bin_size"
                    }
                ],
                "label": "bin_size",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 57,
                    "top": 464.78123999999826
                },
                "tool_id": null,
                "tool_state": "{\"parameter_type\": \"integer\", \"optional\": false}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "ef17ea2d-7f73-44a8-aecf-15279c559fd1",
                "when": null,
                "workflow_outputs": []
            },
            "4": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.31.1+galaxy0",
                "errors": null,
                "id": 4,
                "input_connections": {
                    "input": {
                        "id": 0,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "convert BAM to BED",
                "name": "bedtools BAM to BED",
                "outputs": [
                    {
                        "name": "output",
                        "type": "bed"
                    }
                ],
                "position": {
                    "left": 217.78016821945388,
                    "top": 74.30843071525936
                },
                "post_job_actions": {
                    "HideDatasetActionoutput": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.31.1+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "64e2edfe7a2c",
                    "name": "bedtools",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"ed_score\": false, \"input\": {\"__class__\": \"ConnectedValue\"}, \"option\": \"\", \"split\": false, \"tag\": null, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.31.1+galaxy0",
                "type": "tool",
                "uuid": "b62c338c-eb40-4ea5-b5e6-819f39790c07",
                "when": null,
                "workflow_outputs": []
            },
            "5": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.20+galaxy3",
                "errors": null,
                "id": 5,
                "input_connections": {
                    "input": {
                        "id": 0,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "count number of reads",
                "name": "Samtools view",
                "outputs": [
                    {
                        "name": "outputcnt",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 248.01056678577842,
                    "top": 1011.4507862713202
                },
                "post_job_actions": {
                    "HideDatasetActionoutputcnt": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "outputcnt"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.20+galaxy3",
                "tool_shed_repository": {
                    "changeset_revision": "32dc5f781059",
                    "name": "samtools_view",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"addref_cond\": {\"addref_select\": \"no\", \"__current_case__\": 0}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"mode\": {\"outtype\": \"all_reads\", \"__current_case__\": 0, \"output_options\": {\"reads_report_type\": \"count\", \"__current_case__\": 1}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.20+galaxy3",
                "type": "tool",
                "uuid": "9cff58b2-123e-42df-b562-3b2a4a553934",
                "when": null,
                "workflow_outputs": []
            },
            "6": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/compose_text_param/compose_text_param/0.1.1",
                "errors": null,
                "id": 6,
                "input_connections": {
                    "components_1|param_type|component_value": {
                        "id": 1,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "generate filter rule",
                "name": "Compose text parameter value",
                "outputs": [
                    {
                        "name": "out1",
                        "type": "expression.json"
                    }
                ],
                "position": {
                    "left": 796.6100753157618,
                    "top": 188.622596980592
                },
                "post_job_actions": {
                    "HideDatasetActionout1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out1"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/compose_text_param/compose_text_param/0.1.1",
                "tool_shed_repository": {
                    "changeset_revision": "e188c9826e0f",
                    "name": "compose_text_param",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"components\": [{\"__index__\": 0, \"param_type\": {\"select_param_type\": \"text\", \"__current_case__\": 0, \"component_value\": \"c4 >= \"}}, {\"__index__\": 1, \"param_type\": {\"select_param_type\": \"integer\", \"__current_case__\": 1, \"component_value\": {\"__class__\": \"ConnectedValue\"}}}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "0.1.1",
                "type": "tool",
                "uuid": "e6855df9-0e94-4310-835c-15514bd37974",
                "when": null,
                "workflow_outputs": []
            },
            "7": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.9.1+galaxy0",
                "errors": null,
                "id": 7,
                "input_connections": {
                    "effective_genome_size_options|gsize": {
                        "id": 2,
                        "output_name": "output"
                    },
                    "treatment|input_treatment_file": {
                        "id": 4,
                        "output_name": "output"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool MACS2 callpeak",
                        "name": "effective_genome_size_options"
                    },
                    {
                        "description": "runtime parameter for tool MACS2 callpeak",
                        "name": "treatment"
                    }
                ],
                "label": "call peaks individually",
                "name": "MACS2 callpeak",
                "outputs": [
                    {
                        "name": "output_tabular",
                        "type": "tabular"
                    },
                    {
                        "name": "output_narrowpeaks",
                        "type": "bed"
                    },
                    {
                        "name": "output_treat_pileup",
                        "type": "bedgraph"
                    },
                    {
                        "name": "output_control_lambda",
                        "type": "bedgraph"
                    }
                ],
                "position": {
                    "left": 454.449951171875,
                    "top": 179.014577402342
                },
                "post_job_actions": {
                    "HideDatasetActionoutput_control_lambda": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_control_lambda"
                    },
                    "HideDatasetActionoutput_tabular": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_tabular"
                    },
                    "HideDatasetActionoutput_treat_pileup": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_treat_pileup"
                    },
                    "RenameDatasetActionoutput_narrowpeaks": {
                        "action_arguments": {
                            "newname": "individual macs2 narrowPeaks"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_narrowpeaks"
                    },
                    "RenameDatasetActionoutput_tabular": {
                        "action_arguments": {
                            "newname": "individual macs2 tabular"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_tabular"
                    },
                    "RenameDatasetActionoutput_treat_pileup": {
                        "action_arguments": {
                            "newname": "individual macs2 coverage normalized"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_treat_pileup"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.9.1+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "86e2413cf3f8",
                    "name": "macs2",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"advanced_options\": {\"to_large\": false, \"nolambda\": false, \"spmr\": true, \"ratio\": null, \"slocal\": null, \"llocal\": null, \"broad_options\": {\"broad_options_selector\": \"nobroad\", \"__current_case__\": 1, \"call_summits\": true}, \"keep_dup_options\": {\"keep_dup_options_selector\": \"all\", \"__current_case__\": 2}, \"d_min\": \"20\", \"buffer_size\": \"100000\"}, \"control\": {\"c_select\": \"No\", \"__current_case__\": 1}, \"cutoff_options\": {\"cutoff_options_selector\": \"qvalue\", \"__current_case__\": 1, \"qvalue\": \"0.05\"}, \"effective_genome_size_options\": {\"effective_genome_size_options_selector\": \"user_defined\", \"__current_case__\": 4, \"gsize\": {\"__class__\": \"ConnectedValue\"}}, \"format\": \"BED\", \"nomodel_type\": {\"nomodel_type_selector\": \"nomodel\", \"__current_case__\": 1, \"extsize\": \"200\", \"shift\": \"-100\"}, \"outputs\": [\"bdg\", \"peaks_tabular\"], \"treatment\": {\"t_multi_select\": \"No\", \"__current_case__\": 0, \"input_treatment_file\": {\"__class__\": \"ConnectedValue\"}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.2.9.1+galaxy0",
                "type": "tool",
                "uuid": "8f2a3aa4-704e-4d90-a672-94b97996dd56",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "individual_macs2_narrowPeaks",
                        "output_name": "output_narrowpeaks",
                        "uuid": "4552df5d-4397-4118-af11-f97eb8c748a5"
                    }
                ]
            },
            "8": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/5.1.0",
                "errors": null,
                "id": 8,
                "input_connections": {
                    "input_list": {
                        "id": 5,
                        "output_name": "outputcnt"
                    }
                },
                "inputs": [],
                "label": "put all nb of reads into single dataset",
                "name": "Collapse Collection",
                "outputs": [
                    {
                        "name": "output",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 487.0999755859375,
                    "top": 1006.4666625976563
                },
                "post_job_actions": {
                    "HideDatasetActionoutput": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/nml/collapse_collections/collapse_dataset/5.1.0",
                "tool_shed_repository": {
                    "changeset_revision": "90981f86000f",
                    "name": "collapse_collections",
                    "owner": "nml",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"filename\": {\"add_name\": false, \"__current_case__\": 1}, \"input_list\": {\"__class__\": \"ConnectedValue\"}, \"one_header\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "5.1.0",
                "type": "tool",
                "uuid": "bd8b6b03-19ef-4921-96c3-abe5e6992941",
                "when": null,
                "workflow_outputs": []
            },
            "9": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.31.1",
                "errors": null,
                "id": 9,
                "input_connections": {
                    "tag|inputs": {
                        "id": 7,
                        "output_name": "output_narrowpeaks"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool bedtools Multiple Intersect",
                        "name": "tag"
                    }
                ],
                "label": "compute multi intersect",
                "name": "bedtools Multiple Intersect",
                "outputs": [
                    {
                        "name": "output",
                        "type": "bed"
                    }
                ],
                "position": {
                    "left": 797.3086613144798,
                    "top": 40.02067466199719
                },
                "post_job_actions": {
                    "HideDatasetActionoutput": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.31.1",
                "tool_shed_repository": {
                    "changeset_revision": "64e2edfe7a2c",
                    "name": "bedtools",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"cluster\": false, \"empty\": {\"empty_selector\": \"\", \"__current_case__\": 1}, \"filler\": \"0\", \"header\": false, \"tag\": {\"tag_select\": \"tag\", \"__current_case__\": 0, \"inputs\": {\"__class__\": \"ConnectedValue\"}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.31.1",
                "type": "tool",
                "uuid": "9edd1aab-eb4c-4fd4-b9f6-a6dbcae46dd2",
                "when": null,
                "workflow_outputs": []
            },
            "10": {
                "annotation": "",
                "content_id": "wig_to_bigWig",
                "errors": null,
                "id": 10,
                "input_connections": {
                    "input1": {
                        "id": 7,
                        "output_name": "output_treat_pileup"
                    }
                },
                "inputs": [],
                "label": "individual normalized bigwig",
                "name": "Wig/BedGraph-to-bigWig",
                "outputs": [
                    {
                        "name": "out_file1",
                        "type": "bigwig"
                    }
                ],
                "position": {
                    "left": 680.6833851669262,
                    "top": 635.8069731504326
                },
                "post_job_actions": {
                    "HideDatasetActionout_file1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out_file1"
                    }
                },
                "tool_id": "wig_to_bigWig",
                "tool_state": "{\"input1\": {\"__class__\": \"ConnectedValue\"}, \"settings\": {\"settingsType\": \"preset\", \"__current_case__\": 0}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.1.1",
                "type": "tool",
                "uuid": "d0d6f92d-3d7e-44c3-b2f6-c10e429d2369",
                "when": null,
                "workflow_outputs": []
            },
            "11": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/table_compute/table_compute/1.2.4+galaxy0",
                "errors": null,
                "id": 11,
                "input_connections": {
                    "singtabop|input": {
                        "id": 8,
                        "output_name": "output"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool Table Compute",
                        "name": "singtabop"
                    }
                ],
                "label": "get min value",
                "name": "Table Compute",
                "outputs": [
                    {
                        "name": "table",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 719.5,
                    "top": 974.7833435058594
                },
                "post_job_actions": {
                    "HideDatasetActiontable": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "table"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/table_compute/table_compute/1.2.4+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "3bf5661c0280",
                    "name": "table_compute",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"out_opts\": null, \"precision\": \"6\", \"singtabop\": {\"use_type\": \"single\", \"__current_case__\": 0, \"input\": {\"__class__\": \"ConnectedValue\"}, \"col_row_names\": null, \"adv\": {\"header\": null, \"nrows\": null, \"skipfooter\": null, \"skip_blank_lines\": true}, \"user\": {\"mode\": \"matrixapply\", \"__current_case__\": 3, \"matrixapply_func\": {\"vector_op\": \"min\", \"__current_case__\": 1}, \"dimension\": \"0\"}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.2.4+galaxy0",
                "type": "tool",
                "uuid": "0d63ffd8-0646-4dbf-9ede-14bffcd5de2d",
                "when": null,
                "workflow_outputs": []
            },
            "12": {
                "annotation": "",
                "content_id": "wc_gnu",
                "errors": null,
                "id": 12,
                "input_connections": {
                    "input1": {
                        "id": 8,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "get nb of replicates",
                "name": "Line/Word/Character count",
                "outputs": [
                    {
                        "name": "out_file1",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 723,
                    "top": 1081.7
                },
                "post_job_actions": {
                    "HideDatasetActionout_file1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out_file1"
                    }
                },
                "tool_id": "wc_gnu",
                "tool_state": "{\"include_header\": false, \"input1\": {\"__class__\": \"ConnectedValue\"}, \"options\": [\"lines\"], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.0.0",
                "type": "tool",
                "uuid": "1e4420d0-edfb-4411-b7e0-602b510ff898",
                "when": null,
                "workflow_outputs": []
            },
            "13": {
                "annotation": "",
                "content_id": "Filter1",
                "errors": null,
                "id": 13,
                "input_connections": {
                    "cond": {
                        "id": 6,
                        "output_name": "out1"
                    },
                    "input": {
                        "id": 9,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "filter multi intersect",
                "name": "Filter",
                "outputs": [
                    {
                        "name": "out_file1",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 1065.3086613144797,
                    "top": 48.02067466199719
                },
                "post_job_actions": {
                    "HideDatasetActionout_file1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out_file1"
                    }
                },
                "tool_id": "Filter1",
                "tool_state": "{\"cond\": {\"__class__\": \"ConnectedValue\"}, \"header_lines\": \"0\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.1.1",
                "type": "tool",
                "uuid": "4acd5289-87cc-4cfb-9863-35248989ab27",
                "when": null,
                "workflow_outputs": []
            },
            "14": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.4+galaxy0",
                "errors": null,
                "id": 14,
                "input_connections": {
                    "advancedOpt|binSize": {
                        "id": 3,
                        "output_name": "output"
                    },
                    "bigwigs": {
                        "id": 10,
                        "output_name": "out_file1"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool bigwigAverage",
                        "name": "advancedOpt"
                    },
                    {
                        "description": "runtime parameter for tool bigwigAverage",
                        "name": "advancedOpt"
                    }
                ],
                "label": "average coverage from replicates",
                "name": "bigwigAverage",
                "outputs": [
                    {
                        "name": "outFileName",
                        "type": "bigwig"
                    }
                ],
                "position": {
                    "left": 938.7350974129533,
                    "top": 555.8480470664147
                },
                "post_job_actions": {
                    "RenameDatasetActionoutFileName": {
                        "action_arguments": {
                            "newname": "Average Normalized Coverage of all replicates"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "outFileName"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.4+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "4a53856a5b85",
                    "name": "deeptools_bigwig_average",
                    "owner": "bgruening",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"advancedOpt\": {\"showAdvancedOpt\": \"yes\", \"__current_case__\": 1, \"binSize\": {\"__class__\": \"ConnectedValue\"}, \"skipNAs\": false, \"scaleFactors\": \"1\", \"blackListFileName\": {\"__class__\": \"RuntimeValue\"}}, \"bigwigs\": {\"__class__\": \"ConnectedValue\"}, \"outFileFormat\": \"bigwig\", \"region\": \"\", \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "3.5.4+galaxy0",
                "type": "tool",
                "uuid": "36059130-5f2a-4fe0-8b36-58073595fdd5",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "average_bigwig",
                        "output_name": "outFileName",
                        "uuid": "35dfdb8a-121d-41d1-9ad1-1e0d95a8ab8c"
                    }
                ]
            },
            "15": {
                "annotation": "",
                "content_id": "param_value_from_file",
                "errors": null,
                "id": 15,
                "input_connections": {
                    "input1": {
                        "id": 11,
                        "output_name": "table"
                    }
                },
                "inputs": [],
                "label": "convert min value to text",
                "name": "Parse parameter value",
                "outputs": [
                    {
                        "name": "text_param",
                        "type": "expression.json"
                    }
                ],
                "position": {
                    "left": 972,
                    "top": 918.7
                },
                "post_job_actions": {
                    "HideDatasetActioninteger_param": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "integer_param"
                    },
                    "HideDatasetActiontext_param": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "text_param"
                    }
                },
                "tool_id": "param_value_from_file",
                "tool_state": "{\"input1\": {\"__class__\": \"ConnectedValue\"}, \"param_type\": \"text\", \"remove_newlines\": true, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "0.1.0",
                "type": "tool",
                "uuid": "cdbee56b-9fff-4205-9cb6-741be770985d",
                "when": null,
                "workflow_outputs": []
            },
            "16": {
                "annotation": "get nb of rep as param",
                "content_id": "param_value_from_file",
                "errors": null,
                "id": 16,
                "input_connections": {
                    "input1": {
                        "id": 12,
                        "output_name": "out_file1"
                    }
                },
                "inputs": [],
                "label": null,
                "name": "Parse parameter value",
                "outputs": [
                    {
                        "name": "integer_param",
                        "type": "expression.json"
                    }
                ],
                "position": {
                    "left": 980.362829492841,
                    "top": 1090.2503372993485
                },
                "post_job_actions": {
                    "HideDatasetActioninteger_param": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "integer_param"
                    }
                },
                "tool_id": "param_value_from_file",
                "tool_state": "{\"input1\": {\"__class__\": \"ConnectedValue\"}, \"param_type\": \"integer\", \"remove_newlines\": true, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "0.1.0",
                "type": "tool",
                "uuid": "2ea49dca-270b-454a-9d86-6947799ab996",
                "when": null,
                "workflow_outputs": []
            },
            "17": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_text_file_with_recurring_lines/9.3+galaxy1",
                "errors": null,
                "id": 17,
                "input_connections": {
                    "token_set_0|line": {
                        "id": 15,
                        "output_name": "text_param"
                    },
                    "token_set_0|repeat_select|times": {
                        "id": 16,
                        "output_name": "integer_param"
                    }
                },
                "inputs": [],
                "label": "create a dataset with the min value as many times as there are replicates",
                "name": "Create text file",
                "outputs": [
                    {
                        "name": "outfile",
                        "type": "txt"
                    }
                ],
                "position": {
                    "left": 1210.95940032202,
                    "top": 978.1979565079766
                },
                "post_job_actions": {
                    "HideDatasetActionoutfile": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "outfile"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_text_file_with_recurring_lines/9.3+galaxy1",
                "tool_shed_repository": {
                    "changeset_revision": "86755160afbf",
                    "name": "text_processing",
                    "owner": "bgruening",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"token_set\": [{\"__index__\": 0, \"line\": {\"__class__\": \"ConnectedValue\"}, \"repeat_select\": {\"repeat_select_opts\": \"user\", \"__current_case__\": 0, \"times\": {\"__class__\": \"ConnectedValue\"}}}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "9.3+galaxy1",
                "type": "tool",
                "uuid": "29ef7038-e10a-47cd-835f-945dccaf9c1c",
                "when": null,
                "workflow_outputs": []
            },
            "18": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2",
                "errors": null,
                "id": 18,
                "input_connections": {
                    "split_parms|input": {
                        "id": 17,
                        "output_name": "outfile"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool Split file",
                        "name": "split_parms"
                    }
                ],
                "label": "split min value",
                "name": "Split file",
                "outputs": [
                    {
                        "name": "list_output_txt",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 1454.946894305971,
                    "top": 1074.616955921246
                },
                "post_job_actions": {
                    "HideDatasetActionlist_output_txt": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "list_output_txt"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2",
                "tool_shed_repository": {
                    "changeset_revision": "2dae863c8f42",
                    "name": "split_file_to_collection",
                    "owner": "bgruening",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"split_parms\": {\"select_ftype\": \"txt\", \"__current_case__\": 5, \"input\": {\"__class__\": \"ConnectedValue\"}, \"select_mode\": {\"mode\": \"chunk\", \"__current_case__\": 0, \"chunksize\": \"1\"}, \"newfilenames\": \"split_file\", \"select_allocate\": {\"allocate\": \"byrow\", \"__current_case__\": 2}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "0.5.2",
                "type": "tool",
                "uuid": "7db836a5-793a-403e-8db1-b97f619f4c69",
                "when": null,
                "workflow_outputs": []
            },
            "19": {
                "annotation": "",
                "content_id": "param_value_from_file",
                "errors": null,
                "id": 19,
                "input_connections": {
                    "input1": {
                        "id": 18,
                        "output_name": "list_output_txt"
                    }
                },
                "inputs": [],
                "label": "convert min nb of reads to parameter",
                "name": "Parse parameter value",
                "outputs": [
                    {
                        "name": "integer_param",
                        "type": "expression.json"
                    }
                ],
                "position": {
                    "left": 1679.9454808872808,
                    "top": 1066.2435805949858
                },
                "post_job_actions": {
                    "HideDatasetActioninteger_param": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "integer_param"
                    }
                },
                "tool_id": "param_value_from_file",
                "tool_state": "{\"input1\": {\"__class__\": \"ConnectedValue\"}, \"param_type\": \"integer\", \"remove_newlines\": true, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "0.1.0",
                "type": "tool",
                "uuid": "71b1c454-41db-4a8b-8595-8d3fa86a86a0",
                "when": null,
                "workflow_outputs": []
            },
            "20": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.20+galaxy3",
                "errors": null,
                "id": 20,
                "input_connections": {
                    "input": {
                        "id": 0,
                        "output_name": "output"
                    },
                    "mode|subsample_config|subsampling_mode|target": {
                        "id": 19,
                        "output_name": "integer_param"
                    }
                },
                "inputs": [],
                "label": "select random reads",
                "name": "Samtools view",
                "outputs": [
                    {
                        "name": "outputsam",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 1925.7976872167908,
                    "top": 1061.3309439057557
                },
                "post_job_actions": {
                    "HideDatasetActionoutputsam": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "outputsam"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.20+galaxy3",
                "tool_shed_repository": {
                    "changeset_revision": "32dc5f781059",
                    "name": "samtools_view",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"addref_cond\": {\"addref_select\": \"no\", \"__current_case__\": 0}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"mode\": {\"outtype\": \"selected_reads\", \"__current_case__\": 1, \"filter_config\": {\"cond_region\": {\"select_region\": \"no\", \"__current_case__\": 0}, \"cond_rg\": {\"select_rg\": \"no\", \"__current_case__\": 0}, \"cond_expr\": {\"select_expr\": \"no\", \"__current_case__\": 0}, \"quality\": null, \"library\": null, \"cigarcons\": null, \"inclusive_filter\": null, \"exclusive_filter\": null, \"exclusive_filter_all\": null, \"tag\": null, \"qname_file\": {\"__class__\": \"RuntimeValue\"}}, \"subsample_config\": {\"subsampling_mode\": {\"select_subsample\": \"target\", \"__current_case__\": 1, \"target\": {\"__class__\": \"ConnectedValue\"}, \"seed\": \"1\"}}, \"output_options\": {\"reads_report_type\": \"retained\", \"__current_case__\": 0, \"complementary_output\": false, \"adv_output\": {\"readtags\": [], \"collapsecigar\": false}, \"output_format\": {\"oformat\": \"bam\", \"__current_case__\": 2}}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.20+galaxy3",
                "type": "tool",
                "uuid": "36713e3f-6110-41f7-8df1-9a9966400fab",
                "when": null,
                "workflow_outputs": []
            },
            "21": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.31.1+galaxy0",
                "errors": null,
                "id": 21,
                "input_connections": {
                    "input": {
                        "id": 20,
                        "output_name": "outputsam"
                    }
                },
                "inputs": [],
                "label": "convert subsampled bam to bed",
                "name": "bedtools BAM to BED",
                "outputs": [
                    {
                        "name": "output",
                        "type": "bed"
                    }
                ],
                "position": {
                    "left": 1300.0284368938724,
                    "top": 585.202166486144
                },
                "post_job_actions": {
                    "HideDatasetActionoutput": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.31.1+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "64e2edfe7a2c",
                    "name": "bedtools",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"ed_score\": false, \"input\": {\"__class__\": \"ConnectedValue\"}, \"option\": \"\", \"split\": false, \"tag\": null, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.31.1+galaxy0",
                "type": "tool",
                "uuid": "7521eb4d-6cb9-463b-8c03-91ac64396ac3",
                "when": null,
                "workflow_outputs": []
            },
            "22": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.9.1+galaxy0",
                "errors": null,
                "id": 22,
                "input_connections": {
                    "effective_genome_size_options|gsize": {
                        "id": 2,
                        "output_name": "output"
                    },
                    "treatment|input_treatment_file": {
                        "id": 21,
                        "output_name": "output"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool MACS2 callpeak",
                        "name": "effective_genome_size_options"
                    },
                    {
                        "description": "runtime parameter for tool MACS2 callpeak",
                        "name": "treatment"
                    }
                ],
                "label": "call peaks on merge",
                "name": "MACS2 callpeak",
                "outputs": [
                    {
                        "name": "output_tabular",
                        "type": "tabular"
                    },
                    {
                        "name": "output_narrowpeaks",
                        "type": "bed"
                    }
                ],
                "position": {
                    "left": 1546.199951171875,
                    "top": 605.2979025976546
                },
                "post_job_actions": {
                    "HideDatasetActionoutput_tabular": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_tabular"
                    },
                    "RenameDatasetActionoutput_narrowpeaks": {
                        "action_arguments": {
                            "newname": "merged macs2 narrowPeaks"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_narrowpeaks"
                    },
                    "RenameDatasetActionoutput_tabular": {
                        "action_arguments": {
                            "newname": "merged macs2 tabular"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_tabular"
                    },
                    "RenameDatasetActionoutput_treat_pileup": {
                        "action_arguments": {
                            "newname": "merged macs2 coverage normalized"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_treat_pileup"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.9.1+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "86e2413cf3f8",
                    "name": "macs2",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"advanced_options\": {\"to_large\": false, \"nolambda\": false, \"spmr\": true, \"ratio\": null, \"slocal\": null, \"llocal\": null, \"broad_options\": {\"broad_options_selector\": \"nobroad\", \"__current_case__\": 1, \"call_summits\": true}, \"keep_dup_options\": {\"keep_dup_options_selector\": \"all\", \"__current_case__\": 2}, \"d_min\": \"20\", \"buffer_size\": \"100000\"}, \"control\": {\"c_select\": \"No\", \"__current_case__\": 1}, \"cutoff_options\": {\"cutoff_options_selector\": \"qvalue\", \"__current_case__\": 1, \"qvalue\": \"0.05\"}, \"effective_genome_size_options\": {\"effective_genome_size_options_selector\": \"user_defined\", \"__current_case__\": 4, \"gsize\": {\"__class__\": \"ConnectedValue\"}}, \"format\": \"BED\", \"nomodel_type\": {\"nomodel_type_selector\": \"nomodel\", \"__current_case__\": 1, \"extsize\": \"200\", \"shift\": \"-100\"}, \"outputs\": [\"peaks_tabular\"], \"treatment\": {\"t_multi_select\": \"Yes\", \"__current_case__\": 1, \"input_treatment_file\": {\"__class__\": \"ConnectedValue\"}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.2.9.1+galaxy0",
                "type": "tool",
                "uuid": "e183ec20-d4ab-427a-9a0c-3e9bbced8793",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "merged_macs2_narrowPeaks",
                        "output_name": "output_narrowpeaks",
                        "uuid": "6d97d620-9486-4d85-9a80-e3595c0bb968"
                    }
                ]
            },
            "23": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.31.1+galaxy0",
                "errors": null,
                "id": 23,
                "input_connections": {
                    "inputA": {
                        "id": 22,
                        "output_name": "output_narrowpeaks"
                    },
                    "reduce_or_iterate|inputB": {
                        "id": 13,
                        "output_name": "out_file1"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool bedtools Intersect intervals",
                        "name": "reduce_or_iterate"
                    }
                ],
                "label": "get merged peaks overlapping at least x replicates",
                "name": "bedtools Intersect intervals",
                "outputs": [
                    {
                        "name": "output",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 1643.5166015625,
                    "top": 340.697927011717
                },
                "post_job_actions": {
                    "HideDatasetActionoutput": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.31.1+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "64e2edfe7a2c",
                    "name": "bedtools",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"bed\": false, \"count\": false, \"fraction_cond\": {\"fraction_select\": \"default\", \"__current_case__\": 0}, \"genome_file_opts\": {\"genome_file_opts_selector\": \"loc\", \"__current_case__\": 0, \"genome\": null}, \"header\": false, \"inputA\": {\"__class__\": \"ConnectedValue\"}, \"invert\": false, \"once\": false, \"overlap_mode\": [\"-wa\", \"-wb\"], \"reduce_or_iterate\": {\"reduce_or_iterate_selector\": \"iterate\", \"__current_case__\": 0, \"inputB\": {\"__class__\": \"ConnectedValue\"}}, \"sorted\": false, \"split\": false, \"strand\": \"\", \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.31.1+galaxy0",
                "type": "tool",
                "uuid": "d6183a41-f78c-49fc-b826-f8aa95ff84cb",
                "when": null,
                "workflow_outputs": []
            },
            "24": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy0",
                "errors": null,
                "id": 24,
                "input_connections": {
                    "results_0|software_cond|input": {
                        "id": 7,
                        "output_name": "output_tabular"
                    },
                    "results_1|software_cond|input": {
                        "id": 22,
                        "output_name": "output_tabular"
                    }
                },
                "inputs": [],
                "label": "multiQC",
                "name": "MultiQC",
                "outputs": [
                    {
                        "name": "html_report",
                        "type": "html"
                    },
                    {
                        "name": "stats",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 2329.32147475926,
                    "top": 153.52074582627785
                },
                "post_job_actions": {
                    "HideDatasetActionstats": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "stats"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "a7e081ceb76a",
                    "name": "multiqc",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"comment\": \"\", \"export\": false, \"flat\": false, \"results\": [{\"__index__\": 0, \"software_cond\": {\"software\": \"macs2\", \"__current_case__\": 16, \"input\": {\"__class__\": \"ConnectedValue\"}}}, {\"__index__\": 1, \"software_cond\": {\"software\": \"macs2\", \"__current_case__\": 16, \"input\": {\"__class__\": \"ConnectedValue\"}}}], \"saveLog\": \"false\", \"title\": \"\", \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.27+galaxy0",
                "type": "tool",
                "uuid": "f7d74248-16e3-4020-8156-caae0e7682ef",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "multiqc_output",
                        "output_name": "html_report",
                        "uuid": "a342a984-235e-4d40-9e09-d835aab35282"
                    }
                ]
            },
            "25": {
                "annotation": "",
                "content_id": "Filter1",
                "errors": null,
                "id": 25,
                "input_connections": {
                    "input": {
                        "id": 23,
                        "output_name": "output"
                    }
                },
                "inputs": [],
                "label": "only keep peaks with summits overlapping intersection of at least x replicates",
                "name": "Filter",
                "outputs": [
                    {
                        "name": "out_file1",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 1874.401877544738,
                    "top": 345.7312522070295
                },
                "post_job_actions": {
                    "HideDatasetActionout_file1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out_file1"
                    }
                },
                "tool_id": "Filter1",
                "tool_state": "{\"cond\": \"(c2+c10)>=c12 and (c2+c10)<c13\", \"header_lines\": \"0\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.1.1",
                "type": "tool",
                "uuid": "dd65edce-c587-4e3f-9c08-408fe81c557e",
                "when": null,
                "workflow_outputs": []
            },
            "26": {
                "annotation": "",
                "content_id": "Cut1",
                "errors": null,
                "id": 26,
                "input_connections": {
                    "input": {
                        "id": 25,
                        "output_name": "out_file1"
                    }
                },
                "inputs": [],
                "label": "keep only columns of narrowPeak",
                "name": "Cut",
                "outputs": [
                    {
                        "name": "out_file1",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 2104.095825078475,
                    "top": 439.8305050651918
                },
                "post_job_actions": {
                    "HideDatasetActionout_file1": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "out_file1"
                    }
                },
                "tool_id": "Cut1",
                "tool_state": "{\"columnList\": \"c1-c10\", \"delimiter\": \"T\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.0.2",
                "type": "tool",
                "uuid": "6a58206f-a7b2-4f25-b837-b17185c86c52",
                "when": null,
                "workflow_outputs": []
            },
            "27": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1",
                "errors": null,
                "id": 27,
                "input_connections": {
                    "infile": {
                        "id": 26,
                        "output_name": "out_file1"
                    }
                },
                "inputs": [],
                "label": "discard duplicated lines",
                "name": "Unique",
                "outputs": [
                    {
                        "name": "outfile",
                        "type": "input"
                    }
                ],
                "position": {
                    "left": 2336.462697917632,
                    "top": 460.9788245160598
                },
                "post_job_actions": {
                    "ChangeDatatypeActionoutfile": {
                        "action_arguments": {
                            "newtype": "bed"
                        },
                        "action_type": "ChangeDatatypeAction",
                        "output_name": "outfile"
                    },
                    "RenameDatasetActionoutfile": {
                        "action_arguments": {
                            "newname": "narrowPeak shared by at least x replicates"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "outfile"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1",
                "tool_shed_repository": {
                    "changeset_revision": "86755160afbf",
                    "name": "text_processing",
                    "owner": "bgruening",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"adv_opts\": {\"adv_opts_selector\": \"basic\", \"__current_case__\": 0}, \"ignore_case\": false, \"infile\": {\"__class__\": \"ConnectedValue\"}, \"is_numeric\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "9.3+galaxy1",
                "type": "tool",
                "uuid": "62a36e17-5aea-419d-835d-0fa33dd05e97",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "shared_narrowPeak",
                        "output_name": "outfile",
                        "uuid": "47b85acb-10eb-454c-aa95-1253f223641d"
                    }
                ]
            }
        },
        "tags": [
            "ATAC-seq"
        ],
        "uuid": "f58371cd-2e2d-41da-b1ca-ef10f7330047",
        "version": 13
    },
    "readme": "# Consensus Peak Calling for ChIP-seq, ATAC-seq and CUT&RUN Replicates\n\nThe goal of this workflow is to get a list of confident peaks with summits from n replicates.\n\n## Inputs dataset\n\n- The workflow needs a single input which is a list of datasets with n BAM where PCR duplicates have been removed (the workflow also works for nested list if you have multiple conditions each with multiple replicates).\n\n## Inputs values\n\n- Minimum number of overlap: Minimum number of replicates into which the final summit should be present.\n- effective_genome_size: this is used by MACS2 and may be entered manually (indications are provided for heavily used genomes).\n- bin_size: this is the bin sized used to compute the average of normalized profiles. Large values will allow to have a smaller output file but with less resolution while small values will increase computation time and size of the output file to produce a more resolutive bigwig.\n\n## Strategy summary\n\nHere is a generated example to highlight the strategy:\n![strategy](https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/strategy.png)\n\n## Processing\n\n- The workflow will:\n  - first part:\n    - call peaks and compute normalized coverage on each BAM individually\n    - average normalized profiles\n    - compute the intersection between all peaks and filter when at least x replicate overlaps\n  - second part:\n    - subset all BAM to get the same number of reads\n    - call peaks on all subsetted BAM combined\n  - finally, keep only peaks from the second part that have summits overlapping the filtered intersection of the first part.\n",
    "changelog": "# Changelog\n\n## [1.3] - 2025-01-27\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.24.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy0`\n\n## [1.2] - 2024-09-24\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.15.1+galaxy2` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.20+galaxy3`\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.24.1+galaxy0`\n\n## [1.1] - 2024-05-27\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.30.0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.31.1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.1` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.30.0+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.31.1+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.30.0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.31.1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.1` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.30.0+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.31.1+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.30.0+galaxy2` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.31.1+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.30.0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.31.1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.1` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2`\n- `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.30.0+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.31.1+galaxy0`\n\n## [1.0] - 2024-05-01\n\n### Changed\nThe workflow changed as it accepts now more than 2 replicates and has a new parameter to define what is the minimum number of replicates where the summit should be found.\nThe workflow for ATAC and CUT&RUN changed the input datatype as now a BAM is required instead of a BED.\n\n## [0.7] - 2024-04-15\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1`\n\n## [0.6] - 2024-04-08\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy1`\n\n## [0.5] - 2024-03-05\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/1.1.0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_sorted_uniq/9.3+galaxy0`\n\n## [0.4] - 2023-11-27\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.15.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.15.1+galaxy2`\n\n## [0.3] - 2023-11-27\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.15.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/samtools_view/samtools_view/1.15.1+galaxy2`\n\n## [0.2] - 2023-11-10\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.7.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.2.9.1+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.2+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.4+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.2+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/deeptools_bigwig_average/deeptools_bigwig_average/3.5.4+galaxy0`\n\n## [0.1] - 2023-08-31\nFirst release.\n",
    "diagrams": "# Workflow diagrams\n\n## Consensus Peak Calling for ATAC-seq and CUT&RUN Replicates\n\n```mermaid\ngraph LR\n0[\"\u2139\ufe0f n rmDup BAM\"]@{ shape: docs }\n1[\"\u2139\ufe0f Minimum number of overlap\"]@{ shape: lean-l }\n2[\"\u2139\ufe0f effective_genome_size\"]@{ shape: lean-l }\n3[\"\u2139\ufe0f bin_size\"]@{ shape: lean-l }\n4[\"convert BAM to BED\"]@{ shape: process }\n0 --> 4\n5[\"count number of reads\"]@{ shape: process }\n0 --> 5\n6[\"generate filter rule\"]@{ shape: process }\n1 --> 6\n7[\"call peaks individually\"]@{ shape: process }\n2 --> 7\n4 --> 7\n8[\"put all nb of reads into single dataset\"]@{ shape: process }\n5 --> 8\n9[\"compute multi intersect\"]@{ shape: process }\n7 --> 9\n10[\"individual normalized bigwig\"]@{ shape: process }\n7 --> 10\n11[\"get min value\"]@{ shape: process }\n8 --> 11\n12[\"get nb of replicates\"]@{ shape: process }\n8 --> 12\n13[\"filter multi intersect\"]@{ shape: process }\n6 --> 13\n9 --> 13\n14[\"average coverage from replicates\"]@{ shape: process }\n3 --> 14\n10 --> 14\n15[\"convert min value to text\"]@{ shape: process }\n11 --> 15\n16[\"Parse parameter value\"]@{ shape: process }\n12 --> 16\n17[\"create a dataset with the min value as many times as there are replicates\"]@{ shape: process }\n15 --> 17\n16 --> 17\n18[\"split min value\"]@{ shape: process }\n17 --> 18\n19[\"convert min nb of reads to parameter\"]@{ shape: process }\n18 --> 19\n20[\"select random reads\"]@{ shape: process }\n0 --> 20\n19 --> 20\n21[\"convert subsampled bam to bed\"]@{ shape: process }\n20 --> 21\n22[\"call peaks on merge\"]@{ shape: process }\n2 --> 22\n21 --> 22\n23[\"get merged peaks overlapping at least x replicates\"]@{ shape: process }\n22 --> 23\n13 --> 23\n24[\"multiQC\"]@{ shape: process }\n7 --> 24\n22 --> 24\n25[\"only keep peaks with summits overlapping intersection of at least x replicates\"]@{ shape: process }\n23 --> 25\n26[\"keep only columns of narrowPeak\"]@{ shape: process }\n25 --> 26\n27[\"discard duplicated lines\"]@{ shape: process }\n26 --> 27\n```\n",
    "updated": "2025-01-27T00:00:00",
    "trsID": "#workflow/github.com/iwc-workflows/consensus-peaks/consensus-peaks-atac-cutandrun",
    "iwcID": "consensus-peaks-consensus-peaks-atac-cutandrun",
    "dockstore_id": 23499,
    "categories": [],
    "collections": [
        "Epigenetics"
    ],
    "doi": "10.5281/zenodo.15078828",
    "tests": [
        {
            "doc": "Test for consensus-peaks-atac-cutandrun.ga",
            "job": {
                "n rmDup BAM": {
                    "class": "Collection",
                    "collection_type": "list",
                    "elements": [
                        {
                            "class": "File",
                            "identifier": "rep1",
                            "dbkey": "mm10",
                            "location": "https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep1.bam",
                            "filetype": "bam"
                        },
                        {
                            "class": "File",
                            "identifier": "rep2",
                            "dbkey": "mm10",
                            "location": "https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep2.bam",
                            "filetype": "bam"
                        },
                        {
                            "class": "File",
                            "identifier": "rep3",
                            "dbkey": "mm10",
                            "location": "https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep3.bam",
                            "filetype": "bam"
                        }
                    ]
                },
                "Minimum number of overlap": 2,
                "effective_genome_size": 1870000000,
                "bin_size": 50
            },
            "outputs": {
                "individual_macs2_narrowPeaks": {
                    "element_tests": {
                        "rep1": {
                            "asserts": {
                                "has_n_lines": {
                                    "n": 4
                                }
                            }
                        },
                        "rep2": {
                            "asserts": {
                                "has_n_lines": {
                                    "n": 6
                                }
                            }
                        },
                        "rep3": {
                            "asserts": {
                                "has_n_lines": {
                                    "n": 4
                                }
                            }
                        }
                    }
                },
                "average_bigwig": {
                    "asserts": {
                        "has_size": {
                            "value": 1388,
                            "delta": 100
                        }
                    }
                },
                "merged_macs2_narrowPeaks": {
                    "asserts": {
                        "has_n_lines": {
                            "n": 8
                        }
                    }
                },
                "multiqc_output": {
                    "asserts": {
                        "has_text": {
                            "text": "MACS2: Fragment Length"
                        }
                    }
                },
                "shared_narrowPeak": {
                    "asserts": {
                        "has_n_lines": {
                            "n": 4
                        }
                    }
                }
            }
        }
    ]
}