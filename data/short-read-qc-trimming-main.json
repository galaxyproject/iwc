{
    "name": "main",
    "subclass": "Galaxy",
    "publish": true,
    "primaryDescriptorPath": "/short-read-quality-control-and-trimming.ga",
    "testParameterFiles": [
        "/short-read-quality-control-and-trimming-tests.yml"
    ],
    "authors": [
        {
            "name": "B\u00e9r\u00e9nice Batut",
            "orcid": "0000-0001-9852-1987"
        },
        {
            "name": "Paul Zierep",
            "orcid": "0000-0003-2982-388X"
        }
    ],
    "definition": {
        "a_galaxy_workflow": "true",
        "annotation": "This workflow performs quality control and trimming on paired-end Illumina fastq(.gz) files using fastp and aggregates the quality control reports with MultiQC",
        "comments": [],
        "creator": [
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0001-9852-1987",
                "name": "B\u00e9r\u00e9nice Batut"
            },
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0003-2982-388X",
                "name": "Paul Zierep"
            }
        ],
        "format-version": "0.1",
        "license": "MIT",
        "name": "Short-read quality control and trimming",
        "readme": "Before starting any analysis, it is always a good idea to assess the quality of the input data and to discard poor-quality base content by trimming and filtering reads.\n\nThis workflow takes paired-end Illumina (**short-reads**) fastq(.gz) files and executes the following steps:\n1. Quality control and trimming using **fastp**\n2. Aggregation of the quality control reports using **MultiQC**\n",
        "report": {
            "markdown": "\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n"
        },
        "steps": {
            "0": {
                "annotation": "Raw reads as paired-end collection",
                "content_id": null,
                "errors": null,
                "id": 0,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Raw reads as paired-end collection",
                        "name": "Raw reads"
                    }
                ],
                "label": "Raw reads",
                "name": "Input dataset collection",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 0
                },
                "tool_id": null,
                "tool_state": "{\"optional\": false, \"tag\": null, \"collection_type\": \"list:paired\", \"fields\": null}",
                "tool_version": null,
                "type": "data_collection_input",
                "uuid": "921113d6-60b5-413d-acb5-65b5515a28e2",
                "when": null,
                "workflow_outputs": []
            },
            "1": {
                "annotation": "Sequence of the adapter to remove from forward reads using fastp",
                "content_id": null,
                "errors": null,
                "id": 1,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Sequence of the adapter to remove from forward reads using fastp",
                        "name": "Adapter to remove on forward reads"
                    }
                ],
                "label": "Adapter to remove on forward reads",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 120
                },
                "tool_id": null,
                "tool_state": "{\"multiple\": false, \"validators\": [], \"parameter_type\": \"text\", \"optional\": true}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "7f4b4c11-a767-46d0-a3e6-5c9fc8667bcb",
                "when": null,
                "workflow_outputs": []
            },
            "2": {
                "annotation": "Sequence of the adapter to remove from reverse reads using fastp",
                "content_id": null,
                "errors": null,
                "id": 2,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Sequence of the adapter to remove from reverse reads using fastp",
                        "name": "Adapter to remove on reverse reads"
                    }
                ],
                "label": "Adapter to remove on reverse reads",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 260
                },
                "tool_id": null,
                "tool_state": "{\"multiple\": false, \"validators\": [], \"parameter_type\": \"text\", \"optional\": true}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "00addbca-26cf-4aba-ba30-df34414971c1",
                "when": null,
                "workflow_outputs": []
            },
            "3": {
                "annotation": "The quality value that a base is qualified. Default 15 means a quality score &gt;=Q15 is qualified.",
                "content_id": null,
                "errors": null,
                "id": 3,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "The quality value that a base is qualified. Default 15 means a quality score &gt;=Q15 is qualified.",
                        "name": "Qualified quality score"
                    }
                ],
                "label": "Qualified quality score",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 400
                },
                "tool_id": null,
                "tool_state": "{\"default\": 15, \"validators\": [], \"parameter_type\": \"integer\", \"optional\": true}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "04d655d2-96e3-472b-8a84-dedb7993d101",
                "when": null,
                "workflow_outputs": []
            },
            "4": {
                "annotation": "Reads shorter than this value will be discarded",
                "content_id": null,
                "errors": null,
                "id": 4,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Reads shorter than this value will be discarded",
                        "name": "Minimal read length"
                    }
                ],
                "label": "Minimal read length",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 540
                },
                "tool_id": null,
                "tool_state": "{\"default\": 15, \"validators\": [], \"parameter_type\": \"integer\", \"optional\": true}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "314b6d7d-6b31-420c-bc62-757aa5f18a04",
                "when": null,
                "workflow_outputs": []
            },
            "5": {
                "annotation": "Quality control and trimming of the raw reads",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/1.0.1+galaxy3",
                "errors": null,
                "id": 5,
                "input_connections": {
                    "filter_options|length_filtering_options|length_required": {
                        "id": 4,
                        "output_name": "output"
                    },
                    "filter_options|quality_filtering_options|qualified_quality_phred": {
                        "id": 3,
                        "output_name": "output"
                    },
                    "single_paired|adapter_trimming_options|adapter_sequence1": {
                        "id": 1,
                        "output_name": "output"
                    },
                    "single_paired|adapter_trimming_options|adapter_sequence2": {
                        "id": 2,
                        "output_name": "output"
                    },
                    "single_paired|paired_input": {
                        "id": 0,
                        "output_name": "output"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool fastp",
                        "name": "single_paired"
                    }
                ],
                "label": "fastp",
                "name": "fastp",
                "outputs": [
                    {
                        "name": "output_paired_coll",
                        "type": "input"
                    },
                    {
                        "name": "report_html",
                        "type": "html"
                    },
                    {
                        "name": "report_json",
                        "type": "json"
                    }
                ],
                "position": {
                    "left": 408.5010632461024,
                    "top": 221.4775731238642
                },
                "post_job_actions": {
                    "HideDatasetActionreport_html": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "report_html"
                    },
                    "RenameDatasetActionoutput_paired_coll": {
                        "action_arguments": {
                            "newname": "Trimmed reads"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "output_paired_coll"
                    },
                    "RenameDatasetActionreport_json": {
                        "action_arguments": {
                            "newname": "fastp JSON report"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "report_json"
                    },
                    "TagDatasetActionoutput_paired_coll": {
                        "action_arguments": {
                            "tags": "name:Reads"
                        },
                        "action_type": "TagDatasetAction",
                        "output_name": "output_paired_coll"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/1.0.1+galaxy3",
                "tool_shed_repository": {
                    "changeset_revision": "f875da9d433c",
                    "name": "fastp",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"duplicated_reads\": {\"handling_options\": {\"eval_dups\": \"--dont_eval_duplication\", \"__current_case__\": 0}}, \"filter_options\": {\"quality_filtering_options\": {\"disable_quality_filtering\": false, \"qualified_quality_phred\": {\"__class__\": \"ConnectedValue\"}, \"unqualified_percent_limit\": null, \"n_base_limit\": null}, \"length_filtering_options\": {\"disable_length_filtering\": false, \"length_required\": {\"__class__\": \"ConnectedValue\"}, \"length_limit\": null}, \"low_complexity_filter\": {\"enable_low_complexity_filter\": false, \"complexity_threshold\": null}}, \"output_options\": {\"report_html\": true, \"report_json\": true}, \"overrepresented_sequence_analysis\": {\"overrepresentation_analysis\": false, \"overrepresentation_sampling\": null}, \"read_mod_options\": {\"polyg_tail_trimming\": {\"trimming_select\": \"\", \"__current_case__\": 1, \"poly_g_min_len\": null}, \"polyx_tail_trimming\": {\"polyx_trimming_select\": \"\", \"__current_case__\": 1}, \"umi_processing\": {\"umi\": false, \"umi_loc\": null, \"umi_len\": null, \"umi_prefix\": null}, \"cutting_by_quality_options\": {\"cut_front_select\": {\"cut_front\": \"\", \"__current_case__\": 1}, \"cut_tail_select\": {\"cut_tail\": \"\", \"__current_case__\": 1}, \"cut_right_select\": {\"cut_right\": \"\", \"__current_case__\": 1}}, \"base_correction_options\": {\"correction\": false}}, \"single_paired\": {\"single_paired_selector\": \"paired_collection\", \"__current_case__\": 1, \"paired_input\": {\"__class__\": \"ConnectedValue\"}, \"merge_reads\": {\"merge\": \"\", \"__current_case__\": 1}, \"adapter_trimming_options\": {\"disable_adapter_trimming\": false, \"adapter_sequence1\": {\"__class__\": \"ConnectedValue\"}, \"adapter_sequence2\": {\"__class__\": \"ConnectedValue\"}, \"detect_adapter_for_pe\": false}, \"global_trimming_options\": {\"trim_front1\": null, \"trim_tail1\": null, \"trim_front2\": null, \"trim_tail2\": null}}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.0.1+galaxy3",
                "type": "tool",
                "uuid": "e69bddb6-7447-4f42-b721-233bbe9c4d71",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "fastp JSON report",
                        "output_name": "report_json",
                        "uuid": "25c78a94-2348-4791-9e08-7cc24a444445"
                    },
                    {
                        "label": "fastp trimmed reads",
                        "output_name": "output_paired_coll",
                        "uuid": "7bbb7aec-4ead-4381-8aff-593bdc8bfe33"
                    }
                ]
            },
            "6": {
                "annotation": "Aggregation of the quality controls for all samples",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy4",
                "errors": null,
                "id": 6,
                "input_connections": {
                    "results_0|software_cond|input": {
                        "id": 5,
                        "output_name": "report_json"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool MultiQC",
                        "name": "image_content_input"
                    }
                ],
                "label": "MultiQC",
                "name": "MultiQC",
                "outputs": [
                    {
                        "name": "html_report",
                        "type": "html"
                    },
                    {
                        "name": "stats",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 719.9925289718227,
                    "top": 259.25915941357374
                },
                "post_job_actions": {
                    "HideDatasetActionstats": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "stats"
                    },
                    "RenameDatasetActionhtml_report": {
                        "action_arguments": {
                            "newname": "MultiQC report"
                        },
                        "action_type": "RenameDatasetAction",
                        "output_name": "html_report"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy4",
                "tool_shed_repository": {
                    "changeset_revision": "e4dd4c0622f6",
                    "name": "multiqc",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"comment\": \"\", \"export\": false, \"flat\": false, \"image_content_input\": {\"__class__\": \"RuntimeValue\"}, \"png_plots\": false, \"results\": [{\"__index__\": 0, \"software_cond\": {\"software\": \"fastp\", \"__current_case__\": 7, \"input\": {\"__class__\": \"ConnectedValue\"}}}], \"title\": \"\", \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.27+galaxy4",
                "type": "tool",
                "uuid": "cce48d5d-b02d-435e-b466-d4f3eb8b7529",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "MultiQC HTML report",
                        "output_name": "html_report",
                        "uuid": "37f4495a-44ec-4ab5-b414-b60b18affdf1"
                    }
                ]
            }
        },
        "tags": [
            "genomics",
            "preprocessing",
            "transcriptomics",
            "bacteria",
            "eukaryotes",
            "archea"
        ],
        "uuid": "de5d7407-7056-47cd-88c4-79b8c81cdf73",
        "version": 1,
        "release": "0.2"
    },
    "workflow_job_input": {
        "Raw reads": {
            "class": "Collection",
            "collection_type": "list",
            "elements": [
                {
                    "class": "File",
                    "identifier": "todo_element_name",
                    "path": "todo_test_data_path.ext"
                }
            ]
        }
    },
    "readme": "# Short-read quality control and trimming\n\nBefore starting any analysis, it is always a good idea to assess the quality of the input data and to discard poor-quality base content by trimming and filtering reads.\n\nThis workflow takes paired-end Illumina (**short-reads**) fastq(.gz) files and executes the following steps:\n1. Quality control and trimming using **fastp**\n2. Aggregation of the quality control reports using **MultiQC**\n\n## Input Datasets\n\n- A list of paired datasets corresponding to paired-end raw reads in `fastqsanger` or `fastqsanger.gz` format.\n- Qualified quality score: The quality value that a base is qualified to have.\n- Minimal read length: Reads shorter than this value will be discarded.\n- Cutting mean quality: The bases in the sliding window with mean quality below this value will be cut.\n- [Optional] Adapter to remove on forward reads and reverse reads\n\n## Output Datasets\n\n- A list of paired datasets corresponding to paired-end **trimmed** reads in `fastqsanger` or `fastqsanger.gz`, ready for further analysis.\n- List of `JSON` reports of fastp for each sample that could be used as inputs for extra MultiQC\n- MultiQC report in HTML",
    "changelog": "# Changelog\n\n## [0.2] - 2025-12-08\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/1.0.1+galaxy2` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/fastp/fastp/1.0.1+galaxy3`\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.24.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy4`\n   \n## [0.1] 2025-10-07\n   \nFirst release.\n",
    "diagrams": "# Workflow diagrams\n\n## Short-read quality control and trimming\n\n```mermaid\ngraph LR\n0[\"\u2139\ufe0f Raw reads\"]@{ shape: docs }\n1[\"\u2139\ufe0f Adapter to remove on forward reads\"]@{ shape: lean-l }\n2[\"\u2139\ufe0f Adapter to remove on reverse reads\"]@{ shape: lean-l }\n3[\"\u2139\ufe0f Qualified quality score\"]@{ shape: lean-l }\n4[\"\u2139\ufe0f Minimal read length\"]@{ shape: lean-l }\n5[\"fastp\"]@{ shape: process }\n4 --> 5\n3 --> 5\n1 --> 5\n2 --> 5\n0 --> 5\n6[\"MultiQC\"]@{ shape: process }\n5 --> 6\n```\n",
    "updated": "2025-12-08T00:00:00",
    "trsID": "#workflow/github.com/iwc-workflows/short-read-qc-trimming/main",
    "iwcID": "short-read-qc-trimming-main",
    "dockstore_id": 34575,
    "categories": [],
    "collections": [],
    "doi": "10.5281/zenodo.17805254",
    "tests": [
        {
            "doc": "Test outline for short-reads-quality-control-and-trimming",
            "job": {
                "Raw reads": {
                    "class": "Collection",
                    "collection_type": "list:paired",
                    "elements": [
                        {
                            "class": "Collection",
                            "type": "paired",
                            "identifier": "pair",
                            "elements": [
                                {
                                    "class": "File",
                                    "identifier": "forward",
                                    "location": "https://zenodo.org/records/11484215/files/paired_r1.fastq.gz",
                                    "filetype": "fastqsanger.gz"
                                },
                                {
                                    "class": "File",
                                    "identifier": "reverse",
                                    "location": "https://zenodo.org/records/11484215/files/paired_r2.fastq.gz",
                                    "filetype": "fastqsanger.gz"
                                }
                            ]
                        }
                    ]
                },
                "Adapter to remove on forward reads": null,
                "Adapter to remove on reverse reads": null,
                "Qualified quality score": "15",
                "Minimal read length": "15",
                "Cutting mean quality": "15"
            },
            "outputs": {
                "MultiQC HTML report": {
                    "asserts": {
                        "has_text": {
                            "text": "pair"
                        }
                    }
                },
                "fastp JSON report": {
                    "element_tests": {
                        "pair": {
                            "asserts": {
                                "has_text": {
                                    "text": "59230948"
                                }
                            }
                        }
                    }
                }
            }
        }
    ]
}