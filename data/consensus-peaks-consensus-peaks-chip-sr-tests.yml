- doc: Test for consensus-peaks-chip-sr.ga
  job:
    Minimum number of overlap: 2
    bin_size: 50
    effective_genome_size: 1870000000
    n rmDup BAMSR:
      class: Collection
      collection_type: list
      elements:
      - class: File
        dbkey: mm10
        filetype: bam
        identifier: rep1
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/ChIP_SR_rep1.bam
      - class: File
        dbkey: mm10
        filetype: bam
        identifier: rep2
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/ChIP_SR_rep2.bam
      - class: File
        dbkey: mm10
        filetype: bam
        identifier: rep3
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/ChIP_SR_rep3.bam
  outputs:
    average_bigwig:
      asserts:
        has_size:
          delta: 100
          value: 1290
    individual_macs2_narrowPeaks:
      element_tests:
        rep1:
          asserts:
            has_n_lines:
              n: 3
        rep2:
          asserts:
            has_n_lines:
              n: 3
        rep3:
          asserts:
            has_n_lines:
              n: 3
    merged_macs2_narrowPeaks:
      asserts:
        has_n_lines:
          n: 4
    multiqc_output:
      asserts:
        has_text:
          text: 'MACS2: Fragment Length'
    shared_narrowPeak:
      asserts:
        has_n_lines:
          n: 2
