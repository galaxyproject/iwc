- doc: Test outline for mgnify-amplicon-pipeline-v5-its.ga
  job:
    LSU and SSU BED:
      class: Collection
      collection_type: list
      elements:
      - class: File
        filetype: bed
        identifier: DRR010481_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/DRR010481.bed
      - class: File
        filetype: bed
        identifier: ERR2715528_MERGED_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/ERR2715528.bed
    Processed sequences:
      class: Collection
      collection_type: list
      elements:
      - class: File
        filetype: fasta
        identifier: DRR010481_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/DRR010481_SE.fasta
      - class: File
        filetype: fasta
        identifier: ERR2715528_MERGED_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/ERR2715528_PE.fasta
  outputs:
    ITS FASTA files:
      element_tests:
        DRR010481_FASTQ.fasta:
          compare: contains
          location: https://zenodo.org/records/13710235/files/DRR010481_ITS.fasta
        ERR2715528_MERGED_FASTQ.fasta:
          compare: contains
          location: https://zenodo.org/records/13710235/files/ERR2715528_ITS.fasta
    ITS OTU tables (ITSoneDB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    ITS OTU tables (UNITE DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    ITS OTU tables in HDF5 format (ITSoneDB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 72000
    ITS OTU tables in HDF5 format (UNITE DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 72000
    ITS OTU tables in JSON format (UNITE DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    ITS taxonomic abundance pie charts (ITSoneDB):
      asserts:
      - text: DRR010481_FASTQ_fasta
        that: has_text
      - text: ERR2715528_MERGED_FASTQ_fasta
        that: has_text
    ITS taxonomic abundance pie charts (UNITE DB):
      asserts:
      - text: DRR010481_FASTQ_fasta
        that: has_text
      - text: ERR2715528_MERGED_FASTQ_fasta
        that: has_text
    ITS taxonomic classifications using ITSoneDB:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: ITSone
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: ITSone
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    ITS taxonomic classifications using UNITE DB:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: UNITE
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: UNITE
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
