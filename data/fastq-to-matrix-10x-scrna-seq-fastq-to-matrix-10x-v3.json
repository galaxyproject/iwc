{
    "name": "scrna-seq-fastq-to-matrix-10x-v3",
    "subclass": "Galaxy",
    "publish": true,
    "primaryDescriptorPath": "/scrna-seq-fastq-to-matrix-10x-v3.ga",
    "testParameterFiles": [
        "/scrna-seq-fastq-to-matrix-10x-v3-tests.yml"
    ],
    "authors": [
        {
            "name": "Lucille Delisle",
            "orcid": "0000-0002-1964-4960"
        },
        {
            "name": "Mehmet Tekman",
            "orcid": "0000-0002-4181-2676"
        },
        {
            "name": "Hans-Rudolf Hotz",
            "orcid": "0000-0002-2799-424X"
        },
        {
            "name": "Daniel Blankenberg",
            "orcid": "0000-0002-6833-9049"
        },
        {
            "name": "Wendi Bacon",
            "orcid": "0000-0002-8170-8806"
        }
    ],
    "definition": {
        "a_galaxy_workflow": "true",
        "annotation": "Complete preprocessing pipeline for 10X Genomics v3 single-cell RNA-seq data. Aligns raw FASTQ files using STARsolo, performs cell calling and quality filtering with DropletUtils, and formats outputs for seamless import into Seurat/Scanpy (Read10X function).",
        "comments": [],
        "creator": [
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-1964-4960",
                "name": "Lucille Delisle"
            },
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-4181-2676",
                "name": "Mehmet Tekman"
            },
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-2799-424X",
                "name": "Hans-Rudolf Hotz"
            },
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-6833-9049",
                "name": "Daniel Blankenberg"
            },
            {
                "class": "Person",
                "identifier": "https://orcid.org/0000-0002-8170-8806",
                "name": "Wendi Bacon"
            }
        ],
        "format-version": "0.1",
        "license": "MIT",
        "name": "Single-Cell RNA-seq Preprocessing: 10X Genomics v3 to Seurat and Scanpy Compatible Format",
        "steps": {
            "0": {
                "annotation": "Collection of Pairs with fastqs one item per sample",
                "content_id": null,
                "errors": null,
                "id": 0,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Collection of Pairs with fastqs one item per sample",
                        "name": "fastq PE collection"
                    }
                ],
                "label": "fastq PE collection",
                "name": "Input dataset collection",
                "outputs": [],
                "position": {
                    "left": 0,
                    "top": 0
                },
                "tool_id": null,
                "tool_state": "{\"optional\": false, \"tag\": \"\", \"collection_type\": \"list:paired\"}",
                "tool_version": null,
                "type": "data_collection_input",
                "uuid": "eea58879-4368-4edf-ad0a-2dbd91de2db7",
                "when": null,
                "workflow_outputs": []
            },
            "1": {
                "annotation": "Choose your reference genome",
                "content_id": null,
                "errors": null,
                "id": 1,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Choose your reference genome",
                        "name": "reference genome"
                    }
                ],
                "label": "reference genome",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 58.94316181636054,
                    "top": 104
                },
                "tool_id": null,
                "tool_state": "{\"validators\": [], \"restrictOnConnections\": true, \"parameter_type\": \"text\", \"optional\": false}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "adf0f555-5974-44b9-a067-37e4054cd662",
                "when": null,
                "workflow_outputs": []
            },
            "2": {
                "annotation": "Gene annotations",
                "content_id": null,
                "errors": null,
                "id": 2,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Gene annotations",
                        "name": "gtf"
                    }
                ],
                "label": "gtf",
                "name": "Input dataset",
                "outputs": [],
                "position": {
                    "left": 121.00981220698554,
                    "top": 197
                },
                "tool_id": null,
                "tool_state": "{\"optional\": false, \"tag\": \"\"}",
                "tool_version": null,
                "type": "data_input",
                "uuid": "8724cc04-fa9f-48df-ba31-6c47a03c9bde",
                "when": null,
                "workflow_outputs": []
            },
            "3": {
                "annotation": "Available at https://zenodo.org/record/3457880/files/3M-february-2018.txt.gz",
                "content_id": null,
                "errors": null,
                "id": 3,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Available at https://zenodo.org/record/3457880/files/3M-february-2018.txt.gz",
                        "name": "cellranger_barcodes_3M-february-2018.txt"
                    }
                ],
                "label": "cellranger_barcodes_3M-february-2018.txt",
                "name": "Input dataset",
                "outputs": [],
                "position": {
                    "left": 194.97648701167304,
                    "top": 293
                },
                "tool_id": null,
                "tool_state": "{\"optional\": false, \"tag\": \"\"}",
                "tool_version": null,
                "type": "data_input",
                "uuid": "bc4574f1-2a6f-44db-bed3-6d066d5ce42f",
                "when": null,
                "workflow_outputs": []
            },
            "4": {
                "annotation": "Barcode Size is same size of the Read",
                "content_id": null,
                "errors": null,
                "id": 4,
                "input_connections": {},
                "inputs": [
                    {
                        "description": "Barcode Size is same size of the Read",
                        "name": "Barcode Size is same size of the Read"
                    }
                ],
                "label": "Barcode Size is same size of the Read",
                "name": "Input parameter",
                "outputs": [],
                "position": {
                    "left": 260.683349609375,
                    "top": 414.5
                },
                "tool_id": null,
                "tool_state": "{\"validators\": [], \"parameter_type\": \"boolean\", \"optional\": false}",
                "tool_version": null,
                "type": "parameter_input",
                "uuid": "a9d14d27-ca59-444d-9fe1-485b3354b9a7",
                "when": null,
                "workflow_outputs": []
            },
            "5": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11b+galaxy0",
                "errors": null,
                "id": 5,
                "input_connections": {
                    "refGenomeSource|GTFconditional|genomeDir": {
                        "id": 1,
                        "output_name": "output"
                    },
                    "refGenomeSource|GTFconditional|sjdbGTFfile": {
                        "id": 2,
                        "output_name": "output"
                    },
                    "sc|input_types|input_collection": {
                        "id": 0,
                        "output_name": "output"
                    },
                    "sc|soloBarcodeReadLength": {
                        "id": 4,
                        "output_name": "output"
                    },
                    "sc|soloCBwhitelist": {
                        "id": 3,
                        "output_name": "output"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool RNA STARSolo",
                        "name": "sc"
                    },
                    {
                        "description": "runtime parameter for tool RNA STARSolo",
                        "name": "sc"
                    }
                ],
                "label": null,
                "name": "RNA STARSolo",
                "outputs": [
                    {
                        "name": "output_log",
                        "type": "txt"
                    },
                    {
                        "name": "output_genes",
                        "type": "tsv"
                    },
                    {
                        "name": "output_barcodes",
                        "type": "tsv"
                    },
                    {
                        "name": "output_matrix",
                        "type": "mtx"
                    },
                    {
                        "name": "output_BAM",
                        "type": "bam"
                    },
                    {
                        "name": "output_stats",
                        "type": "txt"
                    },
                    {
                        "name": "reads_per_gene",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 568.7432106444855,
                    "top": 374
                },
                "post_job_actions": {
                    "HideDatasetActionoutput_BAM": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_BAM"
                    },
                    "HideDatasetActionoutput_barcodes": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_barcodes"
                    },
                    "HideDatasetActionoutput_genes": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_genes"
                    },
                    "HideDatasetActionoutput_log": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_log"
                    },
                    "HideDatasetActionoutput_matrix": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_matrix"
                    },
                    "HideDatasetActionoutput_stats": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "output_stats"
                    },
                    "HideDatasetActionreads_per_gene": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "reads_per_gene"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11b+galaxy0",
                "tool_shed_repository": {
                    "changeset_revision": "a00cceb45700",
                    "name": "rna_starsolo",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"algo\": {\"params\": {\"settingsType\": \"default\", \"__current_case__\": 0}}, \"chimOutType\": \"\", \"outWig\": {\"outWigType\": \"None\", \"__current_case__\": 0, \"outWigStrand\": \"false\"}, \"refGenomeSource\": {\"geneSource\": \"indexed\", \"__current_case__\": 0, \"GTFconditional\": {\"GTFselect\": \"without-gtf-with-gtf\", \"__current_case__\": 1, \"genomeDir\": {\"__class__\": \"ConnectedValue\"}, \"sjdbGTFfile\": {\"__class__\": \"ConnectedValue\"}, \"sjdbGTFfeatureExon\": \"exon\", \"sjdbOverhang\": \"100\"}}, \"sc\": {\"solo_type\": \"CB_UMI_Simple\", \"__current_case__\": 0, \"input_types\": {\"use\": \"list_paired\", \"__current_case__\": 1, \"input_collection\": {\"__class__\": \"ConnectedValue\"}}, \"soloCBwhitelist\": {\"__class__\": \"ConnectedValue\"}, \"params\": {\"chemistry\": \"Cv3\", \"__current_case__\": 1}, \"soloBarcodeReadLength\": {\"__class__\": \"ConnectedValue\"}, \"umidedup\": {\"soloUMIdedup\": \"1MM_CR\", \"__current_case__\": 4, \"soloUMIfiltering\": \"-\"}, \"soloCBmatchWLtype\": \"1MM_multi\"}, \"solo\": {\"soloStrand\": \"Forward\", \"soloFeatures\": \"Gene\", \"wasp_conditional\": {\"waspOutputMode\": \"\", \"__current_case__\": 1}, \"filter\": {\"filter_type\": \"no_filter\", \"__current_case__\": 3, \"output_raw\": \"true\"}, \"soloOutFormatFeaturesGeneField3\": \"Gene Expression\", \"outSAMattributes\": [\"NH\", \"HI\", \"AS\", \"nM\", \"GX\", \"GN\", \"CB\", \"UB\"], \"quantModeGene\": true, \"outSAMunmapped\": false, \"outSAMmapqUnique\": \"60\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "2.7.11b+galaxy0",
                "type": "tool",
                "uuid": "cef740b0-fa95-4542-b08f-dbfca4bfb3e5",
                "when": null,
                "workflow_outputs": []
            },
            "6": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy3",
                "errors": null,
                "id": 6,
                "input_connections": {
                    "results_0|software_cond|output_0|type|input": {
                        "id": 5,
                        "output_name": "output_log"
                    },
                    "results_0|software_cond|output_1|type|input": {
                        "id": 5,
                        "output_name": "reads_per_gene"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool MultiQC",
                        "name": "image_content_input"
                    }
                ],
                "label": "multiQC",
                "name": "MultiQC",
                "outputs": [
                    {
                        "name": "html_report",
                        "type": "html"
                    },
                    {
                        "name": "stats",
                        "type": "tabular"
                    }
                ],
                "position": {
                    "left": 848.0098122069855,
                    "top": 366.98333740234375
                },
                "post_job_actions": {
                    "HideDatasetActionstats": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "stats"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy3",
                "tool_shed_repository": {
                    "changeset_revision": "31c42a2c02d3",
                    "name": "multiqc",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"comment\": \"\", \"export\": false, \"flat\": false, \"image_content_input\": {\"__class__\": \"RuntimeValue\"}, \"results\": [{\"__index__\": 0, \"software_cond\": {\"software\": \"star\", \"__current_case__\": 28, \"output\": [{\"__index__\": 0, \"type\": {\"type\": \"log\", \"__current_case__\": 0, \"input\": {\"__class__\": \"ConnectedValue\"}}}, {\"__index__\": 1, \"type\": {\"type\": \"genecounts\", \"__current_case__\": 1, \"input\": {\"__class__\": \"ConnectedValue\"}}}]}}], \"saveLog\": \"false\", \"title\": \"\", \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.27+galaxy3",
                "type": "tool",
                "uuid": "a16bf20e-2bc9-45e7-a0a3-b5590212b973",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "MultiQC on input dataset(s): Webpage",
                        "output_name": "html_report",
                        "uuid": "eb55ba68-0473-4b09-87b9-007be3a86098"
                    }
                ]
            },
            "7": {
                "annotation": "",
                "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/dropletutils/dropletutils/1.10.0+galaxy2",
                "errors": null,
                "id": 7,
                "input_connections": {
                    "tenx_format|input": {
                        "id": 5,
                        "output_name": "output_matrix"
                    },
                    "tenx_format|input_barcodes": {
                        "id": 5,
                        "output_name": "output_barcodes"
                    },
                    "tenx_format|input_genes": {
                        "id": 5,
                        "output_name": "output_genes"
                    }
                },
                "inputs": [
                    {
                        "description": "runtime parameter for tool DropletUtils",
                        "name": "tenx_format"
                    },
                    {
                        "description": "runtime parameter for tool DropletUtils",
                        "name": "tenx_format"
                    },
                    {
                        "description": "runtime parameter for tool DropletUtils",
                        "name": "tenx_format"
                    }
                ],
                "label": "filter cells",
                "name": "DropletUtils",
                "outputs": [
                    {
                        "name": "barcodes_out",
                        "type": "tsv"
                    },
                    {
                        "name": "genes_out",
                        "type": "tsv"
                    },
                    {
                        "name": "matrix_out",
                        "type": "mtx"
                    },
                    {
                        "name": "plot",
                        "type": "png"
                    },
                    {
                        "name": "table",
                        "type": "tsv"
                    }
                ],
                "position": {
                    "left": 848.0098122069855,
                    "top": 640.9833374023438
                },
                "post_job_actions": {
                    "HideDatasetActionbarcodes_out": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "barcodes_out"
                    },
                    "HideDatasetActiongenes_out": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "genes_out"
                    },
                    "HideDatasetActionmatrix_out": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "matrix_out"
                    },
                    "HideDatasetActionplot": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "plot"
                    },
                    "HideDatasetActiontable": {
                        "action_arguments": {},
                        "action_type": "HideDatasetAction",
                        "output_name": "table"
                    }
                },
                "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/dropletutils/dropletutils/1.10.0+galaxy2",
                "tool_shed_repository": {
                    "changeset_revision": "a9caad671439",
                    "name": "dropletutils",
                    "owner": "iuc",
                    "tool_shed": "toolshed.g2.bx.psu.edu"
                },
                "tool_state": "{\"operation\": {\"use\": \"filter\", \"__current_case__\": 0, \"method\": {\"use\": \"emptydrops\", \"__current_case__\": 1, \"lower\": \"100\", \"fdr_thresh\": \"0.01\"}, \"outformat\": \"directory\"}, \"seed\": \"100\", \"tenx_format\": {\"use\": \"directory\", \"__current_case__\": 0, \"input\": {\"__class__\": \"ConnectedValue\"}, \"input_genes\": {\"__class__\": \"ConnectedValue\"}, \"input_barcodes\": {\"__class__\": \"ConnectedValue\"}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                "tool_version": "1.10.0+galaxy2",
                "type": "tool",
                "uuid": "2ba61d0f-82ae-4044-a7ad-41df1cf8c9b6",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "DropletUtils Barcodes",
                        "output_name": "barcodes_out",
                        "uuid": "c3275463-7e0a-4f34-a52b-eeb4dd0877b7"
                    },
                    {
                        "label": "DropletUtils Genes",
                        "output_name": "genes_out",
                        "uuid": "9aa1c3b1-c4df-42c7-b72d-f5524b06ce33"
                    },
                    {
                        "label": "DropletUtils Matrix",
                        "output_name": "matrix_out",
                        "uuid": "a7d56334-f655-4459-964f-e6f0738b8591"
                    }
                ]
            },
            "8": {
                "annotation": "",
                "id": 8,
                "input_connections": {
                    "STARsolo Barcodes": {
                        "id": 7,
                        "input_subworkflow_step_id": 1,
                        "output_name": "barcodes_out"
                    },
                    "STARsolo Genes": {
                        "id": 7,
                        "input_subworkflow_step_id": 0,
                        "output_name": "genes_out"
                    },
                    "STARsolo Matrix Gene Counts": {
                        "id": 7,
                        "input_subworkflow_step_id": 2,
                        "output_name": "matrix_out"
                    }
                },
                "inputs": [
                    {
                        "description": "",
                        "name": "Re-organize STAR-solo output"
                    }
                ],
                "label": "Re-organize STAR-solo output",
                "name": "Re-organize-STAR-solo-output",
                "outputs": [],
                "position": {
                    "left": 1125.976487011673,
                    "top": 774
                },
                "subworkflow": {
                    "a_galaxy_workflow": "true",
                    "annotation": "",
                    "comments": [],
                    "creator": [
                        {
                            "class": "Person",
                            "identifier": "https://orcid.org/0000-0002-1964-4960",
                            "name": "Lucille Delisle"
                        }
                    ],
                    "format-version": "0.1",
                    "license": "MIT",
                    "name": "Re-organize-STAR-solo-output",
                    "steps": {
                        "0": {
                            "annotation": "Collection named Genes raw or Genes filtered from STARsolo output",
                            "content_id": null,
                            "errors": null,
                            "id": 0,
                            "input_connections": {},
                            "inputs": [
                                {
                                    "description": "Collection named Genes raw or Genes filtered from STARsolo output",
                                    "name": "STARsolo Genes"
                                }
                            ],
                            "label": "STARsolo Genes",
                            "name": "Input dataset collection",
                            "outputs": [],
                            "position": {
                                "left": 0,
                                "top": 0
                            },
                            "tool_id": null,
                            "tool_state": "{\"optional\": false, \"tag\": null, \"collection_type\": \"list\"}",
                            "tool_version": null,
                            "type": "data_collection_input",
                            "uuid": "3e312de3-0895-4b46-ac51-9c1c7e341194",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "1": {
                            "annotation": "Collection named Barcodes raw or Barcodes filtered from STARsolo output",
                            "content_id": null,
                            "errors": null,
                            "id": 1,
                            "input_connections": {},
                            "inputs": [
                                {
                                    "description": "Collection named Barcodes raw or Barcodes filtered from STARsolo output",
                                    "name": "STARsolo Barcodes"
                                }
                            ],
                            "label": "STARsolo Barcodes",
                            "name": "Input dataset collection",
                            "outputs": [],
                            "position": {
                                "left": 23,
                                "top": 126
                            },
                            "tool_id": null,
                            "tool_state": "{\"optional\": false, \"tag\": null, \"collection_type\": \"list\"}",
                            "tool_version": null,
                            "type": "data_collection_input",
                            "uuid": "4f8d1d99-0adc-40a8-a53b-ce9c1c614aeb",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "2": {
                            "annotation": "Collection named Matrix Gene Counts raw or Matrix Gene Counts filtered from STARsolo output",
                            "content_id": null,
                            "errors": null,
                            "id": 2,
                            "input_connections": {},
                            "inputs": [
                                {
                                    "description": "Collection named Matrix Gene Counts raw or Matrix Gene Counts filtered from STARsolo output",
                                    "name": "STARsolo Matrix Gene Counts"
                                }
                            ],
                            "label": "STARsolo Matrix Gene Counts",
                            "name": "Input dataset collection",
                            "outputs": [],
                            "position": {
                                "left": 84,
                                "top": 249
                            },
                            "tool_id": null,
                            "tool_state": "{\"optional\": false, \"tag\": null, \"collection_type\": \"list\"}",
                            "tool_version": null,
                            "type": "data_collection_input",
                            "uuid": "266958e3-aacf-4b7f-8f74-6cbcdd5db4c0",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "3": {
                            "annotation": "",
                            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/collection_element_identifiers/collection_element_identifiers/0.0.2",
                            "errors": null,
                            "id": 3,
                            "input_connections": {
                                "input_collection": {
                                    "id": 2,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Extract element identifiers",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "txt"
                                }
                            ],
                            "position": {
                                "left": 337,
                                "top": 438
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutput": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/collection_element_identifiers/collection_element_identifiers/0.0.2",
                            "tool_shed_repository": {
                                "changeset_revision": "d3c07d270a50",
                                "name": "collection_element_identifiers",
                                "owner": "iuc",
                                "tool_shed": "toolshed.g2.bx.psu.edu"
                            },
                            "tool_state": "{\"__input_ext\": \"tsv\", \"chromInfo\": \"/cvmfs/data.galaxyproject.org/managed/len/ucsc/?.len\", \"input_collection\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "0.0.2",
                            "type": "tool",
                            "uuid": "ff023a14-a401-4ede-8dfb-2187d2d8ad84",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "4": {
                            "annotation": "",
                            "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "errors": null,
                            "id": 4,
                            "input_connections": {
                                "infile": {
                                    "id": 3,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Replace Text",
                            "outputs": [
                                {
                                    "name": "outfile",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 579,
                                "top": 63
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutfile": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "outfile"
                                }
                            },
                            "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "tool_shed_repository": {
                                "changeset_revision": "c41d78ae5fee",
                                "name": "text_processing",
                                "owner": "bgruening",
                                "tool_shed": "toolshed.g2.bx.psu.edu"
                            },
                            "tool_state": "{\"infile\": {\"__class__\": \"ConnectedValue\"}, \"replacements\": [{\"__index__\": 0, \"find_pattern\": \"(.*)\", \"replace_pattern\": \"\\\\1_genes\", \"sed_options\": null}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "9.5+galaxy2",
                            "type": "tool",
                            "uuid": "e8eed7c4-a41f-4bf7-bf5d-b4ed5023f1b8",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "5": {
                            "annotation": "",
                            "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "errors": null,
                            "id": 5,
                            "input_connections": {
                                "infile": {
                                    "id": 3,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Replace Text",
                            "outputs": [
                                {
                                    "name": "outfile",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 584,
                                "top": 205
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutfile": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "outfile"
                                }
                            },
                            "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "tool_shed_repository": {
                                "changeset_revision": "c41d78ae5fee",
                                "name": "text_processing",
                                "owner": "bgruening",
                                "tool_shed": "toolshed.g2.bx.psu.edu"
                            },
                            "tool_state": "{\"infile\": {\"__class__\": \"ConnectedValue\"}, \"replacements\": [{\"__index__\": 0, \"find_pattern\": \"(.*)\", \"replace_pattern\": \"\\\\1_barcodes\", \"sed_options\": null}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "9.5+galaxy2",
                            "type": "tool",
                            "uuid": "de152d11-daaa-4c96-ada8-7917c17e9543",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "6": {
                            "annotation": "",
                            "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "errors": null,
                            "id": 6,
                            "input_connections": {
                                "infile": {
                                    "id": 3,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Replace Text",
                            "outputs": [
                                {
                                    "name": "outfile",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 581,
                                "top": 383
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutfile": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "outfile"
                                }
                            },
                            "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2",
                            "tool_shed_repository": {
                                "changeset_revision": "c41d78ae5fee",
                                "name": "text_processing",
                                "owner": "bgruening",
                                "tool_shed": "toolshed.g2.bx.psu.edu"
                            },
                            "tool_state": "{\"__input_ext\": \"tabular\", \"chromInfo\": \"/cvmfs/data.galaxyproject.org/managed/len/ucsc/?.len\", \"infile\": {\"__class__\": \"ConnectedValue\"}, \"replacements\": [{\"__index__\": 0, \"find_pattern\": \"(.*)\", \"replace_pattern\": \"\\\\1_matrix\", \"sed_options\": null}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "9.5+galaxy2",
                            "type": "tool",
                            "uuid": "ac2f7a73-a742-4977-b902-aba871059cb6",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "7": {
                            "annotation": "",
                            "content_id": "__RELABEL_FROM_FILE__",
                            "errors": null,
                            "id": 7,
                            "input_connections": {
                                "how|labels": {
                                    "id": 4,
                                    "output_name": "outfile"
                                },
                                "input": {
                                    "id": 0,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [
                                {
                                    "description": "runtime parameter for tool Relabel identifiers",
                                    "name": "how"
                                }
                            ],
                            "label": null,
                            "name": "Relabel identifiers",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 829,
                                "top": 58
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutput": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "__RELABEL_FROM_FILE__",
                            "tool_state": "{\"how\": {\"how_select\": \"txt\", \"__current_case__\": 0, \"labels\": {\"__class__\": \"ConnectedValue\"}, \"strict\": false}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "1.1.0",
                            "type": "tool",
                            "uuid": "d627ba62-eeb9-49a3-b46f-120dd8c8e3d8",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "8": {
                            "annotation": "",
                            "content_id": "__RELABEL_FROM_FILE__",
                            "errors": null,
                            "id": 8,
                            "input_connections": {
                                "how|labels": {
                                    "id": 5,
                                    "output_name": "outfile"
                                },
                                "input": {
                                    "id": 1,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [
                                {
                                    "description": "runtime parameter for tool Relabel identifiers",
                                    "name": "how"
                                }
                            ],
                            "label": null,
                            "name": "Relabel identifiers",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 827,
                                "top": 213
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutput": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "__RELABEL_FROM_FILE__",
                            "tool_state": "{\"how\": {\"how_select\": \"txt\", \"__current_case__\": 0, \"labels\": {\"__class__\": \"ConnectedValue\"}, \"strict\": false}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "1.1.0",
                            "type": "tool",
                            "uuid": "e4fad6a7-30e3-4b66-a9bd-5f11f7ea18db",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "9": {
                            "annotation": "",
                            "content_id": "__RELABEL_FROM_FILE__",
                            "errors": null,
                            "id": 9,
                            "input_connections": {
                                "how|labels": {
                                    "id": 6,
                                    "output_name": "outfile"
                                },
                                "input": {
                                    "id": 2,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [
                                {
                                    "description": "runtime parameter for tool Relabel identifiers",
                                    "name": "how"
                                }
                            ],
                            "label": null,
                            "name": "Relabel identifiers",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 823,
                                "top": 364
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutput": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "__RELABEL_FROM_FILE__",
                            "tool_state": "{\"how\": {\"how_select\": \"txt\", \"__current_case__\": 0, \"labels\": {\"__class__\": \"ConnectedValue\"}, \"strict\": false}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "1.1.0",
                            "type": "tool",
                            "uuid": "fe80aa41-a8e4-4000-af6b-6c9713de9006",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "10": {
                            "annotation": "",
                            "content_id": "__MERGE_COLLECTION__",
                            "errors": null,
                            "id": 10,
                            "input_connections": {
                                "inputs_0|input": {
                                    "id": 9,
                                    "output_name": "output"
                                },
                                "inputs_1|input": {
                                    "id": 8,
                                    "output_name": "output"
                                },
                                "inputs_2|input": {
                                    "id": 7,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Merge collections",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 1064,
                                "top": 128
                            },
                            "post_job_actions": {
                                "HideDatasetActionoutput": {
                                    "action_arguments": {},
                                    "action_type": "HideDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "__MERGE_COLLECTION__",
                            "tool_state": "{\"advanced\": {\"conflict\": {\"duplicate_options\": \"keep_first\", \"__current_case__\": 3}}, \"inputs\": [{\"__index__\": 0, \"input\": {\"__class__\": \"ConnectedValue\"}}, {\"__index__\": 1, \"input\": {\"__class__\": \"ConnectedValue\"}}, {\"__index__\": 2, \"input\": {\"__class__\": \"ConnectedValue\"}}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "1.0.0",
                            "type": "tool",
                            "uuid": "a494a5d5-d908-448e-a406-c7f78d81c10b",
                            "when": null,
                            "workflow_outputs": []
                        },
                        "11": {
                            "annotation": "",
                            "content_id": "__APPLY_RULES__",
                            "errors": null,
                            "id": 11,
                            "input_connections": {
                                "input": {
                                    "id": 10,
                                    "output_name": "output"
                                }
                            },
                            "inputs": [],
                            "label": null,
                            "name": "Apply rules",
                            "outputs": [
                                {
                                    "name": "output",
                                    "type": "input"
                                }
                            ],
                            "position": {
                                "left": 1284,
                                "top": 128
                            },
                            "post_job_actions": {
                                "RenameDatasetActionoutput": {
                                    "action_arguments": {
                                        "newname": "All matrices in cell-ranger format"
                                    },
                                    "action_type": "RenameDatasetAction",
                                    "output_name": "output"
                                }
                            },
                            "tool_id": "__APPLY_RULES__",
                            "tool_state": "{\"input\": {\"__class__\": \"ConnectedValue\"}, \"rules\": {\"mapping\": [{\"collapsible_value\": {\"__class__\": \"RuntimeValue\"}, \"columns\": [1, 2], \"connectable\": true, \"editing\": false, \"is_workflow\": false, \"type\": \"list_identifiers\"}], \"rules\": [{\"collapsible_value\": {\"__class__\": \"RuntimeValue\"}, \"connectable\": true, \"error\": null, \"is_workflow\": false, \"type\": \"add_column_metadata\", \"value\": \"identifier0\", \"warn\": null}, {\"collapsible_value\": {\"__class__\": \"RuntimeValue\"}, \"connectable\": true, \"error\": null, \"expression\": \"(.*)_(.*)\", \"group_count\": null, \"is_workflow\": false, \"replacement\": \"\\\\1\", \"target_column\": 0, \"type\": \"add_column_regex\", \"warn\": null}, {\"collapsible_value\": {\"__class__\": \"RuntimeValue\"}, \"connectable\": true, \"error\": null, \"expression\": \"(.*)_(.*)\", \"group_count\": null, \"is_workflow\": false, \"replacement\": \"\\\\2\", \"target_column\": 0, \"type\": \"add_column_regex\", \"warn\": null}]}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                            "tool_version": "1.1.0",
                            "type": "tool",
                            "uuid": "95eb63d6-f1a2-4f0d-b426-fc46a5133471",
                            "when": null,
                            "workflow_outputs": [
                                {
                                    "label": "STARsolo cell ranger-like output",
                                    "output_name": "output",
                                    "uuid": "3a6385df-d937-4c8a-9430-9bafe0cb2f57"
                                }
                            ]
                        }
                    },
                    "tags": [],
                    "uuid": "a6ed9cb0-9618-4c23-a0cf-40d45d4a37b3"
                },
                "tool_id": null,
                "type": "subworkflow",
                "uuid": "697a68da-9cb9-469b-8102-30c3a3ee589f",
                "when": null,
                "workflow_outputs": [
                    {
                        "label": "Seurat input for gene expression (filtered)",
                        "output_name": "STARsolo cell ranger-like output",
                        "uuid": "6cb072df-9e26-456b-ab4f-bc95345b02b4"
                    }
                ]
            }
        },
        "tags": [
            "name:single-cell"
        ],
        "uuid": "677cbe1a-f944-4c6f-8a7e-118030b1d567",
        "version": 1,
        "release": "0.6.3"
    },
    "workflow_job_input": {
        "fastq PE collection": {
            "class": "Collection",
            "collection_type": "list",
            "elements": [
                {
                    "class": "File",
                    "identifier": "todo_element_name",
                    "path": "todo_test_data_path.ext"
                }
            ]
        },
        "reference genome": "todo_param_value",
        "gtf": {
            "class": "File",
            "path": "todo_test_data_path.ext"
        },
        "cellranger_barcodes_3M-february-2018.txt": {
            "class": "File",
            "path": "todo_test_data_path.ext"
        },
        "Barcode Size is same size of the Read": "todo_param_value"
    },
    "readme": "# Single-Cell RNA-seq Preprocessing: 10X Genomics Data to Analysis-Ready Formats\n\nThese workflows are inspired by the [training material](https://training.galaxyproject.org/training-material/topics/single-cell/tutorials/scrna-preprocessing-tenx/tutorial.html). The output is in a 'bundle' format with three files (one matrix, one with genes, one with barcodes) which is similar to the cellranger output format, and is compatible with any Read10X function (Seurat or Scanpy). There are 2 types of output collections: either one collection with all matrices, one collection with all genes and one collection with all barcodes (compatible with post processing in galaxy) or a single nested collection with one sub-collection per sample with the 3 files (easier for local downstream analysis).\n\nBoth workflows are designed for fastqs from 10X libraries v3. One is for regular 10X library (one library per sample), while the other one is for CellPlex 10X library which allows to multiplex samples using CMOs (see [this blog article](https://www.10xgenomics.com/blog/answering-your-questions-about-sample-multiplexing-for-single-cell-gene-expression)).\n\n## Input datasets\n\n- Specific for each experiment:\n    - For both workflows: you need a list of pairs of fastqs with gene expression.\n    - For CellPlex: you need in addition a list of pairs of fastqs with CMO.\n    - For CellPlex: you need a list of csv which describes samples and CMO used:\n        - first column is the sequence and second column is the name\n    /!\\ The order of samples need to be exactly the same between the collection of fastqs of CMO and the collection of csv.\n\n- Common for all experiments:\n    - Gene annotations: A gtf file with gene locations\n    - List of barcodes used by 10X. You can download it at https://zenodo.org/record/3457880/files/3M-february-2018.txt.gz\n\n## Input values\n\n- reference genome: this genome needs to be available for STAR\n- Barcode Size is same size of the Read: if the length of your R1 of GEX matches the size of cell barcode + UMI set to true. If your R1 contains trailling A, put false.\n- number of cells: If you make it too large no cell barcode correction will be performed to demultiplex CMOs.\n\n## Processing\n- Gene expression processing:\n    - Reads are aligned to the genome, asigned to genes, cell barcode and UMI with STAR Solo\n    - MultiQC report the mapping rate and the number of reads attributed to genes\n    - The output of STAR Solo is filtered with Droplet Utils to remove cellular barcodes which are probably empty.\n    - The output of Droplet Utils is reorganized to be:\n```\nMain Collection:\n    - Sample 1:\n        - matrix.mtx\n        - barcodes.tsv\n        - genes.tsv\n    - Sample 2:\n        - matrix.mtx\n        - barcodes.tsv\n        - genes.tsv\n...\n```\nFor the CellPlex workflow:\n- CMO processing:\n    - CITE-Seq Count is used to asign reads and generate a matrix where 'genes' are the CMO and 'unmapped'.\n    - Cellular barcodes are translated to match the cellular barcodes of Gene expression see [this article](https://kb.10xgenomics.com/hc/en-us/articles/360031133451-Why-is-there-a-discrepancy-in-the-3M-february-2018-txt-barcode-whitelist-).\n    - Reorganize the output with UMI matrices to match the same structure as gene expression matrices.\n\n## Test data\n\nThe test dataset has been produced to make it as small as possible in order to make the workflow pass on CI.\n\n- The CMO reads come from [zenodo](https://zenodo.org/records/10229382) and have been sampled to 0.1 with seqtk.\n- The GEX reads come from SRR13948489 but have been subsetted to the cells selected in the above zenodo.\n",
    "changelog": "# Changelog\n\n## [0.6.3] - 2025-06-09\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11a+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11b+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy2`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.5+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.5+galaxy2`\n\n## [0.6.2] - 2025-03-10\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy3`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.5+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.5+galaxy0`\n\n## [0.6.1] - 2025-03-03\n\n### Added\n\n- Added individual DropletUtils outputs for processing with scanpy tools\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.24.1+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.27+galaxy0`\n\n## [0.5] - 2024-09-25\n\n### Manual update\n- `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11a+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11a+galaxy1`\n- `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.11+galaxy1` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/multiqc/multiqc/1.24.1+galaxy0`\n\n## [0.4] - 2024-04-08\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy1`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy0` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy1`\n\n## [0.3] - 2024-02-12\n\n### Automatic update\n- `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.10b+galaxy4` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/rna_starsolo/rna_starsolo/2.7.11a+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/1.1.2` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_replace_in_line/9.3+galaxy0`\n- `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.2` was updated to `toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.3+galaxy0`\n\n## [0.2] - 2024-02-05\n\n### Tool updates\n- `toolshed.g2.bx.psu.edu/repos/iuc/rgrnastar/rna_star/2.7.10b+galaxy3` was updated to `toolshed.g2.bx.psu.edu/repos/iuc/rgrnastar/rna_star/2.7.10b+galaxy4`\n- `pick_value` was replaced by `toolshed.g2.bx.psu.edu/repos/iuc/pick_value/pick_value/0.2.0`\n\n\n\n## [0.1] - 2023-12-21\n\nFirst release.\n",
    "diagrams": "# Workflow diagrams\n\n## Single-Cell RNA-seq Preprocessing: 10X Genomics v3 to Seurat and Scanpy Compatible Format\n\n```mermaid\ngraph LR\n0[\"\u2139\ufe0f fastq PE collection\"]@{ shape: docs }\n1[\"\u2139\ufe0f reference genome\"]@{ shape: lean-l }\n2[\"\u2139\ufe0f gtf\"]@{ shape: doc }\n3[\"\u2139\ufe0f cellranger_barcodes_3M-february-2018.txt\"]@{ shape: doc }\n4[\"\u2139\ufe0f Barcode Size is same size of the Read\"]@{ shape: lean-l }\n5[\"RNA STARSolo\"]@{ shape: process }\n1 --> 5\n2 --> 5\n0 --> 5\n4 --> 5\n3 --> 5\n6[\"multiQC\"]@{ shape: process }\n5 --> 6\n5 --> 6\n7[\"filter cells\"]@{ shape: process }\n5 --> 7\n5 --> 7\n5 --> 7\n8[\"\ud83d\udee0\ufe0f Re-organize STAR-solo output\"]@{ shape: subprocess }\n7 --> 8\n7 --> 8\n7 --> 8\n```\n\n## Re-organize-STAR-solo-output\n\n```mermaid\ngraph LR\n0[\"\u2139\ufe0f STARsolo Genes\"]@{ shape: docs }\n1[\"\u2139\ufe0f STARsolo Barcodes\"]@{ shape: docs }\n2[\"\u2139\ufe0f STARsolo Matrix Gene Counts\"]@{ shape: docs }\n3[\"Extract element identifiers\"]@{ shape: process }\n2 --> 3\n4[\"Replace Text\"]@{ shape: process }\n3 --> 4\n5[\"Replace Text\"]@{ shape: process }\n3 --> 5\n6[\"Replace Text\"]@{ shape: process }\n3 --> 6\n7[\"Relabel identifiers\"]@{ shape: process }\n4 --> 7\n0 --> 7\n8[\"Relabel identifiers\"]@{ shape: process }\n5 --> 8\n1 --> 8\n9[\"Relabel identifiers\"]@{ shape: process }\n6 --> 9\n2 --> 9\n10[\"Merge collections\"]@{ shape: process }\n9 --> 10\n8 --> 10\n7 --> 10\n11[\"Apply rules\"]@{ shape: process }\n10 --> 11\n```\n",
    "diagram_svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1100 580\" role=\"img\" aria-label=\"scRNA-seq 10X v3 preprocessing workflow diagram\">\n  <title>Single-Cell RNA-seq Preprocessing: 10X Genomics v3</title>\n  <desc>Aligns 10X v3 scRNA-seq FASTQ files with STARsolo, filters cells with DropletUtils, and reformats output for Seurat/Scanpy compatibility.</desc>\n\n  <defs>\n    <pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\">\n      <path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"#c5d5e4\" stroke-width=\"0.5\"/>\n    </pattern>\n    <pattern id=\"grid-major\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\n      <rect width=\"100\" height=\"100\" fill=\"url(#grid)\"/>\n      <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#b0c4d8\" stroke-width=\"1\"/>\n    </pattern>\n    <style>\n      .connection { stroke: #25537b; stroke-width: 4; fill: none; stroke-linecap: round; }\n      .connection-qc { stroke: #25537b; stroke-width: 3; fill: none; stroke-linecap: round; stroke-dasharray: 5 3; }\n      .connection-secondary { stroke: #25537b; stroke-width: 3; fill: none; stroke-linecap: round; }\n      .node-card { filter: drop-shadow(1px 2px 3px rgba(0,0,0,0.15)); }\n    </style>\n  </defs>\n\n  <rect width=\"1100\" height=\"580\" fill=\"#f8f9fa\"/>\n  <rect width=\"1100\" height=\"580\" fill=\"url(#grid-major)\"/>\n  <rect x=\"0\" y=\"0\" width=\"1100\" height=\"45\" fill=\"#25537b\"/>\n  <text x=\"20\" y=\"28\" font-family=\"system-ui, sans-serif\" font-size=\"16\" font-weight=\"600\" fill=\"white\">scRNA-seq: 10X Genomics v3 FASTQ to Matrix</text>\n\n  <!-- CONNECTIONS -->\n  <!-- FASTQ PE -> STARsolo -->\n  <path class=\"connection\" d=\"M 180 115 C 260 115, 310 165, 390 165\"/>\n  <!-- Reference genome -> STARsolo -->\n  <path class=\"connection-secondary\" d=\"M 180 205 C 260 205, 320 185, 390 185\"/>\n  <!-- GTF -> STARsolo -->\n  <path class=\"connection-secondary\" d=\"M 180 295 C 260 295, 320 205, 390 205\"/>\n  <!-- Barcodes -> STARsolo -->\n  <path class=\"connection-secondary\" d=\"M 180 385 C 260 385, 320 220, 390 220\"/>\n  <!-- STARsolo -> DropletUtils -->\n  <path class=\"connection\" d=\"M 590 195 C 630 195, 640 250, 680 250\"/>\n  <!-- STARsolo -> MultiQC -->\n  <path class=\"connection-qc\" d=\"M 590 215 C 630 215, 630 420, 680 420\"/>\n  <!-- DropletUtils -> Reorganize -->\n  <path class=\"connection\" d=\"M 880 250 C 910 250, 910 195, 930 195\"/>\n  <!-- Reorganize -> Seurat output -->\n  <path class=\"connection\" d=\"M 1000 195 C 1015 195, 1020 170, 1030 170\"/>\n\n  <!-- INPUT NODES -->\n  <!-- FASTQ PE -->\n  <g class=\"node-card\" transform=\"translate(0,75)\">\n    <rect width=\"180\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"180\" height=\"28\" rx=\"4\" fill=\"#ffd700\"/>\n    <rect x=\"0\" y=\"14\" width=\"180\" height=\"14\" fill=\"#ffd700\"/>\n    <text x=\"90\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"#2C3143\" text-anchor=\"middle\">FASTQ PE Collection</text>\n    <text x=\"90\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">Paired-end reads</text>\n    <text x=\"90\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">per sample</text>\n    <circle cx=\"180\" cy=\"45\" r=\"6\" fill=\"#ffd700\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- Reference genome -->\n  <g class=\"node-card\" transform=\"translate(0,165)\">\n    <rect width=\"180\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"180\" height=\"28\" rx=\"4\" fill=\"#ffd700\"/>\n    <rect x=\"0\" y=\"14\" width=\"180\" height=\"14\" fill=\"#ffd700\"/>\n    <text x=\"90\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"#2C3143\" text-anchor=\"middle\">Reference Genome</text>\n    <text x=\"90\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">STAR-indexed</text>\n    <text x=\"90\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">reference genome</text>\n    <circle cx=\"180\" cy=\"45\" r=\"6\" fill=\"#ffd700\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- GTF -->\n  <g class=\"node-card\" transform=\"translate(0,255)\">\n    <rect width=\"180\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"180\" height=\"28\" rx=\"4\" fill=\"#ffd700\"/>\n    <rect x=\"0\" y=\"14\" width=\"180\" height=\"14\" fill=\"#ffd700\"/>\n    <text x=\"90\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"#2C3143\" text-anchor=\"middle\">Gene Annotations</text>\n    <text x=\"90\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">GTF gene</text>\n    <text x=\"90\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">annotation file</text>\n    <circle cx=\"180\" cy=\"45\" r=\"6\" fill=\"#ffd700\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- Cell Barcodes -->\n  <g class=\"node-card\" transform=\"translate(0,345)\">\n    <rect width=\"180\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"180\" height=\"28\" rx=\"4\" fill=\"#ffd700\"/>\n    <rect x=\"0\" y=\"14\" width=\"180\" height=\"14\" fill=\"#ffd700\"/>\n    <text x=\"90\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"#2C3143\" text-anchor=\"middle\">Cell Barcodes</text>\n    <text x=\"90\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">10X v3 barcode</text>\n    <text x=\"90\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">whitelist (3M)</text>\n    <circle cx=\"180\" cy=\"45\" r=\"6\" fill=\"#ffd700\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- PROCESSING NODES -->\n  <!-- STARsolo -->\n  <g class=\"node-card\" transform=\"translate(390,145)\">\n    <rect width=\"200\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"200\" height=\"28\" rx=\"4\" fill=\"#25537b\"/>\n    <rect x=\"0\" y=\"14\" width=\"200\" height=\"14\" fill=\"#25537b\"/>\n    <text x=\"100\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"white\" text-anchor=\"middle\">RNA STARSolo</text>\n    <text x=\"100\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">Align reads, quantify</text>\n    <text x=\"100\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">gene expression per cell</text>\n    <circle cx=\"0\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n    <circle cx=\"200\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- DropletUtils -->\n  <g class=\"node-card\" transform=\"translate(680,210)\">\n    <rect width=\"200\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"200\" height=\"28\" rx=\"4\" fill=\"#25537b\"/>\n    <rect x=\"0\" y=\"14\" width=\"200\" height=\"14\" fill=\"#25537b\"/>\n    <text x=\"100\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"10\" font-weight=\"600\" fill=\"white\" text-anchor=\"middle\">DropletUtils</text>\n    <text x=\"100\" y=\"55\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">EmptyDrops cell calling</text>\n    <text x=\"100\" y=\"67\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#868e96\" text-anchor=\"middle\">and quality filtering</text>\n    <circle cx=\"0\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n    <circle cx=\"200\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- Reorganize output (subworkflow) -->\n  <g class=\"node-card\" transform=\"translate(930,155)\">\n    <rect width=\"70\" height=\"90\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"70\" height=\"28\" rx=\"4\" fill=\"#25537b\"/>\n    <rect x=\"0\" y=\"14\" width=\"70\" height=\"14\" fill=\"#25537b\"/>\n    <text x=\"35\" y=\"18\" font-family=\"system-ui, sans-serif\" font-size=\"9\" font-weight=\"600\" fill=\"white\" text-anchor=\"middle\">Reformat</text>\n    <text x=\"35\" y=\"53\" font-family=\"system-ui, sans-serif\" font-size=\"8\" fill=\"#868e96\" text-anchor=\"middle\">Read10X</text>\n    <text x=\"35\" y=\"64\" font-family=\"system-ui, sans-serif\" font-size=\"8\" fill=\"#868e96\" text-anchor=\"middle\">compatible</text>\n    <circle cx=\"0\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n    <circle cx=\"70\" cy=\"45\" r=\"6\" fill=\"#25537b\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- OUTPUT NODES -->\n  <!-- Seurat/Scanpy output -->\n  <g class=\"node-card\" transform=\"translate(1030,145)\">\n    <rect width=\"60\" height=\"50\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"60\" height=\"22\" rx=\"4\" fill=\"#f97316\"/>\n    <rect x=\"0\" y=\"11\" width=\"60\" height=\"11\" fill=\"#f97316\"/>\n    <text x=\"30\" y=\"15\" font-family=\"system-ui, sans-serif\" font-size=\"8\" font-weight=\"600\" fill=\"white\" text-anchor=\"middle\">Matrix</text>\n    <text x=\"30\" y=\"38\" font-family=\"system-ui, sans-serif\" font-size=\"7\" fill=\"#868e96\" text-anchor=\"middle\">Seurat /</text>\n    <text x=\"30\" y=\"47\" font-family=\"system-ui, sans-serif\" font-size=\"7\" fill=\"#868e96\" text-anchor=\"middle\">Scanpy</text>\n    <circle cx=\"0\" cy=\"25\" r=\"6\" fill=\"#f97316\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- MultiQC Report -->\n  <g class=\"node-card\" transform=\"translate(680,395)\">\n    <rect width=\"120\" height=\"60\" rx=\"4\" fill=\"white\" stroke=\"#e9ecef\" stroke-width=\"1\"/>\n    <rect width=\"120\" height=\"22\" rx=\"4\" fill=\"#10b981\"/>\n    <rect x=\"0\" y=\"11\" width=\"120\" height=\"11\" fill=\"#10b981\"/>\n    <text x=\"60\" y=\"15\" font-family=\"system-ui, sans-serif\" font-size=\"9\" font-weight=\"600\" fill=\"white\" text-anchor=\"middle\">MultiQC Report</text>\n    <text x=\"60\" y=\"42\" font-family=\"system-ui, sans-serif\" font-size=\"8\" fill=\"#868e96\" text-anchor=\"middle\">Alignment QC stats</text>\n    <circle cx=\"0\" cy=\"30\" r=\"6\" fill=\"#10b981\" stroke=\"white\" stroke-width=\"2\"/>\n  </g>\n\n  <!-- LEGEND -->\n  <g transform=\"translate(20,540)\">\n    <rect x=\"0\" y=\"0\" width=\"8\" height=\"8\" rx=\"2\" fill=\"#ffd700\"/>\n    <text x=\"14\" y=\"8\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#495057\">Input</text>\n    <line x1=\"65\" y1=\"4\" x2=\"105\" y2=\"4\" stroke=\"#25537b\" stroke-width=\"3\" stroke-linecap=\"round\"/>\n    <text x=\"112\" y=\"8\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#495057\">Data flow</text>\n    <line x1=\"180\" y1=\"4\" x2=\"220\" y2=\"4\" stroke=\"#25537b\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-dasharray=\"5 3\"/>\n    <text x=\"227\" y=\"8\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#495057\">QC / plot</text>\n    <rect x=\"290\" y=\"0\" width=\"8\" height=\"8\" rx=\"2\" fill=\"#f97316\"/>\n    <text x=\"304\" y=\"8\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#495057\">Output</text>\n    <rect x=\"355\" y=\"0\" width=\"8\" height=\"8\" rx=\"2\" fill=\"#10b981\"/>\n    <text x=\"369\" y=\"8\" font-family=\"system-ui, sans-serif\" font-size=\"9\" fill=\"#495057\">Report / QC</text>\n  </g>\n</svg>",
    "updated": "2025-06-09T00:00:00",
    "trsID": "#workflow/github.com/iwc-workflows/fastq-to-matrix-10x/scrna-seq-fastq-to-matrix-10x-v3",
    "iwcID": "fastq-to-matrix-10x-scrna-seq-fastq-to-matrix-10x-v3",
    "dockstore_id": 24784,
    "categories": [],
    "collections": [
        "Transcriptomics",
        "Single Cell"
    ],
    "doi": "10.5281/zenodo.15078477",
    "tests": [
        {
            "doc": "Test outline for scrna-seq-fastq-to-matrix-10x-v3.ga",
            "job": {
                "fastq PE collection": {
                    "class": "Collection",
                    "collection_type": "list:paired",
                    "elements": [
                        {
                            "class": "Collection",
                            "type": "paired",
                            "identifier": "subsample",
                            "elements": [
                                {
                                    "identifier": "forward",
                                    "class": "File",
                                    "location": "https://zenodo.org/records/10412836/files/GEX_R1.fastqsanger.gz",
                                    "filetype": "fastqsanger.gz",
                                    "hashes": [
                                        {
                                            "hash_function": "SHA-1",
                                            "hash_value": "c23fb98763b959fbf4ac51fc5ef6e690e378ef0d"
                                        }
                                    ]
                                },
                                {
                                    "identifier": "reverse",
                                    "class": "File",
                                    "location": "https://zenodo.org/records/10412836/files/GEX_R2.fastqsanger.gz",
                                    "filetype": "fastqsanger.gz",
                                    "hashes": [
                                        {
                                            "hash_function": "SHA-1",
                                            "hash_value": "bba127e369535d226290a74858efafd7f359168e"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                "reference genome": "dm6",
                "Barcode Size is same size of the Read": false,
                "gtf": {
                    "class": "File",
                    "location": "https://zenodo.org/record/6457007/files/Drosophila_melanogaster.BDGP6.32.109_UCSC.gtf.gz",
                    "decompress": true,
                    "filetype": "gtf",
                    "hashes": [
                        {
                            "hash_function": "SHA-1",
                            "hash_value": "3cbdd2f0eed28bd10af66cb83aa3f6d688779d51"
                        }
                    ]
                },
                "cellranger_barcodes_3M-february-2018.txt": {
                    "class": "File",
                    "filetype": "tabular",
                    "hashes": [
                        {
                            "hash_function": "SHA-1",
                            "hash_value": "f4bc47a31f6aba7aa45c8ebddad1d5ea51fb4797"
                        }
                    ],
                    "location": "https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/scRNAseq/fastq-to-matrix-10x/test-data/all_cell_barcodes_both_versions.txt"
                }
            },
            "outputs": {
                "MultiQC on input dataset(s): Webpage": {
                    "asserts": {
                        "has_text_matching": {
                            "expression": "<span class=\"val\">33.[0-9]<span class=['\"]mqc_small_space['\"]>"
                        }
                    }
                },
                "Seurat input for gene expression (filtered)": {
                    "attributes": {
                        "collection_type": "list:list"
                    },
                    "element_tests": {
                        "subsample": {
                            "elements": {
                                "matrix": {
                                    "asserts": {
                                        "has_line": {
                                            "line": "23932 3 1171"
                                        }
                                    }
                                },
                                "barcodes": {
                                    "asserts": {
                                        "has_line": {
                                            "line": "CACATGATCATAAGGA"
                                        }
                                    }
                                },
                                "genes": {
                                    "asserts": {
                                        "has_line": {
                                            "line": "FBgn0250732\tgfzf"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    ]
}