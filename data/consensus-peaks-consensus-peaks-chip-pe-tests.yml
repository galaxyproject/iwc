- doc: Test for consensus-peaks-chip-pe.ga
  job:
    Minimum number of overlap: 2
    bin_size: 50
    effective_genome_size: 1870000000
    n rmDup BAMPE:
      class: Collection
      collection_type: list
      elements:
      - class: File
        dbkey: mm10
        filetype: bam
        hashes:
        - hash_function: SHA-1
          hash_value: 531c7f2726f25c23e1c153df9bc6a6e3fa4b91e7
        identifier: rep1
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep1.bam
      - class: File
        dbkey: mm10
        filetype: bam
        hashes:
        - hash_function: SHA-1
          hash_value: 37b8544b15f08e7ccf36ff0b71894c935090f0b1
        identifier: rep2
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep2.bam
      - class: File
        dbkey: mm10
        filetype: bam
        hashes:
        - hash_function: SHA-1
          hash_value: 5174415aa59d740664e17238cd48143a257a7bc0
        identifier: rep3
        location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/epigenetics/consensus-peaks/test-data/rep3.bam
  outputs:
    average_bigwig:
      asserts:
        has_size:
          delta: 100
          value: 1290
    individual_macs2_narrowPeaks:
      element_tests:
        rep1:
          asserts:
            has_n_lines:
              n: 3
        rep2:
          asserts:
            has_n_lines:
              n: 3
        rep3:
          asserts:
            has_n_lines:
              n: 2
    merged_macs2_narrowPeaks:
      asserts:
        has_n_lines:
          n: 4
    multiqc_output:
      asserts:
        has_text:
          text: 'MACS2: Fragment Length'
    shared_narrowPeak:
      asserts:
        has_n_lines:
          n: 2
