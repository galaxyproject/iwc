- doc: Test outline for mgnify-amplicon-pipeline-v5-rrna-prediction.ga
  job:
    Clan information file:
      class: File
      filetype: auto
      location: ftp://ftp.ebi.ac.uk/pub/databases/metagenomics/pipeline-5.0/ref-dbs/rfam_models/ribosomal_models/ribo.claninfo
    Processed sequences:
      class: Collection
      collection_type: list
      elements:
      - class: File
        filetype: fasta
        identifier: DRR010481_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/DRR010481_SE.fasta
      - class: File
        filetype: fasta
        identifier: ERR2715528_MERGED_FASTQ.fasta
        location: https://zenodo.org/records/13710235/files/ERR2715528_PE.fasta
  outputs:
    LSU FASTA files:
      element_tests:
        DRR010481_FASTQ.fasta:
          compare: contains
          location: https://zenodo.org/records/13710235/files/DRR010481_LSU.fasta
    LSU OTU tables (SILVA DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    LSU OTU tables in HDF5 format (SILVA DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
    LSU OTU tables in JSON format (SILVA DB):
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    LSU and SSU BED regions:
      element_tests:
        DRR010481_FASTQ.fasta:
          location: https://zenodo.org/records/13710235/files/DRR010481.bed
        ERR2715528_MERGED_FASTQ.fasta:
          location: https://zenodo.org/records/13710235/files/ERR2715528.bed
    LSU taxonomic abundance pie charts (SILVA DB):
      asserts:
      - text: DRR010481_FASTQ_fasta
        that: has_text
    LSU taxonomic classifications using SILVA DB:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: SILVA
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    SSU FASTA files:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          compare: contains
          location: https://zenodo.org/records/13710235/files/ERR2715528_SSU.fasta
    SSU OTU tables (SILVA DB):
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    SSU OTU tables in HDF5 format (SILVA DB):
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
    SSU OTU tables in JSON format (SILVA DB):
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    SSU taxonomic abundance pie charts (SILVA DB):
      asserts:
      - text: ERR2715528_MERGED_FASTQ_fasta
        that: has_text
    SSU taxonomic classifications using SILVA DB:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: SILVA
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
