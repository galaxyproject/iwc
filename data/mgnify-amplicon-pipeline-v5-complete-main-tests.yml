- doc: Test outline for mgnify-amplicon-pipeline-v5-complete.ga
  job:
    Clan information file:
      class: File
      filetype: auto
      location: ftp://ftp.ebi.ac.uk/pub/databases/metagenomics/pipeline-5.0/ref-dbs/rfam_models/ribosomal_models/ribo.claninfo
    SRA accession list:
      class: File
      filetype: csv
      location: https://zenodo.org/records/13710235/files/accessions.csv
  outputs:
    ITS FASTA files:
      element_tests:
        DRR010481:
          compare: contains
          location: https://zenodo.org/records/13710235/files/DRR010481_ITS.fasta
        ERR2715528:
          compare: contains
          location: https://zenodo.org/records/13710235/files/ERR2715528_ITS.fasta
    ITS OTU tables (ITSoneDB):
      element_tests:
        DRR010481:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
        ERR2715528:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    ITS OTU tables (UNITE DB):
      element_tests:
        DRR010481:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
        ERR2715528:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    ITS OTU tables in HDF5 format (ITSoneDB):
      element_tests:
        DRR010481:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
        ERR2715528:
          asserts:
          - delta: 10000
            that: has_size
            value: 72000
    ITS OTU tables in HDF5 format (UNITE DB):
      element_tests:
        DRR010481:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
        ERR2715528:
          asserts:
          - delta: 10000
            that: has_size
            value: 72000
    ITS OTU tables in JSON format (ITSoneDB):
      element_tests:
        DRR010481:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
        ERR2715528:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    ITS OTU tables in JSON format (UNITE DB):
      element_tests:
        DRR010481:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
        ERR2715528:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    ITS UNITE DB phylum level taxonomic abundance summary table:
      asserts:
      - text: "superkingdom\tkingdom\tphylum\tDRR010481\tERR2715528"
        that: has_text
      - n: 5
        that: has_n_columns
      - delta: 4
        n: 13
        that: has_n_lines
    ITS UNITE DB taxonomic abundance summary table:
      asserts:
      - text: "#SampleID\tDRR010481\tERR2715528"
        that: has_text
      - n: 3
        that: has_n_columns
      - delta: 19
        n: 130
        that: has_n_lines
    ITS taxonomic abundance pie charts (ITSoneDB):
      asserts:
      - text: DRR010481
        that: has_text
      - text: ERR2715528
        that: has_text
    ITS taxonomic abundance pie charts (UNITE DB):
      asserts:
      - text: DRR010481
        that: has_text
      - text: ERR2715528
        that: has_text
    ITS taxonomic classifications using ITSoneDB:
      element_tests:
        DRR010481:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: ITSone
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
        ERR2715528:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: ITSone
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    ITS taxonomic classifications using UNITE DB:
      element_tests:
        DRR010481:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: UNITE
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
        ERR2715528:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: UNITE
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    ITSoneDB phylum level taxonomic abundance summary table:
      asserts:
      - text: "superkingdom\tkingdom\tphylum\tDRR010481\tERR2715528"
        that: has_text
      - n: 5
        that: has_n_columns
      - delta: 4
        n: 10
        that: has_n_lines
    ITSoneDB taxonomic abundance summary table:
      asserts:
      - text: "#SampleID\tDRR010481\tERR2715528"
        that: has_text
      - n: 3
        that: has_n_columns
      - delta: 17
        n: 117
        that: has_n_lines
    LSU FASTA files:
      element_tests:
        DRR010481:
          compare: contains
          location: https://zenodo.org/records/13710235/files/DRR010481_LSU.fasta
    LSU OTU tables (SILVA DB):
      element_tests:
        DRR010481:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    LSU OTU tables in HDF5 format (SILVA DB):
      element_tests:
        DRR010481:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
    LSU OTU tables in JSON format (SILVA DB):
      element_tests:
        DRR010481:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    LSU and SSU BED regions:
      element_tests:
        DRR010481:
          location: https://zenodo.org/records/13710235/files/DRR010481.bed
        ERR2715528:
          location: https://zenodo.org/records/13710235/files/ERR2715528.bed
    LSU phylum level taxonomic abundance summary table:
      asserts:
      - text: "superkingdom\tkingdom\tphylum\tDRR010481"
        that: has_text
      - n: 4
        that: has_n_columns
      - delta: 4
        n: 6
        that: has_n_lines
    LSU taxonomic abundance pie charts (SILVA DB):
      asserts:
      - text: DRR010481
        that: has_text
    LSU taxonomic abundance summary table:
      asserts:
      - text: "#SampleID\tDRR010481"
        that: has_text
      - n: 2
        that: has_n_columns
      - delta: 4
        n: 6
        that: has_n_lines
    LSU taxonomic classifications using SILVA DB:
      element_tests:
        DRR010481:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: SILVA
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    Paired-end MultiQC report:
      asserts:
      - text: ERR2715528_ambiguous_base_filtering
        that: has_text
      - text: ERR2715528_initial_reads
        that: has_text
      - text: ERR2715528_length_filtering
        that: has_text
      - text: ERR2715528_trimming
        that: has_text
      - text: '92.2'
        that: has_text
    Paired-end MultiQC statistics:
      location: https://zenodo.org/records/14746033/files/general_stats_PE.tabular
    Paired-end post quality control FASTA files:
      element_tests:
        ERR2715528:
          location: https://zenodo.org/records/13710235/files/ERR2715528_PE.fasta
    SSU FASTA files:
      element_tests:
        ERR2715528:
          compare: contains
          location: https://zenodo.org/records/13710235/files/ERR2715528_SSU.fasta
    SSU OTU tables (SILVA DB):
      element_tests:
        ERR2715528:
          asserts:
          - text: '# Constructed from biom file'
            that: has_text
          - text: '# OTU ID'
            that: has_text
          - text: Unspecified
            that: has_text
          - text: taxonomy
            that: has_text
          - text: taxid
            that: has_text
          - comment: '#'
            n: 4
            that: has_n_columns
    SSU OTU tables in HDF5 format (SILVA DB):
      element_tests:
        ERR2715528:
          asserts:
          - delta: 10000
            that: has_size
            value: 37000
    SSU OTU tables in JSON format (SILVA DB):
      element_tests:
        ERR2715528:
          asserts:
          - text: '"type": "OTU table"'
            that: has_text
    SSU phylum level taxonomic abundance summary table:
      asserts:
      - text: "superkingdom\tkingdom\tphylum\tERR2715528"
        that: has_text
      - n: 4
        that: has_n_columns
      - delta: 4
        n: 12
        that: has_n_lines
    SSU taxonomic abundance pie charts (SILVA DB):
      asserts:
      - text: ERR2715528
        that: has_text
    SSU taxonomic abundance summary table:
      asserts:
      - text: "#SampleID\tERR2715528"
        that: has_text
      - n: 2
        that: has_n_columns
      - delta: 4
        n: 13
        that: has_n_lines
    SSU taxonomic classifications using SILVA DB:
      element_tests:
        ERR2715528:
          asserts:
          - text: '# mapseq v1.2.6 (Jan 20 2023)'
            that: has_text
          - text: SILVA
            that: has_text
          - comment: '#'
            n: 15
            that: has_n_columns
    Single-end MultiQC report:
      asserts:
      - text: DRR010481_ambiguous_base_filtering
        that: has_text
      - text: '84.0'
        that: has_text
      - text: DRR010481_initial_reads
        that: has_text
      - text: '84.8'
        that: has_text
      - text: DRR010481_length_filtering
        that: has_text
      - text: DRR010481_trimming
        that: has_text
    Single-end MultiQC statistics:
      asserts:
      - text: "DRR010481_ambiguous_base_filtering\t84.0\t47.0\t242.02\t244\t40.0\t\
          2.4999999999999998e-05"
        that: has_text
      - text: "DRR010481_initial_reads\t84.84848484848484\t47.0\t545.0454545454545\t\
          550\t40.0\t3.2999999999999996e-05"
        that: has_text
      - text: "DRR010481_length_filtering\t84.0\t47.0\t242.02\t244\t40.0\t2.4999999999999998e-05"
        that: has_text
      - text: "DRR010481_trimming\t84.0\t47.0\t242.02\t244\t40.0\t2.4999999999999998e-05"
        that: has_text
    Single-end post quality control FASTA files:
      element_tests:
        DRR010481:
          location: https://zenodo.org/records/13710235/files/DRR010481_SE.fasta
