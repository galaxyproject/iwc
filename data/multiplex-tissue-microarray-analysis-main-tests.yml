- doc: Test outline for GBCC-TMA-L2-workflow
  job:
    Manual Gates:
      class: File
      filetype: csv
      location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/imaging/tissue-microarray-analysis/multiplex-tissue-microarray-analysis/test-data/Manual
        Gates.csv
    Markers File:
      class: File
      filetype: csv
      location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/imaging/tissue-microarray-analysis/multiplex-tissue-microarray-analysis/test-data/Markers
        File.csv
    Phenotype workflow:
      class: File
      filetype: csv
      location: https://raw.githubusercontent.com/galaxyproject/iwc/main/workflows/imaging/tissue-microarray-analysis/multiplex-tissue-microarray-analysis/test-data/Phenotype
        workflow.csv
    Registered Images:
      class: Collection
      collection_type: list
      elements:
      - class: File
        filetype: ome.tiff
        identifier: image
        location: https://zenodo.org/records/15710828/files/Registered%20Images_registered%20image.ome.tiff?download=1
  outputs:
    Background subtracted images:
      element_tests:
        image:
          asserts:
          - has_image_channels:
              channels: 7
    Background subtracted markers:
      element_tests:
        image:
          asserts:
          - has_line:
              line: marker_name,background,exposure
          - has_line:
              line: DNA_7,,
    Interaction Matrix Anndata:
      element_tests:
        image:
          asserts:
          - has_h5_keys:
              keys: obs/Area,obs/CellID,obs/Eccentricity,obs/Extent,obs/MajorAxisLength,obs/MinorAxisLength,obs/Orientation,obs/Solidity,obs/X_centroid,obs/Y_centroid,obs/imageid,obs/imageid/categories,obs/imageid/codes
    Interaction Matrix Plot:
      element_tests:
        image:
          asserts:
          - has_size:
              delta: 20K
              size: 43K
    Merged anndata:
      asserts:
      - has_h5_keys:
          keys: obs/Area,obs/CellID,obs/Eccentricity,obs/Extent,obs/MajorAxisLength,obs/MinorAxisLength,obs/Orientation,obs/Solidity,obs/X_centroid,obs/Y_centroid,obs/imageid,obs/imageid/categories,obs/imageid/codes
    Multisample barplot:
      asserts:
      - has_size:
          delta: 30K
          size: 60K
    Primary Mask Quantification:
      element_tests:
        image:
          asserts:
          - has_line:
              line: CellID,DNA_7,CD11B,SMA,CD16,ECAD,FOXP3,NCAM,X_centroid,Y_centroid,Area,MajorAxisLength,MinorAxisLength,Eccentricity,Solidity,Extent,Orientation
    Segmented Multiplexed Mask:
      element_tests:
        image:
          asserts:
          - has_image_channels:
              channels: 1
    Spatial Interaction Montage:
      asserts:
      - has_size:
          delta: 20K
          size: 39K
    Spatial Scatterplot Montage:
      asserts:
      - has_size:
          delta: 50K
          size: 181K
    Squidpy Spatial Scatterplots:
      element_tests:
        image:
          asserts:
          - has_size:
              delta: 50K
              size: 181K
    Vitessce Dashboard:
      element_tests:
        image:
          asserts:
          - has_json_property_with_text:
              property: version
              text: 1.0.17
    phenotyped adata:
      element_tests:
        image:
          asserts:
          - has_h5_keys:
              keys: obs/Area,obs/CellID,obs/Eccentricity,obs/Extent,obs/MajorAxisLength,obs/MinorAxisLength,obs/Orientation,obs/Solidity,obs/X_centroid,obs/Y_centroid,obs/imageid,obs/imageid/categories,obs/imageid/codes
