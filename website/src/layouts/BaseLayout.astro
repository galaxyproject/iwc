---
import "@fontsource/atkinson-hyperlegible/400.css";
import "@fontsource/atkinson-hyperlegible/700.css";
import "@fontsource/atkinson-hyperlegible/400-italic.css";
import "@fontsource/atkinson-hyperlegible/700-italic.css";
import "../styles/global.css";

interface Props {
    title?: string;
    description?: string;
    hasHero?: boolean;
    hasLeftSidebar?: boolean;
    hasRightSidebar?: boolean;
    ogTitle?: string;
    ogDescription?: string;
    ogImage?: string;
    ogType?: string;
    twitterCard?: string;
    twitterTitle?: string;
    twitterDescription?: string;
    twitterImage?: string;
}

const {
    title = "Intergalactic Workflow Commission",
    description = "Ready-to-use, open-source pipelines with sample data and training materials",
    hasHero = false,
    hasLeftSidebar = false,
    hasRightSidebar = false,
    ogTitle,
    ogDescription,
    ogImage = "https://iwc.galaxyproject.org/iwc_logo.png",
    ogType = "website",
    twitterCard = "summary",
    twitterTitle,
    twitterDescription,
    twitterImage = "https://iwc.galaxyproject.org/iwc_logo.png",
} = Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="description" content={description} />
        <title>{title}</title>

        <!-- Open Graph -->
        <meta property="og:title" content={ogTitle || title} />
        <meta property="og:description" content={ogDescription || description} />
        <meta property="og:image" content={ogImage} />
        <meta property="og:type" content={ogType} />

        <!-- Twitter Card -->
        <meta name="twitter:card" content={twitterCard} />
        <meta name="twitter:title" content={twitterTitle || ogTitle || title} />
        <meta name="twitter:description" content={twitterDescription || ogDescription || description} />
        <meta name="twitter:image" content={twitterImage} />

        <link rel="preload" as="image" href="/iwc_logo_white.png" fetchpriority="high" />
        <link rel="icon" type="image/png" href="/iwc_logo_white.png" />

        <!-- Allow pages to inject additional head content (e.g., JSON-LD structured data) -->
        <slot name="head" />
    </head>
    <body class="h-dvh flex flex-col bg-chicago-50 font-sans">
        <!-- Header component will go here -->
        <header>
            <slot name="header" />
        </header>

        <main class="flex overflow-y-auto">
            <div class="w-full overflow-y-auto">
                <!-- Hero section if provided -->
                {
                    hasHero && (
                        <div>
                            <slot name="hero" />
                        </div>
                    )
                }

                <div class="flex">
                    <!-- Left sidebar if provided -->
                    {
                        hasLeftSidebar && (
                            <div class="w-1/4 p-4 overflow-y-auto">
                                <slot name="leftSidebar" />
                            </div>
                        )
                    }

                    <!-- Main content -->
                    <div class="flex-1 p-4 overflow-y-auto">
                        <slot name="content">
                            <slot />
                        </slot>
                    </div>

                    <!-- Right sidebar if provided -->
                    {
                        hasRightSidebar && (
                            <div class="w-1/4 p-4 overflow-y-auto">
                                <slot name="rightSidebar" />
                            </div>
                        )
                    }
                </div>
            </div>
        </main>
    </body>
</html>
