---
import BaseLayout from "../layouts/BaseLayout.astro";
import IWCHeader from "../components/IWCHeader.astro";
import HeroSection from "../components/HeroSection.vue";
import WorkflowGrid from "../components/WorkflowGrid.vue";
import FilterSidebar from "../components/FilterSidebar.vue";
import searchIndexData from "../../public/data/search-index.json";

// Define popular workflow TRS IDs
const POPULAR_WORKFLOW_TRS_IDS = [
    "#workflow/github.com/iwc-workflows/rnaseq-pe/main",
    "#workflow/github.com/iwc-workflows/chipseq-pe/main",
    "#workflow/github.com/iwc-workflows/atacseq/main",
];
---

<BaseLayout
    title="Intergalactic Workflow Commission"
    description="Ready-to-use, open-source pipelines with sample data and training materials to make progress quickly and reliably"
    ogTitle="Intergalactic Workflow Commission"
    ogDescription="Discover and run vetted analysis pipelines on Galaxy"
    ogImage="https://iwc.galaxyproject.org/iwc_logo.png"
    ogType="website"
    twitterCard="summary"
    twitterTitle="Intergalactic Workflow Commission"
    twitterDescription="Discover and run vetted analysis pipelines on Galaxy"
    twitterImage="https://iwc.galaxyproject.org/iwc_logo.png"
    hasHero={true}>
    <IWCHeader slot="header" />

    <HeroSection slot="hero" popularTrsIds={POPULAR_WORKFLOW_TRS_IDS} workflows={searchIndexData} client:load />

    <div slot="content" class="flex gap-6">
        <FilterSidebar client:load />

        <div class="flex-1 min-w-0">
            <div id="category-description" class="w-full my-4 p-4 bg-white rounded-lg shadow-md" style="display:none;">
                <h2 id="category-title" class="text-xl font-semibold mb-4"></h2>
                <div id="category-content" class="prose !max-w-none"></div>
            </div>

            <WorkflowGrid workflows={searchIndexData} client:load />
        </div>
    </div>
</BaseLayout>
