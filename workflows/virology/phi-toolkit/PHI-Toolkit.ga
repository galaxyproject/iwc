{
    "a_galaxy_workflow": "true",
    "annotation": "Phage Interaction Toolkit (PHI)  performs an automated and comprehensive identification and profiling of phages within host genomes",
    "comments": [
        {
            "child_steps": [
                6,
                4,
                5,
                7
            ],
            "color": "orange",
            "data": {
                "title": "Host Analyses"
            },
            "id": 0,
            "position": [
                528.8494573712906,
                0
            ],
            "size": [
                253,
                1352
            ],
            "type": "frame"
        },
        {
            "child_steps": [
                12,
                13,
                14,
                15,
                16,
                17
            ],
            "color": "green",
            "data": {
                "title": "Phage Analyses"
            },
            "id": 1,
            "position": [
                1595.7160163986296,
                1038.2
            ],
            "size": [
                1103.3,
                708.4
            ],
            "type": "frame"
        }
    ],
    "creator": [
        {
            "class": "Person",
            "identifier": "https://orcid.org/0000-0003-3763-0797",
            "name": "Matthias Bernt"
        },
        {
            "class": "Person",
            "identifier": "https://orcid.org/0000-0003-0031-1565",
            "name": "Felipe Borim Corr\u00eaa"
        },
        {
            "class": "Person",
            "identifier": "https://orcid.org/0000-0001-8251-1960",
            "name": "Joao Pedro Saraiva"
        },
        {
            "class": "Person",
            "identifier": "https://orcid.org/0000-0002-5652-3666",
            "name": "Rodolfo Brizola Toscan"
        },
        {
            "class": "Organization",
            "name": "Helmholtz-Zentrum f\u00fcr Umweltforschung GmbH - UFZ",
            "url": "https://www.ufz.de/"
        }
    ],
    "format-version": "0.1",
    "license": "MIT",
    "name": "PHI Toolkit",
    "readme": "Profiling of bacteriophages is essential in expanding our knowledge of phage-host dynamics. However, current workflows focus solely on the identification and annotation of genes or prediction of phage hosts independently. Here we present the Phage Interaction Toolkit (PHI) which is designed to perform an automated and comprehensive identification and profiling of phages within host genomes.  This workflow integrates state-of-the-art phage identification tools with host interaction analysis tools.\n\nGenomad: Detection and annotation of mobile genetic elements including prophages.\nCheckM2: Assess bacterial genome quality (completeness and contamination).\nGTDB-tk: Assignment of taxonomy to bacterial genomes.\nDefenseFinder: Scan genomes for known bacterial defense mechanisms such as restriction-modification and CRISPR. \nVibrant: Identification, annotation and curation of phage sequences in genomes. Also produces gene calls, annotations and quality assessment.\nCheckV: Estimation of genome completeness, contamination of putative viral contigs.\nPhatyp: Phage lifestyle prediction (e.g., temperate vs. virulent) based on clustering of genomic signatures.\niPHoP: Prediction of phage-host interactions based on signals such as sequence similarity, CRISPR matches and tRNA matches. Identification of potential host taxa.\ndRep Compare: Dereplication and comparison of viral genomes. \nABRIcate: Screen of contigs for antimicrobial resistance or virulence genes.",
    "report": {
        "markdown": "\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n"
    },
    "steps": {
        "0": {
            "annotation": "Input host contigs organized in a collection",
            "content_id": null,
            "errors": null,
            "id": 0,
            "input_connections": {},
            "inputs": [
                {
                    "description": "Input host contigs organized in a collection",
                    "name": "Host contigs"
                }
            ],
            "label": "Host contigs",
            "name": "Input dataset collection",
            "outputs": [],
            "position": {
                "left": 0.0,
                "top": 614.6343854612538
            },
            "tool_id": null,
            "tool_state": "{\"optional\": false, \"format\": [\"fasta\"], \"tag\": null, \"collection_type\": \"list\"}",
            "tool_version": null,
            "type": "data_collection_input",
            "uuid": "e3d3a643-e155-4daf-9529-28ab717fb426",
            "when": null,
            "workflow_outputs": []
        },
        "1": {
            "annotation": "The GTDB-Tk database version to use for the workflow",
            "content_id": null,
            "errors": null,
            "id": 1,
            "input_connections": {},
            "inputs": [
                {
                    "description": "The GTDB-Tk database version to use for the workflow",
                    "name": "GTDB-Tk database"
                }
            ],
            "label": "GTDB-Tk database",
            "name": "Input parameter",
            "outputs": [],
            "position": {
                "left": 12.166753195502897,
                "top": 1104.5447319494656
            },
            "tool_id": null,
            "tool_state": "{\"multiple\": false, \"validators\": [], \"restrictOnConnections\": true, \"parameter_type\": \"text\", \"optional\": false}",
            "tool_version": null,
            "type": "parameter_input",
            "uuid": "40b13dd6-2ec0-44c0-bc7b-67bc92d75119",
            "when": null,
            "workflow_outputs": [
                {
                    "label": null,
                    "output_name": "output",
                    "uuid": "8294e7f8-29e9-41c0-9dbd-f6930ac70ead"
                }
            ]
        },
        "2": {
            "annotation": "geNomad is free to use for internal use, research &amp; development, non-commercial use, purposes only.\n",
            "content_id": null,
            "errors": null,
            "id": 2,
            "input_connections": {},
            "inputs": [
                {
                    "description": "geNomad is free to use for internal use, research &amp; development, non-commercial use, purposes only.\n",
                    "name": "Agree with genomad license"
                }
            ],
            "label": "Agree with genomad license",
            "name": "Input parameter",
            "outputs": [],
            "position": {
                "left": 12.089766276757016,
                "top": 1240.4597789313764
            },
            "tool_id": null,
            "tool_state": "{\"validators\": [], \"parameter_type\": \"boolean\", \"optional\": false}",
            "tool_version": null,
            "type": "parameter_input",
            "uuid": "c35c2b10-72d0-4ad4-9ce3-d329de685134",
            "when": null,
            "workflow_outputs": [
                {
                    "label": null,
                    "output_name": "output",
                    "uuid": "58a87e84-4fb2-4a1a-b569-9806946717b5"
                }
            ]
        },
        "3": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/compose_text_param/compose_text_param/0.1.1",
            "errors": null,
            "id": 3,
            "input_connections": {},
            "inputs": [],
            "label": "Set number of genomes for filter",
            "name": "Compose text parameter value",
            "outputs": [
                {
                    "name": "out1",
                    "type": "expression.json"
                }
            ],
            "position": {
                "left": 672.9403820717382,
                "top": 1436.2356375373836
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/compose_text_param/compose_text_param/0.1.1",
            "tool_shed_repository": {
                "changeset_revision": "e188c9826e0f",
                "name": "compose_text_param",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"components\": [{\"__index__\": 0, \"param_type\": {\"select_param_type\": \"text\", \"__current_case__\": 0, \"component_value\": \"2\"}}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "0.1.1",
            "type": "tool",
            "uuid": "7ce05674-016d-4634-87db-aabea749a767",
            "when": null,
            "workflow_outputs": []
        },
        "4": {
            "annotation": "Assess bacterial genome quality, i.e. completeness and contamination",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/checkm2/checkm2/1.0.2+galaxy1",
            "errors": null,
            "id": 4,
            "input_connections": {
                "input": {
                    "id": 0,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "checkm2",
            "outputs": [
                {
                    "name": "protein_files",
                    "type": "input"
                },
                {
                    "name": "diamond_files",
                    "type": "input"
                },
                {
                    "name": "quality",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 551.1658273865171,
                "top": 39.92518826507151
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/checkm2/checkm2/1.0.2+galaxy1",
            "tool_shed_repository": {
                "changeset_revision": "66acaec9f386",
                "name": "checkm2",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"29f73c3e201611f0aa6f6c92cf0cf01e\", \"chromInfo\": \"/gpfs1/data/galaxy_server/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"database\": \"1.0.2\", \"genes\": false, \"input\": {\"__class__\": \"ConnectedValue\"}, \"model\": \"\", \"ttable\": null, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.0.2+galaxy1",
            "type": "tool",
            "uuid": "681b56bb-0d9f-4af9-8ed2-35bbfd2234dd",
            "when": null,
            "workflow_outputs": []
        },
        "5": {
            "annotation": "Scan genomes for known bacterial defense mechanisms such as restriction-modification and CRISPR",
            "content_id": "toolshed.g2.bx.psu.edu/repos/rplanel/defense_finder/defense_finder/2.0.1+galaxy1",
            "errors": null,
            "id": 5,
            "input_connections": {
                "genome": {
                    "id": 0,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "DefenseFinder",
            "outputs": [
                {
                    "name": "genes",
                    "type": "tabular"
                },
                {
                    "name": "hmmer",
                    "type": "tabular"
                },
                {
                    "name": "systems",
                    "type": "tabular"
                },
                {
                    "name": "proteins",
                    "type": "fasta"
                }
            ],
            "position": {
                "left": 560.3797107210444,
                "top": 853.7407774278407
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/rplanel/defense_finder/defense_finder/2.0.1+galaxy1",
            "tool_shed_repository": {
                "changeset_revision": "71e221c4906c",
                "name": "defense_finder",
                "owner": "rplanel",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"antidefensefinder\": false, \"antidefensefinder_only\": false, \"coverage\": \"0.4\", \"db_type\": \"ordered_replicon\", \"genome\": {\"__class__\": \"ConnectedValue\"}, \"models\": \"defense-finder-models_2.0.2\", \"no_cut_ga\": false, \"preserve_raw\": false, \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
            "tool_version": "2.0.1+galaxy1",
            "type": "tool",
            "uuid": "d962f1d5-b4ba-4ae7-a920-220b314717c6",
            "when": null,
            "workflow_outputs": []
        },
        "6": {
            "annotation": "Assignment of taxonomy to bacterial genomes",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/gtdbtk_classify_wf/gtdbtk_classify_wf/2.4.1+galaxy0",
            "errors": null,
            "id": 6,
            "input_connections": {
                "gtdbtk_db": {
                    "id": 1,
                    "output_name": "output"
                },
                "input": {
                    "id": 0,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "GTDB-Tk Classify genomes",
            "outputs": [
                {
                    "name": "output_align",
                    "type": "input"
                },
                {
                    "name": "output_identfy",
                    "type": "input"
                },
                {
                    "name": "output_classify",
                    "type": "input"
                },
                {
                    "name": "output_summary",
                    "type": "input"
                }
            ],
            "position": {
                "left": 555.7731753701314,
                "top": 1075.8499731622396
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/gtdbtk_classify_wf/gtdbtk_classify_wf/2.4.1+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "30a4bdf88e14",
                "name": "gtdbtk_classify_wf",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"advanced\": {\"min_perc_aa\": \"10\", \"force\": false, \"min_af\": \"0.65\", \"output_process_log\": false}, \"gtdbtk_db\": {\"__class__\": \"ConnectedValue\"}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
            "tool_version": "2.4.1+galaxy0",
            "type": "tool",
            "uuid": "4fce52c5-08b6-4bd9-a375-aed59836284a",
            "when": null,
            "workflow_outputs": []
        },
        "7": {
            "annotation": "Detection and annotation of mobile genetic elements including prophages",
            "content_id": "toolshed.g2.bx.psu.edu/repos/ufz/genomad_end_to_end/genomad_end_to_end/1.11.1+galaxy0",
            "errors": null,
            "id": 7,
            "input_connections": {
                "INPUT": {
                    "id": 0,
                    "output_name": "output"
                },
                "license": {
                    "id": 2,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "geNomad",
            "outputs": [
                {
                    "name": "summary_plasmid_fna",
                    "type": "fasta"
                },
                {
                    "name": "summary_plasmid_genes",
                    "type": "tabular"
                },
                {
                    "name": "summary_plasmid_proteins",
                    "type": "fasta"
                },
                {
                    "name": "summary_plasmid_summary",
                    "type": "tabular"
                },
                {
                    "name": "summary_virus_fna",
                    "type": "fasta"
                },
                {
                    "name": "summary_virus_genes",
                    "type": "tabular"
                },
                {
                    "name": "summary_virus_proteins",
                    "type": "fasta"
                },
                {
                    "name": "summary_virus_summary",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 554.3303690947621,
                "top": 206.83618558610766
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/ufz/genomad_end_to_end/genomad_end_to_end/1.11.1+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "26f5822743aa",
                "name": "genomad_end_to_end",
                "owner": "ufz",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"DATABASE\": \"1.9\", \"INPUT\": {\"__class__\": \"ConnectedValue\"}, \"annotation\": {\"lenient_taxonomy\": false, \"full_ictv_lineage\": false, \"sensitivity\": \"4.2\", \"splits\": \"0\"}, \"basic\": {\"disable_find_proviruses\": true, \"disable_nn_classification\": true, \"enable_score_calibration\": false}, \"filter_cond\": {\"filtering_preset\": \"--conservative\", \"__current_case__\": 0}, \"license\": {\"__class__\": \"ConnectedValue\"}, \"provirus\": {\"skip_integrase_identification\": false, \"skip_trna_identification\": false}, \"score\": {\"composition\": \"auto\", \"force_auto\": false}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.11.1+galaxy0",
            "type": "tool",
            "uuid": "9c7c908f-6823-4e7e-9601-830a7f5480b6",
            "when": null,
            "workflow_outputs": []
        },
        "8": {
            "annotation": "Get the 1st dataset",
            "content_id": "__EXTRACT_DATASET__",
            "errors": null,
            "id": 8,
            "input_connections": {
                "input": {
                    "id": 6,
                    "output_name": "output_summary"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Extract dataset",
            "outputs": [
                {
                    "name": "output",
                    "type": "data"
                }
            ],
            "position": {
                "left": 1056.85423055768,
                "top": 1014.6267343666356
            },
            "post_job_actions": {
                "ChangeDatatypeActionoutput": {
                    "action_arguments": {
                        "newtype": "tsv"
                    },
                    "action_type": "ChangeDatatypeAction",
                    "output_name": "output"
                }
            },
            "tool_id": "__EXTRACT_DATASET__",
            "tool_state": "{\"input\": {\"__class__\": \"ConnectedValue\"}, \"which\": {\"which_dataset\": \"first\", \"__current_case__\": 0}, \"__page__\": 0, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.0.2",
            "type": "tool",
            "uuid": "62bf8345-e15c-4936-8fa5-08aeb42ed91b",
            "when": null,
            "workflow_outputs": []
        },
        "9": {
            "annotation": "Remove FASTA files containing less than 2 sequences",
            "id": 9,
            "input_connections": {
                "Collection of FASTA datasets": {
                    "id": 7,
                    "input_subworkflow_step_id": 1,
                    "output_name": "summary_virus_fna"
                },
                "Number of sequences": {
                    "id": 3,
                    "input_subworkflow_step_id": 0,
                    "output_name": "out1"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Filter FASTA by number of sequences",
            "outputs": [],
            "position": {
                "left": 944.542061832274,
                "top": 1334.7992142595497
            },
            "subworkflow": {
                "a_galaxy_workflow": "true",
                "annotation": "",
                "comments": [],
                "creator": [
                    {
                        "class": "Organization",
                        "name": "Matthias Bernt",
                        "url": "https://orcid.org/0000-0003-3763-0797"
                    }
                ],
                "format-version": "0.1",
                "license": "MIT",
                "name": "Filter FASTA by number of sequences",
                "report": {
                    "markdown": "\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n"
                },
                "steps": {
                    "0": {
                        "annotation": "Minimum number of sequences",
                        "content_id": null,
                        "errors": null,
                        "id": 0,
                        "input_connections": {},
                        "inputs": [
                            {
                                "description": "Minimum number of sequences",
                                "name": "Number of sequences"
                            }
                        ],
                        "label": "Number of sequences",
                        "name": "Input parameter",
                        "outputs": [],
                        "position": {
                            "left": 0.0,
                            "top": 0.0
                        },
                        "tool_id": null,
                        "tool_state": "{\"validators\": [], \"parameter_type\": \"text\", \"optional\": false}",
                        "tool_version": null,
                        "type": "parameter_input",
                        "uuid": "5647a2b2-e9c7-422f-8922-383430aa3982",
                        "when": null,
                        "workflow_outputs": []
                    },
                    "1": {
                        "annotation": "Collection of FASTA datasets",
                        "content_id": null,
                        "errors": null,
                        "id": 1,
                        "input_connections": {},
                        "inputs": [
                            {
                                "description": "Collection of FASTA datasets",
                                "name": "Collection of FASTA datasets"
                            }
                        ],
                        "label": "Collection of FASTA datasets",
                        "name": "Input dataset collection",
                        "outputs": [],
                        "position": {
                            "left": 6.903015792653667,
                            "top": 194.76141058812067
                        },
                        "tool_id": null,
                        "tool_state": "{\"optional\": false, \"format\": [\"fasta\"], \"tag\": null, \"collection_type\": \"list\"}",
                        "tool_version": null,
                        "type": "data_collection_input",
                        "uuid": "a68dc166-0d7d-41b4-b74d-dd6605ac9776",
                        "when": null,
                        "workflow_outputs": []
                    },
                    "2": {
                        "annotation": "",
                        "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.5+galaxy2",
                        "errors": null,
                        "id": 2,
                        "input_connections": {
                            "infile": {
                                "id": 1,
                                "output_name": "output"
                            },
                            "variables_0|value": {
                                "id": 0,
                                "output_name": "output"
                            }
                        },
                        "inputs": [],
                        "label": null,
                        "name": "Text reformatting",
                        "outputs": [
                            {
                                "name": "outfile",
                                "type": "input"
                            }
                        ],
                        "position": {
                            "left": 287.7728443960977,
                            "top": 14.960955148694826
                        },
                        "post_job_actions": {
                            "DeleteIntermediatesActionoutfile": {
                                "action_arguments": {},
                                "action_type": "DeleteIntermediatesAction",
                                "output_name": "outfile"
                            },
                            "HideDatasetActionoutfile": {
                                "action_arguments": {},
                                "action_type": "HideDatasetAction",
                                "output_name": "outfile"
                            }
                        },
                        "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/9.5+galaxy2",
                        "tool_shed_repository": {
                            "changeset_revision": "c41d78ae5fee",
                            "name": "text_processing",
                            "owner": "bgruening",
                            "tool_shed": "toolshed.g2.bx.psu.edu"
                        },
                        "tool_state": "{\"code\": \"BEGIN {\\n  count = 0\\n  buffering = 1\\n}\\n{\\n  if (buffering) {\\n    buf[++bufline] = $0\\n  } else {\\n    print\\n  }\\n\\n  if ($0 ~ /^>/) {\\n    count++\\n    if (count == VAR1) {\\n      # Print buffered lines\\n      for (i = 1; i <= bufline; i++) print buf[i]\\n      buffering = 0\\n      delete buf\\n    }\\n  }\\n}\", \"infile\": {\"__class__\": \"ConnectedValue\"}, \"variables\": [{\"__index__\": 0, \"value\": {\"__class__\": \"ConnectedValue\"}}], \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                        "tool_version": "9.5+galaxy2",
                        "type": "tool",
                        "uuid": "93064a0b-9fc8-45c5-81de-4a49d8c0dbf4",
                        "when": null,
                        "workflow_outputs": []
                    },
                    "3": {
                        "annotation": "",
                        "content_id": "__FILTER_EMPTY_DATASETS__",
                        "errors": null,
                        "id": 3,
                        "input_connections": {
                            "input": {
                                "id": 2,
                                "output_name": "outfile"
                            }
                        },
                        "inputs": [],
                        "label": null,
                        "name": "Filter empty datasets",
                        "outputs": [
                            {
                                "name": "output",
                                "type": "input"
                            }
                        ],
                        "position": {
                            "left": 520.0311081979519,
                            "top": 217.04037930788962
                        },
                        "post_job_actions": {
                            "DeleteIntermediatesActionoutput": {
                                "action_arguments": {},
                                "action_type": "DeleteIntermediatesAction",
                                "output_name": "output"
                            },
                            "HideDatasetActionoutput": {
                                "action_arguments": {},
                                "action_type": "HideDatasetAction",
                                "output_name": "output"
                            }
                        },
                        "tool_id": "__FILTER_EMPTY_DATASETS__",
                        "tool_state": "{\"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                        "tool_version": "1.0.0",
                        "type": "tool",
                        "uuid": "6aee9217-c24b-4c1f-bf37-165aa17c349e",
                        "when": null,
                        "workflow_outputs": []
                    },
                    "4": {
                        "annotation": "",
                        "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/collection_element_identifiers/collection_element_identifiers/0.0.2",
                        "errors": null,
                        "id": 4,
                        "input_connections": {
                            "input_collection": {
                                "id": 3,
                                "output_name": "output"
                            }
                        },
                        "inputs": [],
                        "label": null,
                        "name": "Extract element identifiers",
                        "outputs": [
                            {
                                "name": "output",
                                "type": "txt"
                            }
                        ],
                        "position": {
                            "left": 806.1282025704038,
                            "top": 193.67056945375833
                        },
                        "post_job_actions": {
                            "DeleteIntermediatesActionoutput": {
                                "action_arguments": {},
                                "action_type": "DeleteIntermediatesAction",
                                "output_name": "output"
                            },
                            "HideDatasetActionoutput": {
                                "action_arguments": {},
                                "action_type": "HideDatasetAction",
                                "output_name": "output"
                            }
                        },
                        "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/collection_element_identifiers/collection_element_identifiers/0.0.2",
                        "tool_shed_repository": {
                            "changeset_revision": "d3c07d270a50",
                            "name": "collection_element_identifiers",
                            "owner": "iuc",
                            "tool_shed": "toolshed.g2.bx.psu.edu"
                        },
                        "tool_state": "{\"input_collection\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                        "tool_version": "0.0.2",
                        "type": "tool",
                        "uuid": "199d4a54-3237-47bd-b3d3-cd15a941a1bb",
                        "when": null,
                        "workflow_outputs": []
                    },
                    "5": {
                        "annotation": "",
                        "content_id": "__FILTER_FROM_FILE__",
                        "errors": null,
                        "id": 5,
                        "input_connections": {
                            "how|filter_source": {
                                "id": 4,
                                "output_name": "output"
                            },
                            "input": {
                                "id": 1,
                                "output_name": "output"
                            }
                        },
                        "inputs": [
                            {
                                "description": "runtime parameter for tool Filter collection",
                                "name": "how"
                            }
                        ],
                        "label": null,
                        "name": "Filter collection",
                        "outputs": [
                            {
                                "name": "output_filtered",
                                "type": "input"
                            },
                            {
                                "name": "output_discarded",
                                "type": "input"
                            }
                        ],
                        "position": {
                            "left": 1100.4078905199567,
                            "top": 21.087434497079062
                        },
                        "post_job_actions": {
                            "DeleteIntermediatesActionoutput_filtered": {
                                "action_arguments": {},
                                "action_type": "DeleteIntermediatesAction",
                                "output_name": "output_filtered"
                            },
                            "HideDatasetActionoutput_discarded": {
                                "action_arguments": {},
                                "action_type": "HideDatasetAction",
                                "output_name": "output_discarded"
                            },
                            "RenameDatasetActionoutput_filtered": {
                                "action_arguments": {
                                    "newname": "Filtered FASTA datasets"
                                },
                                "action_type": "RenameDatasetAction",
                                "output_name": "output_filtered"
                            }
                        },
                        "tool_id": "__FILTER_FROM_FILE__",
                        "tool_state": "{\"how\": {\"how_filter\": \"remove_if_absent\", \"__current_case__\": 0, \"filter_source\": {\"__class__\": \"ConnectedValue\"}}, \"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
                        "tool_version": "1.0.0",
                        "type": "tool",
                        "uuid": "5df035a6-2921-44de-aa92-21fceb9931f3",
                        "when": null,
                        "workflow_outputs": [
                            {
                                "label": "Filtered FASTA datasets",
                                "output_name": "output_filtered",
                                "uuid": "804f2146-8c7d-423d-84db-a51c5877a77d"
                            }
                        ]
                    }
                },
                "tags": [],
                "uuid": "51875bf7-4156-4933-99f0-25d65892e5e2"
            },
            "tool_id": null,
            "type": "subworkflow",
            "uuid": "696767da-390a-411f-a212-2c7d562c04ad",
            "when": null,
            "workflow_outputs": []
        },
        "10": {
            "annotation": "Remove empty sequences, i.e. samples where no phages were detected",
            "content_id": "__FILTER_EMPTY_DATASETS__",
            "errors": null,
            "id": 10,
            "input_connections": {
                "input": {
                    "id": 7,
                    "output_name": "summary_virus_fna"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Filter empty datasets",
            "outputs": [
                {
                    "name": "output",
                    "type": "input"
                }
            ],
            "position": {
                "left": 1142.1358549228785,
                "top": 1202.49246451966
            },
            "post_job_actions": {},
            "tool_id": "__FILTER_EMPTY_DATASETS__",
            "tool_state": "{\"input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.0.0",
            "type": "tool",
            "uuid": "50f24e53-556c-4687-bd9d-c3fa1f5213c7",
            "when": null,
            "workflow_outputs": []
        },
        "11": {
            "annotation": "Split multi-sequence FASTA file into a collection of single-sequence FASTA files",
            "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2",
            "errors": null,
            "id": 11,
            "input_connections": {
                "split_parms|input": {
                    "id": 9,
                    "output_name": "Filtered FASTA datasets"
                }
            },
            "inputs": [
                {
                    "description": "runtime parameter for tool Split file",
                    "name": "split_parms"
                }
            ],
            "label": null,
            "name": "Split file",
            "outputs": [
                {
                    "name": "list_output_fasta",
                    "type": "input"
                }
            ],
            "position": {
                "left": 1256.5322007078155,
                "top": 1442.210088955704
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/split_file_to_collection/split_file_to_collection/0.5.2",
            "tool_shed_repository": {
                "changeset_revision": "2dae863c8f42",
                "name": "split_file_to_collection",
                "owner": "bgruening",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"split_parms\": {\"select_ftype\": \"fasta\", \"__current_case__\": 3, \"input\": {\"__class__\": \"ConnectedValue\"}, \"select_mode\": {\"mode\": \"chunk\", \"__current_case__\": 0, \"chunksize\": \"1\"}, \"newfilenames\": \"sequence\", \"select_allocate\": {\"allocate\": \"batch\", \"__current_case__\": 1}}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "0.5.2",
            "type": "tool",
            "uuid": "dfa7d51a-61ab-47ec-8c78-69121adf80e4",
            "when": null,
            "workflow_outputs": []
        },
        "12": {
            "annotation": "Estimation of genome completeness, contamination of putative viral contigs",
            "content_id": "toolshed.g2.bx.psu.edu/repos/ufz/checkv_end_to_end/checkv_end_to_end/1.0.3+galaxy0",
            "errors": null,
            "id": 12,
            "input_connections": {
                "input": {
                    "id": 10,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "CheckV end to end",
            "outputs": [
                {
                    "name": "quality_summary",
                    "type": "tabular"
                },
                {
                    "name": "complete_genomes",
                    "type": "tabular"
                },
                {
                    "name": "proviruses",
                    "type": "fasta"
                },
                {
                    "name": "viruses",
                    "type": "fasta"
                }
            ],
            "position": {
                "left": 1626.3042462941833,
                "top": 1078.1603623846333
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/ufz/checkv_end_to_end/checkv_end_to_end/1.0.3+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "e523d50513a4",
                "name": "checkv_end_to_end",
                "owner": "ufz",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"29f73c3e201611f0aa6f6c92cf0cf01e\", \"chromInfo\": \"/gpfs1/data/galaxy_server/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"optional_outputs\": null, \"reference\": \"1.5\", \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.0.3+galaxy0",
            "type": "tool",
            "uuid": "12d949d5-11e5-4b14-8e5e-1dd293344e66",
            "when": null,
            "workflow_outputs": []
        },
        "13": {
            "annotation": "Prediction of phage-host interactions based on signals such as sequence similarity, CRISPR matches and tRNA matches. Identification of potential host taxa",
            "content_id": "toolshed.g2.bx.psu.edu/repos/ufz/iphop_predict/iphop_predict/1.3.3+galaxy0",
            "errors": null,
            "id": 13,
            "input_connections": {
                "fa_file": {
                    "id": 10,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "iPHoP predict",
            "outputs": [
                {
                    "name": "detailed_per_tool",
                    "type": "csv"
                },
                {
                    "name": "host_genome",
                    "type": "csv"
                },
                {
                    "name": "host_genus",
                    "type": "csv"
                }
            ],
            "position": {
                "left": 2182.3676846666044,
                "top": 1217.2738385024174
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/ufz/iphop_predict/iphop_predict/1.3.3+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "d357350b6da0",
                "name": "iphop_predict",
                "owner": "ufz",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"__input_ext\": \"input\", \"__workflow_invocation_uuid__\": \"29f73c3e201611f0aa6f6c92cf0cf01e\", \"chromInfo\": \"/gpfs1/data/galaxy_server/galaxy/tool-data/shared/ucsc/chrom/?.len\", \"db_dir\": \"iPHoP_db_Aug23_rw\", \"fa_file\": {\"__class__\": \"ConnectedValue\"}, \"min_score\": \"90\", \"no_qc\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.3.3+galaxy0",
            "type": "tool",
            "uuid": "dd839f06-40cb-4c93-903d-d834842f6bef",
            "when": null,
            "workflow_outputs": []
        },
        "14": {
            "annotation": "Screen of contigs for antimicrobial resistance or virulence genes",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/abricate/abricate/1.0.1",
            "errors": null,
            "id": 14,
            "input_connections": {
                "file_input": {
                    "id": 10,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "ABRicate",
            "outputs": [
                {
                    "name": "report",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 2188.267090487594,
                "top": 1449.9537463699148
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/abricate/abricate/1.0.1",
            "tool_shed_repository": {
                "changeset_revision": "c2ef298da409",
                "name": "abricate",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"adv\": {\"db\": \"vfdb\", \"no_header\": false, \"min_dna_id\": \"80.0\", \"min_cov\": \"80.0\"}, \"file_input\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.0.1",
            "type": "tool",
            "uuid": "93b431be-6081-40dc-bc22-6927448940ab",
            "when": null,
            "workflow_outputs": []
        },
        "15": {
            "annotation": "Identification, annotation and curation of phage sequences in genomes. Also produces gene calls, annotations and quality assessment",
            "content_id": "toolshed.g2.bx.psu.edu/repos/ufz/vibrant/vibrant/1.2.1+galaxy2",
            "errors": null,
            "id": 15,
            "input_connections": {
                "input": {
                    "id": 10,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "VIBRANT",
            "outputs": [
                {
                    "name": "figures",
                    "type": "input"
                },
                {
                    "name": "phages_combined_fna",
                    "type": "fasta"
                },
                {
                    "name": "phages_combined_gbk",
                    "type": "genbank"
                },
                {
                    "name": "phages_combined_txt",
                    "type": "txt"
                },
                {
                    "name": "AMG_individuals",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 2478.943525292863,
                "top": 1409.742330693321
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/ufz/vibrant/vibrant/1.2.1+galaxy2",
            "tool_shed_repository": {
                "changeset_revision": "e087d0bccff4",
                "name": "vibrant",
                "owner": "ufz",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"database\": \"1.2.1\", \"input\": {\"__class__\": \"ConnectedValue\"}, \"l\": \"1000\", \"o\": \"4\", \"outputs\": [\"figures\", \"phages_combined_fna\", \"phages_combined_gbk\", \"phages_combined_txt\", \"AMG_individuals\"], \"protein\": false, \"virome\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.2.1+galaxy2",
            "type": "tool",
            "uuid": "03f0ba31-a83f-4408-a7b4-e854d9fa4de6",
            "when": null,
            "workflow_outputs": []
        },
        "16": {
            "annotation": "Compare: Dereplication and comparison of viral genomes",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/drep_compare/drep_compare/3.6.2+galaxy1",
            "errors": null,
            "id": 16,
            "input_connections": {
                "genomes": {
                    "id": 11,
                    "output_name": "list_output_fasta"
                }
            },
            "inputs": [],
            "label": null,
            "name": "dRep compare",
            "outputs": [
                {
                    "name": "log",
                    "type": "txt"
                },
                {
                    "name": "warnings",
                    "type": "txt"
                },
                {
                    "name": "Primary_clustering_dendrogram",
                    "type": "pdf"
                },
                {
                    "name": "Clustering_scatterplots",
                    "type": "pdf"
                },
                {
                    "name": "Cdb",
                    "type": "csv"
                }
            ],
            "position": {
                "left": 1615.6766740931432,
                "top": 1367.4920878629591
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/drep_compare/drep_compare/3.6.2+galaxy1",
            "tool_shed_repository": {
                "changeset_revision": "f0334664a47b",
                "name": "drep_compare",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"comp_clust\": {\"steps\": {\"select\": \"default\", \"__current_case__\": 0, \"MASH_sketch\": \"1000\", \"P_ani\": \"0.9\", \"multiround_primary_clustering\": false, \"primary_chunksize\": \"5000\", \"clustering\": {\"S_algorithm\": \"ANImf\", \"__current_case__\": 1, \"n_PRESET\": \"normal\", \"coverage_method\": \"larger\"}, \"S_ani\": \"0.95\", \"cov_thresh\": \"0.1\"}, \"clusterAlg\": \"average\", \"run_tertiary_clustering\": false}, \"genomes\": {\"__class__\": \"ConnectedValue\"}, \"select_outputs\": [\"log\", \"warnings\", \"Primary_clustering_dendrogram\", \"Clustering_scatterplots\", \"Cdb\"], \"warning\": {\"warn_dist\": \"0.25\", \"warn_sim\": \"0.98\", \"warn_aln\": \"0.25\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "3.6.2+galaxy1",
            "type": "tool",
            "uuid": "dda9f157-d406-45ea-be6f-7a00f183c480",
            "when": null,
            "workflow_outputs": []
        },
        "17": {
            "annotation": "Restructure collection",
            "content_id": "__APPLY_RULES__",
            "errors": null,
            "id": 17,
            "input_connections": {
                "input": {
                    "id": 16,
                    "output_name": "Cdb"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Apply rules",
            "outputs": [
                {
                    "name": "output",
                    "type": "input"
                }
            ],
            "position": {
                "left": 1846.9685845898002,
                "top": 1580.7820497409336
            },
            "post_job_actions": {},
            "tool_id": "__APPLY_RULES__",
            "tool_state": "{\"input\": {\"__class__\": \"ConnectedValue\"}, \"rules\": {\"mapping\": [{\"columns\": [0], \"editing\": false, \"type\": \"list_identifiers\"}], \"rules\": [{\"error\": null, \"type\": \"add_column_metadata\", \"value\": \"identifier0\", \"warn\": null}]}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.1.0",
            "type": "tool",
            "uuid": "1c15d45c-773a-4c6c-80d6-3953f57ae2ac",
            "when": null,
            "workflow_outputs": []
        },
        "18": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/ufz/phi_toolkit_report/phi_toolkit_report/0.2.0+galaxy0",
            "errors": null,
            "id": 18,
            "input_connections": {
                "abricate": {
                    "id": 14,
                    "output_name": "report"
                },
                "checkm": {
                    "id": 4,
                    "output_name": "quality"
                },
                "checkv": {
                    "id": 12,
                    "output_name": "quality_summary"
                },
                "defense_finder": {
                    "id": 5,
                    "output_name": "systems"
                },
                "drep_compare": {
                    "id": 17,
                    "output_name": "output"
                },
                "drep_compare_clustering_dendrogram": {
                    "id": 16,
                    "output_name": "Primary_clustering_dendrogram"
                },
                "genomad": {
                    "id": 7,
                    "output_name": "summary_virus_summary"
                },
                "genomad_annotations": {
                    "id": 7,
                    "output_name": "summary_virus_genes"
                },
                "genomad_phages": {
                    "id": 7,
                    "output_name": "summary_virus_fna"
                },
                "genomes": {
                    "id": 0,
                    "output_name": "output"
                },
                "gtdb_summary": {
                    "id": 8,
                    "output_name": "output"
                },
                "iphop": {
                    "id": 13,
                    "output_name": "host_genome"
                },
                "vibrant": {
                    "id": 15,
                    "output_name": "AMG_individuals"
                }
            },
            "inputs": [],
            "label": null,
            "name": "PHI toolkit report",
            "outputs": [
                {
                    "name": "report",
                    "type": "html"
                }
            ],
            "position": {
                "left": 2732.855697331671,
                "top": 155.68025339806852
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/ufz/phi_toolkit_report/phi_toolkit_report/0.1.0+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "315c2ed31af1",
                "name": "phi_toolkit_report",
                "owner": "ufz",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"abricate\": {\"__class__\": \"ConnectedValue\"}, \"checkm\": {\"__class__\": \"ConnectedValue\"}, \"checkv\": {\"__class__\": \"ConnectedValue\"}, \"defense_finder\": {\"__class__\": \"ConnectedValue\"}, \"drep_compare\": {\"__class__\": \"ConnectedValue\"}, \"drep_compare_clustering_dendrogram\": {\"__class__\": \"ConnectedValue\"}, \"genomad\": {\"__class__\": \"ConnectedValue\"}, \"genomad_annotations\": {\"__class__\": \"ConnectedValue\"}, \"genomad_phages\": {\"__class__\": \"ConnectedValue\"}, \"genomes\": {\"__class__\": \"ConnectedValue\"}, \"gtdb_summary\": {\"__class__\": \"ConnectedValue\"}, \"iphop\": {\"__class__\": \"ConnectedValue\"}, \"vibrant\": {\"__class__\": \"ConnectedValue\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "0.1.0+galaxy0",
            "type": "tool",
            "uuid": "2e243925-afaf-4446-9f04-83790f0fac7b",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "PHI toolkit report",
                    "output_name": "report",
                    "uuid": "40889cb8-8038-467a-982b-e6a2662f5e82"
                }
            ]
        }
    },
    "tags": [],
    "uuid": "f7158104-fcf5-49bb-8e72-15edb8945d62",
    "version": 4
}
