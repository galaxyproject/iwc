- doc: Test outline for Metagenomic-Taxonomy-Analysis
  job:
    Metagenomics Reads after Quality Control and Host/Contamination Removal:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: SRR24759598
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/18185564/files/SRR24759598_1.fastqsanger.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/18185564/files/SRR24759598_2.fastqsanger.gz
      - class: Collection
        type: paired
        identifier: SRR24759616
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/18185564/files/SRR24759616_1.fastqsanger.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/18185564/files/SRR24759616_2.fastqsanger.gz
    Reference Taxonomy Database for Kraken2: k2_pluspf_20210517
    Reference Taxonomy Database for Bracken: k2_pluspf_20210517
    Taxonomic Level for Abundance Re-estimation for Bracken: S
    Reference Taxonomy Database for MetaPhlAn: mpa_vOct22_CHOCOPhlAnSGB_202212
    Reference Database for Sylph: sylph_downloaded_12122025_OceanDNA-c200-v0.3.syldb
    Reference Taxonomy Metadata for Sylph: sylph_tax_downloaded_08112025
  outputs:
    Kraken2 report:
      element_tests:
        SRR24759598:
          asserts:
            has_n_lines:
              n: 365
            has_text_matching:
              expression: "Bartonella apihabitans"
            has_text_matching:
              expression: "Frischella perrara"
        SRR24759616:
          asserts:
            has_n_lines:
              n: 358
            has_text_matching:
              expression: "Parasaccharibacter apium"
            has_text_matching:
              expression: "Gilliamella sp. ESL0405"
    MetaPhlAn taxonomy profile as BIOM:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "MetaPhlAn_Analysis"
            has_text_matching:
              expression: "s__Enterococcus_faecalis"
        SRR24759616:
          asserts:
            has_text_matching: 
              expression: "s__Klebsiella_oxytoca"
    MetaPhlAn taxonomy profile:
      element_tests:
        SRR24759598:
          asserts:
            has_n_lines:
              n: 95
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "s__Bartonella_apis"
            has_text_matching:
              expression: "s__Gilliamella_apis"
        SRR24759616:
          asserts:
            has_n_lines:
              n: 80
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "s__Gilliamella_apis"              
            has_text_matching:
              expression: "g__Snodgrassella"  
    Sylph taxonomy profile:
      element_tests:
        SRR24759598:
          asserts:
            has_n_lines:
              n: 110
            has_text_matching:
              expression: "g__Gilliamella"
            has_text_matching:
              expression: "c__Alphaproteobacteria"
        SRR24759616:
          asserts:
            has_n_lines:
              n: 104
            has_text_matching:
              expression: "c__Actinomycetes"
            has_text_matching:
              expression: "SRR24759616"
    Bracken report:
      element_tests:
        SRR24759598:
          asserts:
            has_n_lines:
              n: 45
            has_text_matching:
              expression: "Bartonella apihabitans"
            has_text_matching:
              expression: "fraction_total_reads"
        SRR24759616:
          asserts:
            has_n_lines:
              n: 40
            has_text_matching:
              expression: "fraction_total_reads"
            has_text_matching:
              expression: "Bifidobacterium coryneforme"
    Standardized Kraken2/Bracken taxonomy profile:
      asserts:
        has_n_lines:
          n: 51
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "SRR24759598"
        has_text_matching:
          expression: "SRR24759616"
        has_text_matching:
          expression: "Parasaccharibacter apium"
    Standardized MetaPhlAn taxonomy profile:
      asserts:
        has_n_lines:
          n: 71
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "SRR24759598"
        has_text_matching:
          expression: "SRR24759616"
        has_text_matching:
          expression: "Enterococcus faecalis"
    Krona chart for Kraken2 community profile:
      asserts:
        has_text_matching:
          expression: "Bacteria"
        has_text_matching:
          expression: "Proteobacteria"
    Krona chart for MetaPhlAn community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "k__Bacteria"
        has_text_matching:
          expression: "p__Pseudomonadota"
    Krona chart for Sylph community profile:
      asserts:
        has_text_matching:
          expression: "Bifidobacterium"
        has_text_matching:
          expression: "Pseudomonadota"
    Krona chart for Kraken2/Bracken community profile:
      asserts:
        has_text_matching:
          expression: "Bifidobacterium"
        has_text_matching:
          expression: "Pseudomonadota"
    MultiQC HTML report:
      asserts:
        has_text_matching:
          expression: "MetaPhlAn"
        has_text_matching:
          expression: "Kraken2"
        has_text_matching:
          expression: "Sylph"
        has_text_matching:
          expression: "Bracken"
        has_text_matching:
          expression: "Standardized"
