- doc: Test outline for Metagenomic-Taxonomy-Analysis
  job:
    Input Dataset Collection:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: SRR24759598
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/18185564/files/SRR24759598_1.fastqsanger.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/18185564/files/SRR24759598_2.fastqsanger.gz
      - class: Collection
        type: paired
        identifier: SRR24759616
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/18185564/files/SRR24759616_1.fastqsanger.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/18185564/files/SRR24759616_2.fastqsanger.gz
    Kraken2 database: 2024-07-15T185612Z_standard_prebuilt_pluspf_2024-01-12
    Bracken database: b75845cd-9b1e-4e84-bbc6-468ebb5fca9d
    'MetaPhlAn database ': mpa_vJun23_CHOCOPhlAnSGB_202403-30092024
    Sylph database: sylph_downloaded_21072025_gtdb-r220-c200-dbv1.syldb
    Sylph tax database: sylph_tax_downloaded_21072025
  outputs:
    Sample-names:
      path: test-data/Sample-names.txt
    Tax_MetaPhlan_Standardised_output:
      asserts:
        has_text_matching:
          expression: "taxonomy_id"
    Krona_Diversity_MetaPhlan:
      asserts:
        has_text_matching:
          expression: "Bacteria"
        has_text_matching:
          expression: "Proteobacteria"
    Tax_Kraken2_Braken_Standardised_output:
      asserts:
        has_text_matching:
          expression: "2750929"
    Krona_Diversity_Sylph:
      asserts:
        has_text_matching:
          expression: "Bifidobacterium"
        has_text_matching:
          expression: "Pseudomonadota"
    Krona_Diversity_Kraken2_Bracken:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "k__Bacteria"
        has_text_matching:
          expression: "p__Pseudomonadota"
    list_header:
      asserts:
        has_text_matching:
          expression: "name"
        has_n_lines:
          n: 5
    header_tab_taxpasta:
      asserts:
        has_text_matching:
          expression: "rank"
    Tax_Kraken2_Bracken_Taxpasta:
      asserts:
        has_text_matching:
          expression: "Bartonella"
    Tax_MetaPhlan_Taxpasta:
      asserts:
        has_text_matching:
          expression: "Pseudomonadota"
        has_n_lines:
          n: 71
    output:
      element_tests:
        SRR24759598:
          location: https://zenodo.org/records/18185564/files/output_SRR24759598.tabular
        SRR24759616:
          location: https://zenodo.org/records/18185564/files/output_SRR24759616.tabular
    report_output:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "root"
            has_text_matching:
              expression: "Bacteria"
        SRR24759616:
          asserts:
            has_text_matching:
              expression: "Pseudomonadota"
    Methaphlan-taxonomy-biom1:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "MetaPhlAn_Analysis"
            has_text_matching:
              expression: "k__Bacteria"
        SRR24759616:
          asserts:
            has_text_matching: 
              expression: "o__Hyphomicrobiales"
    Methaphlan-output-for-krona:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "25.42322"
            has_text_matching:
              expression: "choladocola"
        SRR24759616:
          asserts:
            has_text_matching:
              expression: "34.43883"
    Methaphlan-tax-file:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "k__Bacteria"
            has_text_matching:
              expression: "p__Firmicutes"
        SRR24759616:
          asserts:
            has_text_matching:
              expression: "#SampleID"
            has_text_matching:
              expression: "p__Proteobacteria"              
            has_text_matching:
              expression: "c__Alphaproteobacteria"             
    kraken_report:
      element_tests:
        SRR24759598:
          asserts:
            has_n_lines:
              n: 145
            has_text_matching:
              expression: "163518"
        SRR24759616:
          asserts:
            has_text_matching:
              expression: "163667"
    report:
      element_tests:
        SRR24759598:
          asserts:
            has_text_matching:
              expression: "69661"
            has_text_matching:
              expression: "apihabitans"
        SRR24759616:
          asserts:
            has_text_matching:
              expression: "fraction_total_reads"
            has_text_matching:
              expression: "99739"