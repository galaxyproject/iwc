- doc: Test with 1 sample for Metagenomics Taxonomic Community Profiling workflow
  job:
    Metagenomics Reads after Quality Control and Host/Contamination Removal:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: PSM6XBT3_500k
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R1.fastq.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R2.fastq.gz
    Reference Taxonomy Database for Kraken2: k2_standard_20210517
    Reference Taxonomy Database for Bracken: k2_standard_20210517
    Taxonomic Level for Abundance Re-estimation for Bracken: S
    Reference Taxonomy Database for MetaPhlAn: mpa_vOct22_CHOCOPhlAnSGB_202212
    Reference Database for Sylph: sylph_downloaded_12122025_OceanDNA-c200-v0.3.syldb
    Reference Taxonomy Metadata for Sylph: sylph_tax_downloaded_08112025
    NCBI Taxonomy for taxpasta: "2024-06-05"
  outputs:
    Kraken2 taxonomic profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 13
            has_n_columns:
              n: 6
            has_text_matching:
              expression: "Erysipelothrix rhusiopathiae"
            has_text_matching:
              expression: "D1"
    MetaPhlAn taxonomy profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 63
            has_n_columns:
              n: 4
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "k__Bacteria|p__Firmicutes|c__Clostridia|o__Eubacteriales|f__Lachnospiraceae|g__Fusicatenibacter|s__Fusicatenibacter_saccharivorans"
            has_text_matching:
              expression: "2|976|200643|171549|815|816|371601"
    Sylph taxonomy profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 65
            has_n_columns:
              n: 2
            has_text_matching:
              expression: " d__Bacteria|p__Verrucomicrobiota|c__Verrucomicrobiae|o__Verrucomicrobiales|f__Akkermansiaceae|g__Akkermansia|s__Akkermansia muciniphila|t__GCF_000020225.1"
            has_text_matching:
              expression: "PSM6XBT3_500k"
    Bracken report:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 45
            has_text_matching:
              expression: "Bartonella apihabitans"
            has_text_matching:
              expression: "fraction_total_reads"
    Standardized Kraken2/Bracken taxonomy profile:
      asserts:
        has_n_lines:
          n: 51
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "PSM6XBT3_500k"
        has_text_matching:
          expression: "Parasaccharibacter apium"
    Standardized MetaPhlAn taxonomy profile:
      asserts:
        has_n_lines:
          n: 71
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "PSM6XBT3_500k"
        has_text_matching:
          expression: "Enterococcus faecalis"
    Krona chart for Kraken2 community profile:
      asserts:
        has_text_matching:
          expression: "Bacteria"
        has_text_matching:
          expression: "Proteobacteria"
    Krona chart for MetaPhlAn community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Clostridia"
        has_text_matching:
          expression: "Fusicatenibacter saccharivorans"
    Krona chart for Sylph community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Verrucomicrobiales"
        has_text_matching:
          expression: "Akkermansia muciniphila"
    Krona chart for Kraken2/Bracken community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Bartonella apihabitans"
    MultiQC HTML report:
      asserts:
        has_text_matching:
          expression: "MetaPhlAn"
        has_text_matching:
          expression: "Kraken2"
        has_text_matching:
          expression: "Sylph"
        has_text_matching:
          expression: "Bracken"
        has_text_matching:
          expression: "Standardized"
- doc: Test with 2 samples for Metagenomics Taxonomic Community Profiling workflow
  job:
    Metagenomics Reads after Quality Control and Host/Contamination Removal:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: PSM6XBT3_500k
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R1.fastq.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R2.fastq.gz
      - class: Collection
        type: paired
        identifier: PSM6XBT3_500k_2
        elements:
        - class: File
          identifier: forward
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R1.fastq.gz
        - class: File
          identifier: reverse
          location: https://zenodo.org/records/17895994/files/PSM6XBT3_500k_R2.fastq.gz
    Reference Taxonomy Database for Kraken2: k2_standard_20210517
    Reference Taxonomy Database for Bracken: k2_standard_20210517
    Taxonomic Level for Abundance Re-estimation for Bracken: S
    Reference Taxonomy Database for MetaPhlAn: mpa_vOct22_CHOCOPhlAnSGB_202212
    Reference Database for Sylph: sylph_downloaded_12122025_OceanDNA-c200-v0.3.syldb
    Reference Taxonomy Metadata for Sylph: sylph_tax_downloaded_08112025
    NCBI Taxonomy for taxpasta: "2024-06-05"
  outputs:
    Kraken2 taxonomic profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 13
            has_n_columns:
              n: 6
            has_text_matching:
              expression: "Erysipelothrix rhusiopathiae"
            has_text_matching:
              expression: "D1"
        PSM6XBT3_500k_2:
          asserts:
            has_n_lines:
              n: 13
            has_n_columns:
              n: 6
            has_text_matching:
              expression: "Erysipelothrix rhusiopathiae"
            has_text_matching:
              expression: "D1"
    MetaPhlAn taxonomy profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 63
            has_n_columns:
              n: 4
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "k__Bacteria|p__Firmicutes|c__Clostridia|o__Eubacteriales|f__Lachnospiraceae|g__Fusicatenibacter|s__Fusicatenibacter_saccharivorans"
            has_text_matching:
              expression: "2|976|200643|171549|815|816|371601"
        PSM6XBT3_500k_2:
          asserts:
            has_n_lines:
              n: 63
            has_n_columns:
              n: 4
            has_text_matching:
              expression: "#clade_name"
            has_text_matching:
              expression: "k__Bacteria|p__Firmicutes|c__Clostridia|o__Eubacteriales|f__Lachnospiraceae|g__Fusicatenibacter|s__Fusicatenibacter_saccharivorans"
            has_text_matching:
              expression: "2|976|200643|171549|815|816|371601"
    Sylph taxonomy profile:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 65
            has_n_columns:
              n: 2
            has_text_matching:
              expression: " d__Bacteria|p__Verrucomicrobiota|c__Verrucomicrobiae|o__Verrucomicrobiales|f__Akkermansiaceae|g__Akkermansia|s__Akkermansia muciniphila|t__GCF_000020225.1"
            has_text_matching:
              expression: "PSM6XBT3_500k"
        PSM6XBT3_500k_2:
          asserts:
            has_n_lines:
              n: 65
            has_n_columns:
              n: 2
            has_text_matching:
              expression: " d__Bacteria|p__Verrucomicrobiota|c__Verrucomicrobiae|o__Verrucomicrobiales|f__Akkermansiaceae|g__Akkermansia|s__Akkermansia muciniphila|t__GCF_000020225.1"
            has_text_matching:
              expression: "PSM6XBT3_500k"
    Bracken report:
      element_tests:
        PSM6XBT3_500k:
          asserts:
            has_n_lines:
              n: 45
            has_text_matching:
              expression: "Bartonella apihabitans"
            has_text_matching:
              expression: "fraction_total_reads"
        PSM6XBT3_500k_2:
          asserts:
            has_n_lines:
              n: 45
            has_text_matching:
              expression: "Bartonella apihabitans"
            has_text_matching:
              expression: "fraction_total_reads"
    Standardized Kraken2/Bracken taxonomy profile:
      asserts:
        has_n_lines:
          n: 51
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "PSM6XBT3_500k"
        has_text_matching:
          expression: "Parasaccharibacter apium"
    Standardized MetaPhlAn taxonomy profile:
      asserts:
        has_n_lines:
          n: 71
        has_n_columns:
          n: 5
        has_text_matching:
          expression: "PSM6XBT3_500k"
        has_text_matching:
          expression: "Enterococcus faecalis"
    Krona chart for Kraken2 community profile:
      asserts:
        has_text_matching:
          expression: "Bacteria"
        has_text_matching:
          expression: "Proteobacteria"
    Krona chart for MetaPhlAn community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Clostridia"
        has_text_matching:
          expression: "Fusicatenibacter saccharivorans"
    Krona chart for Sylph community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Verrucomicrobiales"
        has_text_matching:
          expression: "Akkermansia muciniphila"
    Krona chart for Kraken2/Bracken community profile:
      asserts:
        has_text_matching:
          expression: "Root"
        has_text_matching:
          expression: "Bartonella apihabitans"
    MultiQC HTML report:
      asserts:
        has_text_matching:
          expression: "MetaPhlAn"
        has_text_matching:
          expression: "Kraken2"
        has_text_matching:
          expression: "Sylph"
        has_text_matching:
          expression: "Bracken"
        has_text_matching:
          expression: "Standardized"
