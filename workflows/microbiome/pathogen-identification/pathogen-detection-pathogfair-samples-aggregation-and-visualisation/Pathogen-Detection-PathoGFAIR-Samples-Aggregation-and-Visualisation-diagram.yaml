title: "PathoGFAIR Samples Aggregation and Visualisation"
subtitle: "Cross-sample AMR/VF reporting and phylogenetics"
nodes:
  - id: amrNcbi
    type: input
    label: AMR (NCBI)
    subtitle: "ABRicate NCBI reports"
    column: 0
    row: 0
  - id: vfVfdb
    type: input
    label: VF (VFDB)
    subtitle: "ABRicate VFDB reports"
    column: 0
    row: 1
  - id: amrs
    type: input
    label: AMRs
    subtitle: "AMR gene tables"
    column: 0
    row: 2
  - id: vfs
    type: input
    label: VFs
    subtitle: "VF gene tables"
    column: 0
    row: 3
  - id: contigs
    type: input
    label: Contigs
    subtitle: "Assembly FASTA files"
    column: 0
    row: 4
  - id: metadata
    type: input
    label: Metadata & Stats
    subtitle: "Host removal, coverage, variants"
    column: 0
    row: 5
  - id: amrCount
    type: tool
    label: AMR Count Table
    subtitle: "Aggregate AMR counts"
    step: "1"
    column: 1
    row: 0
  - id: vfCount
    type: tool
    label: VF Count Table
    subtitle: "Aggregate VF counts"
    step: "2"
    column: 1
    row: 1
  - id: combinedCount
    type: tool
    label: Combined Count Table
    subtitle: "AMR + VF counts per sample"
    step: "3"
    column: 2
    row: 1
  - id: amrPhylo
    type: tool
    label: AMR Phylogenetic Tree
    subtitle: "Distance matrix & tree"
    step: "4"
    column: 2
    row: 2
  - id: vfPhylo
    type: tool
    label: VF Phylogenetic Trees
    subtitle: "All-sample & per-gene trees"
    step: "5"
    column: 2
    row: 3
  - id: heatmap
    type: output
    label: VF Heatmap
    subtitle: "All-samples VF heatmap"
    column: 3
    row: 1
  - id: amrTree
    type: output
    label: AMR Phylo Tree
    subtitle: "AMR-based sample tree"
    column: 3
    row: 2
  - id: vfTree
    type: output
    label: VF Phylo Tree
    subtitle: "VF-based sample tree"
    column: 3
    row: 3
  - id: barCharts
    type: output
    label: Visualization Tables
    subtitle: "Bar chart tabulars"
    column: 3
    row: 5
edges:
  - from: amrNcbi
    to: amrCount
  - from: vfVfdb
    to: vfCount
  - from: amrCount
    to: combinedCount
  - from: vfCount
    to: combinedCount
  - from: vfCount
    to: heatmap
  - from: amrs
    to: amrPhylo
  - from: contigs
    to: vfPhylo
    style: secondary
  - from: vfs
    to: vfPhylo
  - from: amrPhylo
    to: amrTree
  - from: vfPhylo
    to: vfTree
  - from: metadata
    to: barCharts
    style: secondary
legend:
  items: [input, primary, secondary, output]
