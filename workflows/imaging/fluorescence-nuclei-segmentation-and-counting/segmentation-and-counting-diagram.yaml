title: "Fluorescence Nuclei Segmentation and Counting"
nodes:
  - id: inputImage
    type: input
    label: Fluorescence Image
    subtitle: Single-channel nuclei image
    column: 0
    row: 0
  - id: filterSmooth
    type: tool
    label: Gaussian Filter
    subtitle: Smooth image for segmentation
    step: "1"
    column: 1
    row: 0
  - id: threshold
    type: tool
    label: Otsu Threshold
    subtitle: Binary segmentation
    step: "2"
    column: 2
    row: 0
  - id: labelMap
    type: tool
    label: Label Map
    subtitle: Connected component labeling
    step: "3"
    column: 3
    row: 0
  - id: histEq
    type: tool
    label: Histogram Equalization
    subtitle: CLAHE enhancement for overlay
    step: "4"
    column: 1
    row: 1
  - id: overlay
    type: tool
    label: Overlay Images
    subtitle: Contour overlay on original
    step: "5"
    column: 4
    row: 0
  - id: countObjects
    type: tool
    label: Count Objects
    subtitle: Count labeled nuclei
    step: "6"
    column: 4
    row: 1
  - id: labelOutput
    type: output
    label: Label Image
    subtitle: Segmented label map
    column: 5
    row: 0
  - id: overlayOutput
    type: output
    label: Overlay Image
    subtitle: Contour overlay PNG
    column: 5
    row: 1
  - id: countOutput
    type: output
    label: Nuclei Count
    subtitle: Object count table
    column: 5
    row: 2
edges:
  - from: inputImage
    to: filterSmooth
  - from: inputImage
    to: histEq
    style: secondary
  - from: filterSmooth
    to: threshold
  - from: threshold
    to: labelMap
  - from: labelMap
    to: overlay
  - from: histEq
    to: overlay
    style: secondary
  - from: labelMap
    to: countObjects
  - from: labelMap
    to: labelOutput
  - from: overlay
    to: overlayOutput
  - from: countObjects
    to: countOutput
legend:
  items: [input, primary, secondary, output]
