- doc: Test outline for Grouped FASTQ merging with fastq files
  job:
    metadata:
      class: File
      path: test-data/metadata.tabular
      filetype: tabular
    Trimmed paired reads:
      class: Collection
      collection_type: list:paired
      elements:
        - class: Collection
          type: paired
          identifier: IBSD09_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD09_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD09_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD08_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD08_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD08_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD02_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD02_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD02_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD01_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD01_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD01_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD03_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD03_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD03_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD04_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD04_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD04_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD05_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD05_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD05_test_2.fastq
        - class: Collection
          type: paired
          identifier: IBSD06_test
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSD06_test_1.fastq
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSD06_test_2.fastq  
  outputs:
    paired_output:
      element_tests:
        "group:2":
          elements:
            forward:
              asserts:
                - has_n_lines:
                    n: 8000
                - has_size:
                    value: 710000
                    delta: 20000
                - has_text_matching:
                    expression: "AA6AAAEEAEE6EE"
            reverse:
              asserts:
                - has_n_lines:
                    n: 8000
                - has_size:
                    value: 690000
                    delta: 20000
                - has_text_matching:
                    expression: "AAAAAAAEEE"
        "group:1":
          elements:
            forward:
              asserts:
                - has_n_lines:
                    n: 12000
                - has_size:
                    value: 1100000
                    delta: 200000
                - has_text_matching:
                    expression: "^@NB501724:38:HJFYHBGX2:"
            reverse:
              asserts:
                - has_n_lines:
                    n: 12000
                - has_size:
                    value: 1100000
                    delta: 200000
                - has_text_matching:
                    expression: "AAAAAEEEEEEEEEEEE"
        "group:3":
          elements:
            forward:
              asserts:
                - has_n_lines:
                    n: 4000
                - has_size:
                    value: 354000
                    delta: 20000
                - has_text_matching:
                    expression: "^@NB501724:38:HJFYHBGX2:"
            reverse:
              asserts:
                - has_n_lines:
                    n: 4000
                - has_size:
                    value: 347000
                    delta: 20000
                - has_text_matching:
                    expression: "AAAAAEEEEEEEEEEEE"
        "IBSD06_test":
          elements:
            forward:
              asserts:
                - has_n_lines:
                    n: 4000
                - has_size:
                    value: 353500
                    delta: 20000
                - has_text_matching:
                    expression: "AAAAA66AEAEEEEEEEEE6EEAEEEEE6A"
            reverse:
              asserts:
                - has_n_lines:
                    n: 4000
                - has_size:
                    value: 347000
                    delta: 20000
                - has_text_matching:
                    expression: "AA6AA6E"                                       
- doc: Test outline for Grouped FASTQ merging with providing filetype for .gz files
  job:
    metadata:
      class: File
      path: test-data/metadata2.tabular
      filetype: tabular
    Trimmed paired reads:
      class: Collection
      collection_type: list:paired
      elements:
        - class: Collection
          type: paired
          identifier: IBSC02_subset
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSC02_subset_1.fastq.gz
              filetype: fastqsanger.gz
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSC02_subset_2.fastq.gz
              filetype: fastqsanger.gz
        - class: Collection
          type: paired
          identifier: IBSM20_subset
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/IBSM20_subset_1.fastq.gz
              filetype: fastqsanger.gz
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/IBSM20_subset_2.fastq.gz
              filetype: fastqsanger.gz
        - class: Collection
          type: paired
          identifier: HC26_subset
          elements:
            - class: File
              identifier: forward
              location: https://zenodo.org/records/17151392/files/HC26_subset_1.fastq.gz
              filetype: fastqsanger.gz
            - class: File
              identifier: reverse
              location: https://zenodo.org/records/17151392/files/HC26_subset_2.fastq.gz
              filetype: fastqsanger.gz
  outputs:
    paired_output:
      element_tests:
        "group:2":
          elements:
            forward:
              asserts:
                - has_size:
                    value: 103000
                    delta: 20000
            reverse:
              asserts:
                - has_size:
                    value: 103000
                    delta: 20000
        "group:1":
          elements:
            forward:
              asserts:
                - has_size:
                    value: 202000
                    delta: 20000
            reverse:
              asserts:
                - has_size:
                    value: 201400
                    delta: 20000                   
