title: "COVID-19: Variation Analysis Reporting"
nodes:
  - id: variantData
    type: input
    label: Variant VCF Data
    subtitle: "list collection"
    detail: From variant calling
    column: 0
    row: 0
  - id: filterParams
    type: input
    label: Filter Parameters
    subtitle: "AF, DP, DP_ALT thresholds"
    column: 0
    row: 1
  - id: geneProducts
    type: input
    label: Gene Products Map
    subtitle: RefSeq to common names
    column: 0
    row: 2
  - id: snpsiftFilter
    type: tool
    label: SnpSift Filter
    subtitle: Apply AF/DP thresholds
    step: "1"
    column: 1
    row: 0
  - id: extractFields
    type: tool
    label: Extract &amp; Annotate
    subtitle: Extract fields, rename effects
    step: "2"
    column: 2
    row: 0
  - id: buildReports
    type: tool
    label: Build Reports
    subtitle: Collapse, join, sort variants
    step: "3"
    column: 3
    row: 0
  - id: bySampleReport
    type: output
    label: Report by Sample
    subtitle: Variants per sample
    column: 4
    row: 0
  - id: byVariantReport
    type: output
    label: Report by Variant
    subtitle: Samples per variant
    column: 4
    row: 1
  - id: freqPlot
    type: report
    label: Variant Frequency Plot
    subtitle: AF overview with clustering
    column: 2
    row: 1
edges:
  - from: variantData
    to: snpsiftFilter
  - from: filterParams
    to: snpsiftFilter
    style: secondary
  - from: snpsiftFilter
    to: extractFields
  - from: geneProducts
    to: extractFields
    style: secondary
  - from: extractFields
    to: buildReports
  - from: buildReports
    to: bySampleReport
  - from: buildReports
    to: byVariantReport
  - from: buildReports
    to: freqPlot
    style: qc
legend:
  items: [input, primary, secondary, output, report]
