{
    "a_galaxy_workflow": "true",
    "annotation": "A workflow for SARS-CoV-2 lineage analysis from metatranscriptomic paired-end sequencing data of wastewater samples",
    "creator": [
        {
            "class": "Person",
            "identifier": "0000-0002-0507-4602",
            "name": "Polina Polunina"
        },
        {
            "class": "Person",
            "identifier": "0000-0001-9852-1987",
            "name": "B\u00e9r\u00e9nice Batut"
        },
        {
            "class": "Person",
            "identifier": "0000-0002-9464-6640",
            "name": "Wolfgang Maier"
        }
    ],
    "format-version": "0.1",
    "license": "MIT",
    "name": "SARS-CoV-2 wastewater analysis from metatranscriptome PE data with Freyja and Cojac",
    "steps": {
        "0": {
            "annotation": "VCF file containing SARS-CoV-2 variant calls",
            "content_id": null,
            "errors": null,
            "id": 0,
            "input_connections": {},
            "inputs": [
                {
                    "description": "VCF file containing SARS-CoV-2 variant calls",
                    "name": "VCF"
                }
            ],
            "label": "VCF",
            "name": "Input dataset collection",
            "outputs": [],
            "position": {
                "left": 0.52734375,
                "top": 21.0546875
            },
            "tool_id": null,
            "tool_state": "{\"optional\": false, \"format\": [\"vcf\"], \"tag\": null, \"collection_type\": \"list\"}",
            "tool_version": null,
            "type": "data_collection_input",
            "uuid": "be2ab7bf-00c2-401f-84c5-6e03b3457104",
            "when": null,
            "workflow_outputs": []
        },
        "1": {
            "annotation": "Fully processed reads for variant calling (primer-trimmed, realigned reads with added indelquals)",
            "content_id": null,
            "errors": null,
            "id": 1,
            "input_connections": {},
            "inputs": [
                {
                    "description": "Fully processed reads for variant calling (primer-trimmed, realigned reads with added indelquals)",
                    "name": "BAM collection of aligned and preprocessed reads"
                }
            ],
            "label": "BAM collection of aligned and preprocessed reads",
            "name": "Input dataset collection",
            "outputs": [],
            "position": {
                "left": 0,
                "top": 146.55791931039266
            },
            "tool_id": null,
            "tool_state": "{\"optional\": false, \"format\": [\"bam\"], \"tag\": null, \"collection_type\": \"list\"}",
            "tool_version": null,
            "type": "data_collection_input",
            "uuid": "f023cdf9-8880-451e-9f5b-cf77b865ee27",
            "when": null,
            "workflow_outputs": []
        },
        "2": {
            "annotation": "A time(s) metadata CSV file should have Sample,sample_collection_datetime form or Sample,sample_collection_datetime,viral_load form",
            "content_id": null,
            "errors": null,
            "id": 2,
            "input_connections": {},
            "inputs": [
                {
                    "description": "A time(s) metadata CSV file should have Sample,sample_collection_datetime form or Sample,sample_collection_datetime,viral_load form",
                    "name": "Time(s) metadata CSV file"
                }
            ],
            "label": "Time(s) metadata CSV file",
            "name": "Input dataset",
            "outputs": [],
            "position": {
                "left": 1299.02745527328,
                "top": 397.122185080986
            },
            "tool_id": null,
            "tool_state": "{\"optional\": false, \"format\": [\"csv\"], \"tag\": null}",
            "tool_version": null,
            "type": "data_input",
            "uuid": "294b0754-dc6e-4341-9125-d436a5221a37",
            "when": null,
            "workflow_outputs": []
        },
        "3": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_depth/samtools_depth/1.15.1+galaxy0",
            "errors": null,
            "id": 3,
            "input_connections": {
                "input_bams": {
                    "id": 1,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Samtools depth",
            "outputs": [
                {
                    "name": "output",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 401.38671875,
                "top": 167.96875
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/samtools_depth/samtools_depth/1.15.1+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "56faa6a57e50",
                "name": "samtools_depth",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"additional_options\": {\"required_flags\": null, \"skipped_flags\": [\"4\", \"256\", \"512\", \"1024\"], \"deletions\": false, \"single_read\": false}, \"all\": \"\", \"basequality\": null, \"cond_region\": {\"select_region\": \"no\", \"__current_case__\": 0}, \"input_bams\": {\"__class__\": \"ConnectedValue\"}, \"mapquality\": null, \"maxdepth\": null, \"minlength\": null, \"output_options\": {\"header\": false}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.15.1+galaxy0",
            "type": "tool",
            "uuid": "ebda63f3-e291-44a9-a79b-9c5aa212d4ee",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "Samtools depth on input dataset(s)",
                    "output_name": "output",
                    "uuid": "dce385dc-1289-42fb-acf2-80ca443b2f40"
                }
            ]
        },
        "4": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_demix/freyja_demix/1.4.4+galaxy0",
            "errors": null,
            "id": 4,
            "input_connections": {
                "depth_file": {
                    "id": 3,
                    "output_name": "output"
                },
                "variants_in": {
                    "id": 0,
                    "output_name": "output"
                }
            },
            "inputs": [
                {
                    "description": "runtime parameter for tool Freyja: Demix",
                    "name": "meta"
                }
            ],
            "label": null,
            "name": "Freyja: Demix",
            "outputs": [
                {
                    "name": "abundances",
                    "type": "tabular"
                }
            ],
            "position": {
                "left": 700.546875,
                "top": 0
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_demix/freyja_demix/1.4.4+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "c0a0e79d7196",
                "name": "freyja_demix",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"confirmedonly\": false, \"depth_cutoff\": \"10\", \"depth_file\": {\"__class__\": \"ConnectedValue\"}, \"eps\": null, \"meta\": {\"__class__\": \"RuntimeValue\"}, \"sample_name\": {\"source\": \"auto\", \"__current_case__\": 0}, \"usher_update_option\": {\"choice\": \"repo\", \"__current_case__\": 0}, \"variants_in\": {\"__class__\": \"ConnectedValue\"}, \"wgisaid\": false, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.4.4+galaxy0",
            "type": "tool",
            "uuid": "ec1ae9de-77bf-4475-afea-c390dac18ef6",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "Freyja: Demix on input dataset(s): Lineages abundances summary",
                    "output_name": "abundances",
                    "uuid": "b2b4a13d-422f-4557-b21e-028fca787301"
                }
            ]
        },
        "5": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "errors": null,
            "id": 5,
            "input_connections": {
                "need_aggregation|demix_file": {
                    "id": 4,
                    "output_name": "abundances"
                }
            },
            "inputs": [],
            "label": null,
            "name": "Freyja: Aggregate and visualize",
            "outputs": [
                {
                    "name": "aggregated",
                    "type": "tabular"
                },
                {
                    "name": "abundances_plot",
                    "type": "pdf"
                }
            ],
            "position": {
                "left": 997.3323006587863,
                "top": 194.51176309945092
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "1f89eeba299a",
                "name": "freyja_aggregate_plot",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"need_aggregation\": {\"choice\": \"yes\", \"__current_case__\": 0, \"demix_file\": {\"__class__\": \"ConnectedValue\"}}, \"plot_format\": {\"choice\": \"plot\", \"__current_case__\": 0, \"need_metadata\": {\"choice\": \"no\", \"__current_case__\": 1}, \"lineages\": false, \"mincov\": \"0.0\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.4.4+galaxy0",
            "type": "tool",
            "uuid": "a9502780-4d28-4440-9acb-837a35aa1758",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "Freyja: Aggregate and visualize on input dataset(s): Lineages abundances plot",
                    "output_name": "abundances_plot",
                    "uuid": "3e15daec-03c4-42b9-b58f-24dc8ac72616"
                },
                {
                    "label": "Freyja: Aggregate and visualize on input dataset(s): Aggregated data",
                    "output_name": "aggregated",
                    "uuid": "82d7322d-f594-4292-82d9-8bb64949836a"
                }
            ]
        },
        "6": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "errors": null,
            "id": 6,
            "input_connections": {
                "need_aggregation|tsv_aggregated": {
                    "id": 5,
                    "output_name": "aggregated"
                },
                "plot_format|need_metadata|csv_meta": {
                    "id": 2,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": "Freyja plot over time (month bins)",
            "name": "Freyja: Aggregate and visualize",
            "outputs": [
                {
                    "name": "abundances_plot",
                    "type": "pdf"
                }
            ],
            "position": {
                "left": 1603.4306620133507,
                "top": 6.067128895183275
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "1f89eeba299a",
                "name": "freyja_aggregate_plot",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"need_aggregation\": {\"choice\": \"no\", \"__current_case__\": 1, \"tsv_aggregated\": {\"__class__\": \"ConnectedValue\"}}, \"plot_format\": {\"choice\": \"plot\", \"__current_case__\": 0, \"need_metadata\": {\"choice\": \"yes\", \"__current_case__\": 0, \"csv_meta\": {\"__class__\": \"ConnectedValue\"}, \"interval\": \"MS\"}, \"lineages\": false, \"mincov\": \"0.0\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.4.4+galaxy0",
            "type": "tool",
            "uuid": "89e7f355-72ed-40d5-81fc-6d5e42328446",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "Freyja: Lineages abundances plot over time (month bins)",
                    "output_name": "abundances_plot",
                    "uuid": "cac15b18-74f9-491e-9bad-74b8e2fa9c74"
                }
            ]
        },
        "7": {
            "annotation": "",
            "content_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "errors": null,
            "id": 7,
            "input_connections": {
                "need_aggregation|tsv_aggregated": {
                    "id": 5,
                    "output_name": "aggregated"
                },
                "plot_format|need_metadata|csv_meta": {
                    "id": 2,
                    "output_name": "output"
                }
            },
            "inputs": [],
            "label": "Freyja plot over time (day bins)",
            "name": "Freyja: Aggregate and visualize",
            "outputs": [
                {
                    "name": "abundances_plot",
                    "type": "pdf"
                }
            ],
            "position": {
                "left": 1603.9128849862218,
                "top": 300.4812560741751
            },
            "post_job_actions": {},
            "tool_id": "toolshed.g2.bx.psu.edu/repos/iuc/freyja_aggregate_plot/freyja_aggregate_plot/1.4.4+galaxy0",
            "tool_shed_repository": {
                "changeset_revision": "1f89eeba299a",
                "name": "freyja_aggregate_plot",
                "owner": "iuc",
                "tool_shed": "toolshed.g2.bx.psu.edu"
            },
            "tool_state": "{\"need_aggregation\": {\"choice\": \"no\", \"__current_case__\": 1, \"tsv_aggregated\": {\"__class__\": \"ConnectedValue\"}}, \"plot_format\": {\"choice\": \"plot\", \"__current_case__\": 0, \"need_metadata\": {\"choice\": \"yes\", \"__current_case__\": 0, \"csv_meta\": {\"__class__\": \"ConnectedValue\"}, \"interval\": \"D\"}, \"lineages\": false, \"mincov\": \"0.0\"}, \"__page__\": null, \"__rerun_remap_job_id__\": null}",
            "tool_version": "1.4.4+galaxy0",
            "type": "tool",
            "uuid": "0fbb4400-00a0-4a61-8da5-e7915e7a6298",
            "when": null,
            "workflow_outputs": [
                {
                    "label": "Freyja: Lineages abundances plot (day bins)",
                    "output_name": "abundances_plot",
                    "uuid": "9c565e04-74f8-4bc6-8d5c-c21e22743a63"
                }
            ]
        }
    },
    "tags": [
        "wastewater",
        "v2",
        "metatranscriptome"
    ],
    "uuid": "cfc5d065-46fb-45c5-a9cb-f86c92d5ca26",
    "version": 8
}