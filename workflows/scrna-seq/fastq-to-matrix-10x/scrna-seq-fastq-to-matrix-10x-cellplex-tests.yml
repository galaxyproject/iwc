- doc: Test outline for scrna-seq-fastq-to-matrix-10X-cellplex.ga
  job:
    fastq PE collection GEX:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: subsample
        elements:
        - identifier: forward
          class: File
          location: https://zenodo.org/records/10229382/files/subSample_GEX_R1.fastq.gz
          filetype: fastqsanger.gz
        - identifier: reverse
          class: File
          location: https://zenodo.org/records/10229382/files/subSample_GEX_R2.fastq.gz
          filetype: fastqsanger.gz
    reference genome: mm10full # To test on usegalaxy.eu
    gtf:
      class: File
      location: https://zenodo.org/records/10079673/files/mm10_custom102_allGastruloids_min10_extended.gtf.gz
      decompress: true
      filetype: gtf
    cellranger_barcodes_3M-february-2018.txt:
      class: File
      location: https://zenodo.org/record/3457880/files/3M-february-2018.txt.gz
      decompress: true
      filetype: tabular
    fastq PE collection CMO:
      class: Collection
      collection_type: list:paired
      elements:
      - class: Collection
        type: paired
        identifier: subsample
        elements:
        - identifier: forward
          class: File
          location: https://zenodo.org/records/10229382/files/subSample_CMO_R1.fastq.gz
          filetype: fastqsanger.gz
        - identifier: reverse
          class: File
          location: https://zenodo.org/records/10229382/files/subSample_CMO_R2.fastq.gz
          filetype: fastqsanger.gz
    sample name and CMO sequence collection:
      class: Collection
      collection_type: list
      elements:
      - class: File
        identifier: subsample
        location: https://zenodo.org/records/10229382/files/CMO.csv
        filetype: csv
    Number of expected cells (used by CITE-seq-Count)): 1000
  outputs:
    MultiQC_STARsolo:
      class: File
      asserts:
        - that: "has_text_matching"
          expression: "<tbody><tr><th class=\"rowheader\" data-original-sn=\"subsample\">subsample</th><td class=\"data-coloured mqc-generalstats-star-uniquely_mapped_percent \"><div class=\"wrapper\"><span class=\"bar\" style=\"width:7[0-9].[0-9]%; background-color:#bbd9c6;\"></span><span class=\"val\">7[0-9].[0-9]%</span></div></td><td class=\"data-coloured mqc-generalstats-star-uniquely_mapped \"><div class=\"wrapper\"><span class=\"bar\" style=\"width:100.0%; background-color:#d1b3bc;\"></span><span class=\"val\">[0-9].[0-9]</span></div></td></tr></tbody>"
    Seurat input for gene expression (filtered):
      class: Collection
      collection_type: list:list
      elements:
        class: Collection
        collection_type: list
        identifier: subsample
        elements:
        - class: File
          identifier: matrix
          asserts:
            - has_line:
              line: "55141 353 1026324"
        - class: File
          identifier: barcodes
          asserts:
            - has_line:
              line: "AAACGAAAGCATGCAG"
        - class: File
          identifier: genes
          asserts:
            - has_line:
              line: "ENSMUSG00000102693	4933401J01Rik"
    CITE-seq-Count report:
      class: Collection
      collection_type: list
      elements:
        identifier: subsample
        class: File
        asserts:
          - that: "has_line"
            line: "CITE-seq-Count Version: 1.4.4"
          - that: "has_line"
            line: "Reads processed: 1171367"
          - that: "has_line"
            line: "Percentage mapped: 99"
          - that: "has_line"
            line: "Percentage unmapped: 1"
    Seurat input for CMO (UMI):
      class: Collection
      collection_type: list:list
      elements:
        class: Collection
        collection_type: list
        identifier: subsample
        elements:
        - class: File
          identifier: matrix
          asserts:
            - has_line:
              line: "8 toto 220553"
        - class: File
          identifier: barcodes
          asserts:
            - has_line:
              line: "CGGGTCAAGGATGGAG"
        - class: File
          identifier: genes
          asserts:
            - has_line:
              line: "mESC.rep1-CGCGATATGGTCGGA"

      class: Collection
      collection_type: list:list
